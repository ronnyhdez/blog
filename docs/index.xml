<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Ronny A. Hernández Mora</title>
<link>https://ronnyale.com/index.html</link>
<atom:link href="https://ronnyale.com/index.xml" rel="self" type="application/rss+xml"/>
<description>By Ronny A. Hernández Mora
</description>
<generator>quarto-1.3.450</generator>
<lastBuildDate>Sat, 24 Aug 2024 06:00:00 GMT</lastBuildDate>
<item>
  <title>MODIS pixel bit strings conversion with R</title>
  <dc:creator>Ronny A. Hernandez Mora</dc:creator>
  <link>https://ronnyale.com/posts/2023-12-25-modis-bitstring/index.html</link>
  <description><![CDATA[ 




<section id="what-are-we-going-to-do" class="level1">
<h1>What are we going to do?</h1>
<p>While working with some <a href="https://lpdaac.usgs.gov/products/mod09gav061/">MODIS Surfance Reflectance product images</a>, my goal was to<br>
calculate 4 vegetation indices to estimate Gross Primary Production. Alongside the standard considerations of selecting images free from snow or clouds, I knew that every pixel comes with Quality Assurance (QA) information. This QA data is important to decide whether to include or exclude certain pixels from the analysis.</p>
<p>Nonetheless, I found myself confused about how to perform this task on the many pixels I had, and furthermore, how to deal with the transformation of bits into categories that I could understand and then filter in R according to their quality.</p>
<p>Luckily there were documentation sources available that I could go through to understand and make progress on my project. One particularly helpful resource was a <a href="https://stevemosher.wordpress.com/2012/12/05/modis-qc-bits/">blog post by Steve Mosher</a>, where I got a better understanding of what needed to be done. So I wrote down everything it worked for me and finally put it here, step by step.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is an exercise to understand how the binary conversion works. There are easier ways to work with satellite images and their quality assurance data.</p>
</div>
</div>
</section>
<section id="modis-and-the-bit-strings" class="level1 page-columns page-full">
<h1>MODIS and the bit strings</h1>
<p>The MODIS dataset includes surface spectral reflectance from bands 1 through 7, with a spatial resolution of 500m, and incorporates corrections for atmospheric conditions such as aerosols, gases, and Rayleigh scattering <span class="citation" data-cites="vermote2021modis">(Vermote 2021)</span>. Additionally, it provides QA data that enables the removal of pixels with low quality, which could otherwise affect our analysis. The <a href="https://lpdaac.usgs.gov/documents/306/MOD09_User_Guide_V6.pdf">MODIS reference manual</a> offers detailed technical documentation on how the variables are encoded and how these values can be interpreted.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p>The reason for this is that satellite images tend to be large, so encoding variables helps to compress the data.</p>
</div></div><section id="variables-with-bit-strings" class="level2">
<h2 class="anchored" data-anchor-id="variables-with-bit-strings">Variables with bit strings</h2>
<p>There are 4 variables in the dataset with a bitmask that needs to be converted:</p>
<ul>
<li><code>state_1km</code></li>
<li><code>gflags</code></li>
<li><code>qc_500m</code></li>
<li><code>q_scan</code></li>
</ul>
<p>According to the technical documentation, this variables contain information about the state of the atmosphere and surface at a 1 km resolution (<code>state_1km</code>), geolocation of the pixel (<code>gflags</code>), quality of the surface reflectance data for bands 1-7 (<code>qc_500m</code>), and info about the scan level quality of the data (<code>q_scan</code>)</p>
<p>Let’s read the dataset to explore what do we have originally in here</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Data</span></span>
<span id="cb1-2">reflectance_500 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> </span>
<span id="cb1-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">readRDS</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"posts/2023-12-25-modis-bitstring/data/borden_modis_reflectance_500_clean.rds"</span>))</span></code></pre></div>
</div>
<section id="how-many-unique-values-do-i-have-per-each-of-the-quality-variables" class="level4">
<h4 class="anchored" data-anchor-id="how-many-unique-values-do-i-have-per-each-of-the-quality-variables">How many unique values do I have per each of the quality variables?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1">reflectance_500 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(state_1km, gflags, qc_500m, q_scan) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb2-3">  purrr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unique</span>(.))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$state_1km
 [1]  1033 40969  8392  1034 40970  5384  1289  1801 45068  1545  8397  8398
[13]  1032  8396  8393  5128 40973 40974 45064  8394 32781   206 36872 32778
[25] 32777  5640 36876 32776 45066  8334   200   138   136     8    72  8264
[37]  1544  8332  1802  1288  8328  1546  8268  8330  8205    76   204   141
[49]   140  8204 40972  8266   137  1290    74  1800 32780  5896 40968   205
[61]   202   201  8329  8270  5385  5898  5642

$gflags
[1] 0

$qc_500m
 [1] 1073741824 1073968181 1073954817 1075838976 1073968129 1073755137
 [7] 1073755189 1075852341 1076065281 1946383413 1073969013 1073954869
[13] 1075852289 1076065333 1076051969 1075576832 1075590145 1075803189

$q_scan
 [1] 14  8  9  2  0  6 15  3 13 11 12  1  7 10  5  4</code></pre>
</div>
</div>
<p>So, in our dataset, <code>state_1km</code> has 67 distinct values, <code>gflags</code> variable has 1 so we are not going to use this one, <code>qc_500m</code> has 18 distinct values, and <code>q_scan</code> variable has 16 unique values. We need to convert this integers into bits and then, make sense of those bits. This is going to be our first part of the exploration.</p>
</section>
</section>
</section>
<section id="using-bits-in-r" class="level1">
<h1>Using bits in R</h1>
<p><!-- - Explanation to understand how to perform the bit conversion in R --></p>
<p>So, how do we accomplish this in R? Fortunately, we have some functions in base R specifically designed to handle this type of information. In our case, the function <code>intToBits()</code> will be particularly helpful. For instance, let’s consider one of the values from the <code>q_scan</code> variable: the integer <code>14</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">intToBits</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">14</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 00 01 01 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
[26] 00 00 00 00 00 00 00</code></pre>
</div>
</div>
<p>That’s quite a lengthy bit string! It contains more information than necessary. Therefore, we need to shorten this bit string and convert it into an integer.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.integer</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">intToBits</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">14</span>)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 1 1 1 0 0 0 0</code></pre>
</div>
</div>
<ul>
<li>Remember that this has to be read from left to right. So the first bit is 0.</li>
<li>The 8 bits are numbered from 0 to 7 (as opposed to the R default).</li>
<li>Each bit represents a power of 2.</li>
<li>We need to reverse this bit string</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1">bit_string <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.integer</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">intToBits</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">14</span>)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>])</span>
<span id="cb8-2">bit_string[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 0 0 0 1 1 1 0</code></pre>
</div>
</div>
</section>
<section id="binary-conversion" class="level1">
<h1>Binary conversion</h1>
<p>Every pixel in the satellite images contains an integer value that must be converted to a bit binary value for interpretation. At first, it seems complicated but the documentation will help us here. For any sensor, we would need to check the documentation in order to perform any binary conversion and interpretation.</p>
<p>There is also a good video from the United States Geological Survey (USGS) that explains the process for the interpretation of the binary conversion with the documentation. From minute 2:34 of this <a href="https://www.usgs.gov/media/videos/getting-started-modis-v6-surface-reflectance-data-part-3">USGS video</a> it shows the process of the binary conversion.</p>
<section id="how-can-i-apply-the-idea-to-our-modis-data" class="level2">
<h2 class="anchored" data-anchor-id="how-can-i-apply-the-idea-to-our-modis-data">How can I apply the idea to our MODIS data?</h2>
<p>We’ve covered the basics of understanding bits, binary conversion, and interpretation. But how do we put this knowledge to use with our dataset? This is where <a href="https://stevemosher.wordpress.com/2012/12/05/modis-qc-bits/">Steve Mosher’s blog post</a> comes in handy.</p>
<p>Let’s start by taking a single value from the <code>qc_500m</code> variable in our dataset: <code>1075803189</code>. Here are the steps we’ll follow:</p>
<ul>
<li>Utilize the <code>intToBits()</code> function to obtain the binary representation.</li>
<li>Shorten the lengthy bit string to only include the necessary bits.</li>
<li>Reverse the order of the bits.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Using one bitmask value from the dataset</span></span>
<span id="cb10-2">bits <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.integer</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">intToBits</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1075803189</span>)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">32</span>])</span>
<span id="cb10-3">bits</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 0 1 0 1 1 0 0 0 0 1 0 1 1 1 0 1 1 1 1 1 0 0 0 0 0 0 0 0 0 1 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Reverse</span></span>
<span id="cb12-2">bits[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">32</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0 1 0 0 0 0 0 0 0 0 0 1 1 1 1 1 0 1 1 1 0 1 0 0 0 0 1 1 0 1 0 1</code></pre>
</div>
</div>
<p>Ok! It looks like it works. But I’m not sure, so let’s perform the same process but using the example from the USGS video.</p>
</section>
<section id="process-validation" class="level2">
<h2 class="anchored" data-anchor-id="process-validation">Process validation</h2>
<p>In the USGS video explanation, they show the binary conversion process with an example. I’m going to use the same integer value <code>1131675649</code> to validate if our code steps work as expected.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://ronnyale.com/posts/2023-12-25-modis-bitstring/images/usgs_example_int.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">USGS video integer example</figcaption>
</figure>
</div>
<p>The bit string obtained from the binary conversion should be:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://ronnyale.com/posts/2023-12-25-modis-bitstring/images/usgs_example_binary.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">USGS bit string example</figcaption>
</figure>
</div>
<p>That bit string should be matched with the categories assigned and described in the documentation:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://ronnyale.com/posts/2023-12-25-modis-bitstring/images/usgs_bit_conversion_video.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">USGS bit string quality categories</figcaption>
</figure>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#  Using the example value from video</span></span>
<span id="cb14-2">binary_conversion <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.integer</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">intToBits</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1131675649</span>)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">32</span>])</span>
<span id="cb14-3">bit_string <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> binary_conversion[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">32</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span>
<span id="cb14-4"></span>
<span id="cb14-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># This one is the result of the binary transformation from the video</span></span>
<span id="cb14-6">validation <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb14-7"></span>
<span id="cb14-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Check if object is the same as the one written by hand</span></span>
<span id="cb14-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stopifnot</span>(bit_string <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> validation)</span></code></pre></div>
</div>
<p>Success! Our results does match the final output. Now that I know for sure our code works, I’m going to apply the same logical conditions to the complete dataset.</p>
</section>
<section id="code-to-apply-the-bit-string-conversion-to-the-variables" class="level2">
<h2 class="anchored" data-anchor-id="code-to-apply-the-bit-string-conversion-to-the-variables">Code to apply the bit string conversion to the variables</h2>
<p>Now that I understand the steps required for the conversion, I need to further develop the code to apply it to each variable with a bit mask. On this first try, I will do it with the variable <code>qc_500m</code>.</p>
<p>For this variable, I’ll create a dataset containing the <code>qc_ints</code> variable, which includes the 18 unique integer values from <code>qc_500m</code> and an additional observation from the USGS video example for test validation. Next, I’ll add 32 more variables, each representing a bit from the binary conversion process.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Create column with unique values and add one validation (from the video)</span></span>
<span id="cb15-2">qc_data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">qc_ints =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unique</span>(reflectance_500<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>qc_500m), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1131675649</span>))</span>
<span id="cb15-3"></span>
<span id="cb15-4"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Create empty data frame. This case is 32 given that the variable</span></span>
<span id="cb15-5"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## `qc_500m` have 32 bits</span></span>
<span id="cb15-6"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">31</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)) {</span>
<span id="cb15-7">  qc_data[, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_"</span>, i)] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span></span>
<span id="cb15-8">}</span></code></pre></div>
</div>
<p>Here is how the data frame looks like:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paged_table</span>(qc_data)</span></code></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["qc_ints"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["bit_31"],"name":[2],"type":["lgl"],"align":["right"]},{"label":["bit_30"],"name":[3],"type":["lgl"],"align":["right"]},{"label":["bit_29"],"name":[4],"type":["lgl"],"align":["right"]},{"label":["bit_28"],"name":[5],"type":["lgl"],"align":["right"]},{"label":["bit_27"],"name":[6],"type":["lgl"],"align":["right"]},{"label":["bit_26"],"name":[7],"type":["lgl"],"align":["right"]},{"label":["bit_25"],"name":[8],"type":["lgl"],"align":["right"]},{"label":["bit_24"],"name":[9],"type":["lgl"],"align":["right"]},{"label":["bit_23"],"name":[10],"type":["lgl"],"align":["right"]},{"label":["bit_22"],"name":[11],"type":["lgl"],"align":["right"]},{"label":["bit_21"],"name":[12],"type":["lgl"],"align":["right"]},{"label":["bit_20"],"name":[13],"type":["lgl"],"align":["right"]},{"label":["bit_19"],"name":[14],"type":["lgl"],"align":["right"]},{"label":["bit_18"],"name":[15],"type":["lgl"],"align":["right"]},{"label":["bit_17"],"name":[16],"type":["lgl"],"align":["right"]},{"label":["bit_16"],"name":[17],"type":["lgl"],"align":["right"]},{"label":["bit_15"],"name":[18],"type":["lgl"],"align":["right"]},{"label":["bit_14"],"name":[19],"type":["lgl"],"align":["right"]},{"label":["bit_13"],"name":[20],"type":["lgl"],"align":["right"]},{"label":["bit_12"],"name":[21],"type":["lgl"],"align":["right"]},{"label":["bit_11"],"name":[22],"type":["lgl"],"align":["right"]},{"label":["bit_10"],"name":[23],"type":["lgl"],"align":["right"]},{"label":["bit_9"],"name":[24],"type":["lgl"],"align":["right"]},{"label":["bit_8"],"name":[25],"type":["lgl"],"align":["right"]},{"label":["bit_7"],"name":[26],"type":["lgl"],"align":["right"]},{"label":["bit_6"],"name":[27],"type":["lgl"],"align":["right"]},{"label":["bit_5"],"name":[28],"type":["lgl"],"align":["right"]},{"label":["bit_4"],"name":[29],"type":["lgl"],"align":["right"]},{"label":["bit_3"],"name":[30],"type":["lgl"],"align":["right"]},{"label":["bit_2"],"name":[31],"type":["lgl"],"align":["right"]},{"label":["bit_1"],"name":[32],"type":["lgl"],"align":["right"]},{"label":["bit_0"],"name":[33],"type":["lgl"],"align":["right"]}],"data":[{"1":"1073741824","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA"},{"1":"1073968181","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA"},{"1":"1073954817","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA"},{"1":"1075838976","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA"},{"1":"1073968129","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA"},{"1":"1073755137","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA"},{"1":"1073755189","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA"},{"1":"1075852341","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA"},{"1":"1076065281","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA"},{"1":"1946383413","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA"},{"1":"1073969013","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA"},{"1":"1073954869","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA"},{"1":"1075852289","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA"},{"1":"1076065333","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA"},{"1":"1076051969","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA"},{"1":"1075576832","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA"},{"1":"1075590145","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA"},{"1":"1075803189","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA"},{"1":"1131675649","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>So far, we have a dataframe with 33 variables (one with the original integers values and 32 more to fill with the bit strings) and 19 observations. Now I can loop through each of the bits variables filling them with the values from the binary conversion result from the original integers</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Loop for obtaining bit string from unique values in the variable</span></span>
<span id="cb17-2">z <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb17-3"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> qc_data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>qc_ints) {</span>
<span id="cb17-4">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># print(i)</span></span>
<span id="cb17-5">  transformed <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.integer</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">intToBits</span>(i)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">32</span>])</span>
<span id="cb17-6">  qc_data[z, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">33</span>] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> transformed[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">32</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span>
<span id="cb17-7">  z <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> z <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb17-8">}</span>
<span id="cb17-9"></span>
<span id="cb17-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Check the data frame</span></span>
<span id="cb17-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paged_table</span>(qc_data)</span></code></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["qc_ints"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["bit_31"],"name":[2],"type":["int"],"align":["right"]},{"label":["bit_30"],"name":[3],"type":["int"],"align":["right"]},{"label":["bit_29"],"name":[4],"type":["int"],"align":["right"]},{"label":["bit_28"],"name":[5],"type":["int"],"align":["right"]},{"label":["bit_27"],"name":[6],"type":["int"],"align":["right"]},{"label":["bit_26"],"name":[7],"type":["int"],"align":["right"]},{"label":["bit_25"],"name":[8],"type":["int"],"align":["right"]},{"label":["bit_24"],"name":[9],"type":["int"],"align":["right"]},{"label":["bit_23"],"name":[10],"type":["int"],"align":["right"]},{"label":["bit_22"],"name":[11],"type":["int"],"align":["right"]},{"label":["bit_21"],"name":[12],"type":["int"],"align":["right"]},{"label":["bit_20"],"name":[13],"type":["int"],"align":["right"]},{"label":["bit_19"],"name":[14],"type":["int"],"align":["right"]},{"label":["bit_18"],"name":[15],"type":["int"],"align":["right"]},{"label":["bit_17"],"name":[16],"type":["int"],"align":["right"]},{"label":["bit_16"],"name":[17],"type":["int"],"align":["right"]},{"label":["bit_15"],"name":[18],"type":["int"],"align":["right"]},{"label":["bit_14"],"name":[19],"type":["int"],"align":["right"]},{"label":["bit_13"],"name":[20],"type":["int"],"align":["right"]},{"label":["bit_12"],"name":[21],"type":["int"],"align":["right"]},{"label":["bit_11"],"name":[22],"type":["int"],"align":["right"]},{"label":["bit_10"],"name":[23],"type":["int"],"align":["right"]},{"label":["bit_9"],"name":[24],"type":["int"],"align":["right"]},{"label":["bit_8"],"name":[25],"type":["int"],"align":["right"]},{"label":["bit_7"],"name":[26],"type":["int"],"align":["right"]},{"label":["bit_6"],"name":[27],"type":["int"],"align":["right"]},{"label":["bit_5"],"name":[28],"type":["int"],"align":["right"]},{"label":["bit_4"],"name":[29],"type":["int"],"align":["right"]},{"label":["bit_3"],"name":[30],"type":["int"],"align":["right"]},{"label":["bit_2"],"name":[31],"type":["int"],"align":["right"]},{"label":["bit_1"],"name":[32],"type":["int"],"align":["right"]},{"label":["bit_0"],"name":[33],"type":["int"],"align":["right"]}],"data":[{"1":"1073741824","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"0","33":"0"},{"1":"1073968181","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"1","17":"1","18":"0","19":"1","20":"1","21":"1","22":"0","23":"1","24":"0","25":"0","26":"0","27":"0","28":"1","29":"1","30":"0","31":"1","32":"0","33":"1"},{"1":"1073954817","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"1","17":"1","18":"0","19":"1","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"0","33":"1"},{"1":"1075838976","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"1","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"0","33":"0"},{"1":"1073968129","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"1","17":"1","18":"0","19":"1","20":"1","21":"1","22":"0","23":"1","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"0","33":"1"},{"1":"1073755137","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"1","21":"1","22":"0","23":"1","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"0","33":"1"},{"1":"1073755189","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"1","21":"1","22":"0","23":"1","24":"0","25":"0","26":"0","27":"0","28":"1","29":"1","30":"0","31":"1","32":"0","33":"1"},{"1":"1075852341","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"1","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"1","21":"1","22":"0","23":"1","24":"0","25":"0","26":"0","27":"0","28":"1","29":"1","30":"0","31":"1","32":"0","33":"1"},{"1":"1076065281","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"1","13":"0","14":"0","15":"0","16":"1","17":"1","18":"0","19":"1","20":"1","21":"1","22":"0","23":"1","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"0","33":"1"},{"1":"1946383413","2":"0","3":"1","4":"1","5":"1","6":"0","7":"1","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"1","17":"1","18":"0","19":"1","20":"1","21":"1","22":"0","23":"1","24":"0","25":"0","26":"0","27":"0","28":"1","29":"1","30":"0","31":"1","32":"0","33":"1"},{"1":"1073969013","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"1","17":"1","18":"0","19":"1","20":"1","21":"1","22":"0","23":"1","24":"1","25":"1","26":"0","27":"1","28":"1","29":"1","30":"0","31":"1","32":"0","33":"1"},{"1":"1073954869","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"1","17":"1","18":"0","19":"1","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"1","29":"1","30":"0","31":"1","32":"0","33":"1"},{"1":"1075852289","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"1","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"1","21":"1","22":"0","23":"1","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"0","33":"1"},{"1":"1076065333","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"1","13":"0","14":"0","15":"0","16":"1","17":"1","18":"0","19":"1","20":"1","21":"1","22":"0","23":"1","24":"0","25":"0","26":"0","27":"0","28":"1","29":"1","30":"0","31":"1","32":"0","33":"1"},{"1":"1076051969","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"1","13":"0","14":"0","15":"0","16":"1","17":"1","18":"0","19":"1","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"0","33":"1"},{"1":"1075576832","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"1","14":"1","15":"1","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"0","33":"0"},{"1":"1075590145","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"1","14":"1","15":"1","16":"0","17":"0","18":"0","19":"0","20":"1","21":"1","22":"0","23":"1","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"0","33":"1"},{"1":"1075803189","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"1","14":"1","15":"1","16":"1","17":"1","18":"0","19":"1","20":"1","21":"1","22":"0","23":"1","24":"0","25":"0","26":"0","27":"0","28":"1","29":"1","30":"0","31":"1","32":"0","33":"1"},{"1":"1131675649","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"1","9":"1","10":"0","11":"1","12":"1","13":"1","14":"0","15":"1","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"0","33":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Every bit variable is filled with <code>0's</code> or <code>1's</code>. Looks good, but I want to validate with the USGS example observation we added at the beginning if I’m obtaining the correct bit strings:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Create test according to value in video</span></span>
<span id="cb18-2">process_test <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> qc_data <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb18-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(qc_ints <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1131675649</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb18-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>qc_ints) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb18-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unite</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"new"</span>, bit_31<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>bit_0, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb18-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>() </span>
<span id="cb18-7"></span>
<span id="cb18-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stopifnot</span>(process_test <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"01000011011101000000000000000001"</span>)</span></code></pre></div>
</div>
<p>With the code now successfully converting binary values, we can proceed to categorize the quality of each pixel based on the documentation guidelines.</p>
</section>
</section>
<section id="categories-for-each-of-the-bit-strings" class="level1">
<h1>Categories for each of the bit strings</h1>
<p>Continuing with the variable <code>qc_500m</code> from which I have already the bit strings, I can follow the <a href="https://lpdaac.usgs.gov/documents/306/MOD09_User_Guide_V6.pdf">MODIS documentation</a> to add the categories for each combination of bits.</p>
<p>This steps can be done in <strong>two</strong> different (but similar) ways: using conditionals for each of the bits, or joining the variables with the specific bits.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paged_table</span>(qc_data)</span></code></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["qc_ints"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["bit_31"],"name":[2],"type":["int"],"align":["right"]},{"label":["bit_30"],"name":[3],"type":["int"],"align":["right"]},{"label":["bit_29"],"name":[4],"type":["int"],"align":["right"]},{"label":["bit_28"],"name":[5],"type":["int"],"align":["right"]},{"label":["bit_27"],"name":[6],"type":["int"],"align":["right"]},{"label":["bit_26"],"name":[7],"type":["int"],"align":["right"]},{"label":["bit_25"],"name":[8],"type":["int"],"align":["right"]},{"label":["bit_24"],"name":[9],"type":["int"],"align":["right"]},{"label":["bit_23"],"name":[10],"type":["int"],"align":["right"]},{"label":["bit_22"],"name":[11],"type":["int"],"align":["right"]},{"label":["bit_21"],"name":[12],"type":["int"],"align":["right"]},{"label":["bit_20"],"name":[13],"type":["int"],"align":["right"]},{"label":["bit_19"],"name":[14],"type":["int"],"align":["right"]},{"label":["bit_18"],"name":[15],"type":["int"],"align":["right"]},{"label":["bit_17"],"name":[16],"type":["int"],"align":["right"]},{"label":["bit_16"],"name":[17],"type":["int"],"align":["right"]},{"label":["bit_15"],"name":[18],"type":["int"],"align":["right"]},{"label":["bit_14"],"name":[19],"type":["int"],"align":["right"]},{"label":["bit_13"],"name":[20],"type":["int"],"align":["right"]},{"label":["bit_12"],"name":[21],"type":["int"],"align":["right"]},{"label":["bit_11"],"name":[22],"type":["int"],"align":["right"]},{"label":["bit_10"],"name":[23],"type":["int"],"align":["right"]},{"label":["bit_9"],"name":[24],"type":["int"],"align":["right"]},{"label":["bit_8"],"name":[25],"type":["int"],"align":["right"]},{"label":["bit_7"],"name":[26],"type":["int"],"align":["right"]},{"label":["bit_6"],"name":[27],"type":["int"],"align":["right"]},{"label":["bit_5"],"name":[28],"type":["int"],"align":["right"]},{"label":["bit_4"],"name":[29],"type":["int"],"align":["right"]},{"label":["bit_3"],"name":[30],"type":["int"],"align":["right"]},{"label":["bit_2"],"name":[31],"type":["int"],"align":["right"]},{"label":["bit_1"],"name":[32],"type":["int"],"align":["right"]},{"label":["bit_0"],"name":[33],"type":["int"],"align":["right"]}],"data":[{"1":"1073741824","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"0","33":"0"},{"1":"1073968181","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"1","17":"1","18":"0","19":"1","20":"1","21":"1","22":"0","23":"1","24":"0","25":"0","26":"0","27":"0","28":"1","29":"1","30":"0","31":"1","32":"0","33":"1"},{"1":"1073954817","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"1","17":"1","18":"0","19":"1","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"0","33":"1"},{"1":"1075838976","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"1","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"0","33":"0"},{"1":"1073968129","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"1","17":"1","18":"0","19":"1","20":"1","21":"1","22":"0","23":"1","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"0","33":"1"},{"1":"1073755137","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"1","21":"1","22":"0","23":"1","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"0","33":"1"},{"1":"1073755189","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"1","21":"1","22":"0","23":"1","24":"0","25":"0","26":"0","27":"0","28":"1","29":"1","30":"0","31":"1","32":"0","33":"1"},{"1":"1075852341","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"1","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"1","21":"1","22":"0","23":"1","24":"0","25":"0","26":"0","27":"0","28":"1","29":"1","30":"0","31":"1","32":"0","33":"1"},{"1":"1076065281","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"1","13":"0","14":"0","15":"0","16":"1","17":"1","18":"0","19":"1","20":"1","21":"1","22":"0","23":"1","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"0","33":"1"},{"1":"1946383413","2":"0","3":"1","4":"1","5":"1","6":"0","7":"1","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"1","17":"1","18":"0","19":"1","20":"1","21":"1","22":"0","23":"1","24":"0","25":"0","26":"0","27":"0","28":"1","29":"1","30":"0","31":"1","32":"0","33":"1"},{"1":"1073969013","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"1","17":"1","18":"0","19":"1","20":"1","21":"1","22":"0","23":"1","24":"1","25":"1","26":"0","27":"1","28":"1","29":"1","30":"0","31":"1","32":"0","33":"1"},{"1":"1073954869","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"1","17":"1","18":"0","19":"1","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"1","29":"1","30":"0","31":"1","32":"0","33":"1"},{"1":"1075852289","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"1","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"1","21":"1","22":"0","23":"1","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"0","33":"1"},{"1":"1076065333","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"1","13":"0","14":"0","15":"0","16":"1","17":"1","18":"0","19":"1","20":"1","21":"1","22":"0","23":"1","24":"0","25":"0","26":"0","27":"0","28":"1","29":"1","30":"0","31":"1","32":"0","33":"1"},{"1":"1076051969","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"1","13":"0","14":"0","15":"0","16":"1","17":"1","18":"0","19":"1","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"0","33":"1"},{"1":"1075576832","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"1","14":"1","15":"1","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"0","33":"0"},{"1":"1075590145","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"1","14":"1","15":"1","16":"0","17":"0","18":"0","19":"0","20":"1","21":"1","22":"0","23":"1","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"0","33":"1"},{"1":"1075803189","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"1","14":"1","15":"1","16":"1","17":"1","18":"0","19":"1","20":"1","21":"1","22":"0","23":"1","24":"0","25":"0","26":"0","27":"0","28":"1","29":"1","30":"0","31":"1","32":"0","33":"1"},{"1":"1131675649","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"1","9":"1","10":"0","11":"1","12":"1","13":"1","14":"0","15":"1","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"0","33":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p><strong>First possible solution</strong></p>
<p>This one will take the bits separately and use the boolean <code>&amp;</code> to categorize the information contained in the bit string:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1">qc_data <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb20-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">modland_qa =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb20-3">    bit_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> bit_0 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ideal quality - all bands"</span>,</span>
<span id="cb20-4">    bit_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> bit_0 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"less than ideal quality - some or all bands"</span>,</span>
<span id="cb20-5">    bit_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> bit_0 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"product not produced due to cloud effects"</span>,</span>
<span id="cb20-6">    bit_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> bit_0 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"product not produced for other reasons"</span>,</span>
<span id="cb20-7">    <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"No info, please validate bit conversion"</span></span>
<span id="cb20-8">  )) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb20-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(qc_ints, bit_1, bit_0, modland_qa) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb20-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paged_table</span>()</span></code></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["qc_ints"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["bit_1"],"name":[2],"type":["int"],"align":["right"]},{"label":["bit_0"],"name":[3],"type":["int"],"align":["right"]},{"label":["modland_qa"],"name":[4],"type":["chr"],"align":["left"]}],"data":[{"1":"1073741824","2":"0","3":"0","4":"ideal quality - all bands"},{"1":"1073968181","2":"0","3":"1","4":"less than ideal quality - some or all bands"},{"1":"1073954817","2":"0","3":"1","4":"less than ideal quality - some or all bands"},{"1":"1075838976","2":"0","3":"0","4":"ideal quality - all bands"},{"1":"1073968129","2":"0","3":"1","4":"less than ideal quality - some or all bands"},{"1":"1073755137","2":"0","3":"1","4":"less than ideal quality - some or all bands"},{"1":"1073755189","2":"0","3":"1","4":"less than ideal quality - some or all bands"},{"1":"1075852341","2":"0","3":"1","4":"less than ideal quality - some or all bands"},{"1":"1076065281","2":"0","3":"1","4":"less than ideal quality - some or all bands"},{"1":"1946383413","2":"0","3":"1","4":"less than ideal quality - some or all bands"},{"1":"1073969013","2":"0","3":"1","4":"less than ideal quality - some or all bands"},{"1":"1073954869","2":"0","3":"1","4":"less than ideal quality - some or all bands"},{"1":"1075852289","2":"0","3":"1","4":"less than ideal quality - some or all bands"},{"1":"1076065333","2":"0","3":"1","4":"less than ideal quality - some or all bands"},{"1":"1076051969","2":"0","3":"1","4":"less than ideal quality - some or all bands"},{"1":"1075576832","2":"0","3":"0","4":"ideal quality - all bands"},{"1":"1075590145","2":"0","3":"1","4":"less than ideal quality - some or all bands"},{"1":"1075803189","2":"0","3":"1","4":"less than ideal quality - some or all bands"},{"1":"1131675649","2":"0","3":"1","4":"less than ideal quality - some or all bands"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p><strong>Second possible solution</strong></p>
<p>For this one, I will join the bits and then categorize each one accordingly:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Second possible solution</span></span>
<span id="cb21-2">qc_data <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb21-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unite</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"modland"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_1"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_0"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb21-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">modland_qa =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb21-5">    modland <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"00"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ideal quality - all bands"</span>,</span>
<span id="cb21-6">    modland <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"01"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"less than ideal quality - some or all bands"</span>,</span>
<span id="cb21-7">    modland <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"10"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"product not produced due to cloud effects"</span>,</span>
<span id="cb21-8">    modland <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"11"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"product not produced for other reasons"</span>,</span>
<span id="cb21-9">    <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"No info, please validate bit conversion"</span></span>
<span id="cb21-10">  )) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb21-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(qc_ints, modland, modland_qa) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb21-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paged_table</span>()</span></code></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["qc_ints"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["modland"],"name":[2],"type":["chr"],"align":["left"]},{"label":["modland_qa"],"name":[3],"type":["chr"],"align":["left"]}],"data":[{"1":"1073741824","2":"00","3":"ideal quality - all bands"},{"1":"1073968181","2":"01","3":"less than ideal quality - some or all bands"},{"1":"1073954817","2":"01","3":"less than ideal quality - some or all bands"},{"1":"1075838976","2":"00","3":"ideal quality - all bands"},{"1":"1073968129","2":"01","3":"less than ideal quality - some or all bands"},{"1":"1073755137","2":"01","3":"less than ideal quality - some or all bands"},{"1":"1073755189","2":"01","3":"less than ideal quality - some or all bands"},{"1":"1075852341","2":"01","3":"less than ideal quality - some or all bands"},{"1":"1076065281","2":"01","3":"less than ideal quality - some or all bands"},{"1":"1946383413","2":"01","3":"less than ideal quality - some or all bands"},{"1":"1073969013","2":"01","3":"less than ideal quality - some or all bands"},{"1":"1073954869","2":"01","3":"less than ideal quality - some or all bands"},{"1":"1075852289","2":"01","3":"less than ideal quality - some or all bands"},{"1":"1076065333","2":"01","3":"less than ideal quality - some or all bands"},{"1":"1076051969","2":"01","3":"less than ideal quality - some or all bands"},{"1":"1075576832","2":"00","3":"ideal quality - all bands"},{"1":"1075590145","2":"01","3":"less than ideal quality - some or all bands"},{"1":"1075803189","2":"01","3":"less than ideal quality - some or all bands"},{"1":"1131675649","2":"01","3":"less than ideal quality - some or all bands"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Considering that I’ll need to write out each condition to categorize them according to the documentation, I believe it would be more manageable and readable to follow the second solution. For each series of bits, I’ll merge them as a single column and categorize them.</p>
<section id="qc_500m-complete-bit-string-categories" class="level2">
<h2 class="anchored" data-anchor-id="qc_500m-complete-bit-string-categories"><code>qc_500m</code> complete bit string categories</h2>
<p>The following code chunk includes all the steps needed to incorporate the all the categories specified in the MODIS documentation. First, it merges the required bits into columns, then it generates the categorizations based on the documentation guidelines. The result is a data frame that contains the categorized values corresponding to the original integers in our variable.</p>
<p>From the documentation, we have which bit strings should be considered together to classify the values into categories. Based on those bit positions, we are going to unite the columns to obtain the bit combination. For example, for the <code>Parameter Name</code> MODLAND QA bits, we have to take the bit in position 0 and the bit position 1, which can have 4 different combinations: <code>00</code>, <code>01</code>, <code>10</code>, and <code>11</code>. Each of those 4 combinations will be categorized into their respective categories.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://ronnyale.com/posts/2023-12-25-modis-bitstring/images/qc_bit_order.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Coarse Resolution Surface Reflectance Band Quality Description</figcaption>
</figure>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1">qc_500_description <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> qc_data <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb22-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unite</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"modland"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_1"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_0"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb22-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unite</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"band_1"</span>, </span>
<span id="cb22-4">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_5"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_4"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_3"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_2"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb22-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unite</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"band_2"</span>, </span>
<span id="cb22-6">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_9"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_8"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_7"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_6"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb22-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unite</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"band_3"</span>, </span>
<span id="cb22-8">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_13"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_12"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_11"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_10"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb22-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unite</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"band_4"</span>, </span>
<span id="cb22-10">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_17"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_16"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_15"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_14"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb22-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unite</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"band_5"</span>, </span>
<span id="cb22-12">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_21"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_20"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_19"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_18"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb22-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unite</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"band_6"</span>, </span>
<span id="cb22-14">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_25"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_24"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_23"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_22"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb22-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unite</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"band_7"</span>, </span>
<span id="cb22-16">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_29"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_28"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_27"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_26"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb22-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">modland_qa =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb22-18">    modland <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"00"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ideal quality - all bands"</span>,</span>
<span id="cb22-19">    modland <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"01"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"less than ideal quality - some or all bands"</span>,</span>
<span id="cb22-20">    modland <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"10"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"product not produced due to cloud effects"</span>,</span>
<span id="cb22-21">    modland <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"11"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"product not produced for other reasons"</span>,</span>
<span id="cb22-22">    <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"No info, please validate bit conversion"</span></span>
<span id="cb22-23">  )) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb22-24">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">band1_qa =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb22-25">    band_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0000"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"highest_quality"</span>,</span>
<span id="cb22-26">    band_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0111"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"noisy detector"</span>,</span>
<span id="cb22-27">    band_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1000"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dead detector, data interpolated in L1B"</span>,</span>
<span id="cb22-28">    band_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1001"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"solar zenith &gt;= 86 degrees"</span>,</span>
<span id="cb22-29">    band_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1010"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"solar zenith &gt;= 85 and &lt; 86 degrees"</span>,</span>
<span id="cb22-30">    band_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1011"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"missing input"</span>,</span>
<span id="cb22-31">    band_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1100"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"internal constant used"</span>,</span>
<span id="cb22-32">    band_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1101"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"correction out of bounds"</span>,</span>
<span id="cb22-33">    band_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1110"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"L1B data faulty"</span>,</span>
<span id="cb22-34">    band_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1111"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"not processed due to deep ocean or clouds"</span>,</span>
<span id="cb22-35">    <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"No info, please validate bit conversion"</span></span>
<span id="cb22-36">  )) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb22-37">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">band2_qa =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb22-38">    band_2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0000"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"highest_quality"</span>,</span>
<span id="cb22-39">    band_2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0111"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"noisy detector"</span>,</span>
<span id="cb22-40">    band_2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1000"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dead detector, data interpolated in L1B"</span>,</span>
<span id="cb22-41">    band_2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1001"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"solar zenith &gt;= 86 degrees"</span>,</span>
<span id="cb22-42">    band_2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1010"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"solar zenith &gt;= 85 and &lt; 86 degrees"</span>,</span>
<span id="cb22-43">    band_2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1011"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"missing input"</span>,</span>
<span id="cb22-44">    band_2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1100"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"internal constant used"</span>,</span>
<span id="cb22-45">    band_2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1101"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"correction out of bounds"</span>,</span>
<span id="cb22-46">    band_2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1110"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"L1B data faulty"</span>,</span>
<span id="cb22-47">    band_2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1111"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"not processed due to deep ocean or clouds"</span>,</span>
<span id="cb22-48">    <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"No info, please validate bit conversion"</span></span>
<span id="cb22-49">  )) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb22-50">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">band3_qa =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb22-51">    band_3 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0000"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"highest_quality"</span>,</span>
<span id="cb22-52">    band_3 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0111"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"noisy detector"</span>,</span>
<span id="cb22-53">    band_3 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1000"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dead detector, data interpolated in L1B"</span>,</span>
<span id="cb22-54">    band_3 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1001"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"solar zenith &gt;= 86 degrees"</span>,</span>
<span id="cb22-55">    band_3 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1010"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"solar zenith &gt;= 85 and &lt; 86 degrees"</span>,</span>
<span id="cb22-56">    band_3 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1011"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"missing input"</span>,</span>
<span id="cb22-57">    band_3 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1100"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"internal constant used"</span>,</span>
<span id="cb22-58">    band_3 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1101"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"correction out of bounds"</span>,</span>
<span id="cb22-59">    band_3 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1110"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"L1B data faulty"</span>,</span>
<span id="cb22-60">    band_3 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1111"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"not processed due to deep ocean or clouds"</span>,</span>
<span id="cb22-61">    <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"No info, please validate bit conversion"</span></span>
<span id="cb22-62">  )) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb22-63">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">band4_qa =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb22-64">    band_4 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0000"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"highest_quality"</span>,</span>
<span id="cb22-65">    band_4 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0111"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"noisy detector"</span>,</span>
<span id="cb22-66">    band_4 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1000"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dead detector, data interpolated in L1B"</span>,</span>
<span id="cb22-67">    band_4 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1001"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"solar zenith &gt;= 86 degrees"</span>,</span>
<span id="cb22-68">    band_4 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1010"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"solar zenith &gt;= 85 and &lt; 86 degrees"</span>,</span>
<span id="cb22-69">    band_4 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1011"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"missing input"</span>,</span>
<span id="cb22-70">    band_4 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1100"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"internal constant used"</span>,</span>
<span id="cb22-71">    band_4 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1101"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"correction out of bounds"</span>,</span>
<span id="cb22-72">    band_4 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1110"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"L1B data faulty"</span>,</span>
<span id="cb22-73">    band_4 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1111"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"not processed due to deep ocean or clouds"</span>,</span>
<span id="cb22-74">    <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"No info, please validate bit conversion"</span></span>
<span id="cb22-75">  )) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb22-76">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">band5_qa =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb22-77">    band_5 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0000"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"highest_quality"</span>,</span>
<span id="cb22-78">    band_5 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0111"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"noisy detector"</span>,</span>
<span id="cb22-79">    band_5 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1000"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dead detector, data interpolated in L1B"</span>,</span>
<span id="cb22-80">    band_5 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1001"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"solar zenith &gt;= 86 degrees"</span>,</span>
<span id="cb22-81">    band_5 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1010"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"solar zenith &gt;= 85 and &lt; 86 degrees"</span>,</span>
<span id="cb22-82">    band_5 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1011"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"missing input"</span>,</span>
<span id="cb22-83">    band_5 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1100"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"internal constant used"</span>,</span>
<span id="cb22-84">    band_5 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1101"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"correction out of bounds"</span>,</span>
<span id="cb22-85">    band_5 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1110"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"L1B data faulty"</span>,</span>
<span id="cb22-86">    band_5 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1111"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"not processed due to deep ocean or clouds"</span>,</span>
<span id="cb22-87">    <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"No info, please validate bit conversion"</span></span>
<span id="cb22-88">  )) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb22-89">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">band6_qa =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb22-90">    band_6 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0000"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"highest_quality"</span>,</span>
<span id="cb22-91">    band_6 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0111"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"noisy detector"</span>,</span>
<span id="cb22-92">    band_6 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1000"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dead detector, data interpolated in L1B"</span>,</span>
<span id="cb22-93">    band_6 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1001"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"solar zenith &gt;= 86 degrees"</span>,</span>
<span id="cb22-94">    band_6 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1010"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"solar zenith &gt;= 85 and &lt; 86 degrees"</span>,</span>
<span id="cb22-95">    band_6 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1011"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"missing input"</span>,</span>
<span id="cb22-96">    band_6 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1100"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"internal constant used"</span>,</span>
<span id="cb22-97">    band_6 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1101"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"correction out of bounds"</span>,</span>
<span id="cb22-98">    band_6 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1110"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"L1B data faulty"</span>,</span>
<span id="cb22-99">    band_6 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1111"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"not processed due to deep ocean or clouds"</span>,</span>
<span id="cb22-100">    <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"No info, please validate bit conversion"</span></span>
<span id="cb22-101">  )) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb22-102">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">band7_qa =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb22-103">    band_7 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0000"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"highest_quality"</span>,</span>
<span id="cb22-104">    band_7 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0111"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"noisy detector"</span>,</span>
<span id="cb22-105">    band_7 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1000"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dead detector, data interpolated in L1B"</span>,</span>
<span id="cb22-106">    band_7 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1001"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"solar zenith &gt;= 86 degrees"</span>,</span>
<span id="cb22-107">    band_7 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1010"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"solar zenith &gt;= 85 and &lt; 86 degrees"</span>,</span>
<span id="cb22-108">    band_7 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1011"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"missing input"</span>,</span>
<span id="cb22-109">    band_7 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1100"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"internal constant used"</span>,</span>
<span id="cb22-110">    band_7 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1101"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"correction out of bounds"</span>,</span>
<span id="cb22-111">    band_7 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1110"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"L1B data faulty"</span>,</span>
<span id="cb22-112">    band_7 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1111"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"not processed due to deep ocean or clouds"</span>,</span>
<span id="cb22-113">    <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"No info, please validate bit conversion"</span></span>
<span id="cb22-114">  )) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb22-115">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">atmospheric_correction =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(bit_30 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"no"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yes"</span>),</span>
<span id="cb22-116">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">adjacency_correction =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(bit_31 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"no"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yes"</span>))</span>
<span id="cb22-117"></span>
<span id="cb22-118"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paged_table</span>(qc_500_description)</span></code></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["qc_ints"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["bit_31"],"name":[2],"type":["int"],"align":["right"]},{"label":["bit_30"],"name":[3],"type":["int"],"align":["right"]},{"label":["band_7"],"name":[4],"type":["chr"],"align":["left"]},{"label":["band_6"],"name":[5],"type":["chr"],"align":["left"]},{"label":["band_5"],"name":[6],"type":["chr"],"align":["left"]},{"label":["band_4"],"name":[7],"type":["chr"],"align":["left"]},{"label":["band_3"],"name":[8],"type":["chr"],"align":["left"]},{"label":["band_2"],"name":[9],"type":["chr"],"align":["left"]},{"label":["band_1"],"name":[10],"type":["chr"],"align":["left"]},{"label":["modland"],"name":[11],"type":["chr"],"align":["left"]},{"label":["modland_qa"],"name":[12],"type":["chr"],"align":["left"]},{"label":["band1_qa"],"name":[13],"type":["chr"],"align":["left"]},{"label":["band2_qa"],"name":[14],"type":["chr"],"align":["left"]},{"label":["band3_qa"],"name":[15],"type":["chr"],"align":["left"]},{"label":["band4_qa"],"name":[16],"type":["chr"],"align":["left"]},{"label":["band5_qa"],"name":[17],"type":["chr"],"align":["left"]},{"label":["band6_qa"],"name":[18],"type":["chr"],"align":["left"]},{"label":["band7_qa"],"name":[19],"type":["chr"],"align":["left"]},{"label":["atmospheric_correction"],"name":[20],"type":["chr"],"align":["left"]},{"label":["adjacency_correction"],"name":[21],"type":["chr"],"align":["left"]}],"data":[{"1":"1073741824","2":"0","3":"1","4":"0000","5":"0000","6":"0000","7":"0000","8":"0000","9":"0000","10":"0000","11":"00","12":"ideal quality - all bands","13":"highest_quality","14":"highest_quality","15":"highest_quality","16":"highest_quality","17":"highest_quality","18":"highest_quality","19":"highest_quality","20":"yes","21":"no"},{"1":"1073968181","2":"0","3":"1","4":"0000","5":"0000","6":"0000","7":"1101","8":"1101","9":"0000","10":"1101","11":"01","12":"less than ideal quality - some or all bands","13":"correction out of bounds","14":"highest_quality","15":"correction out of bounds","16":"correction out of bounds","17":"highest_quality","18":"highest_quality","19":"highest_quality","20":"yes","21":"no"},{"1":"1073954817","2":"0","3":"1","4":"0000","5":"0000","6":"0000","7":"1101","8":"0000","9":"0000","10":"0000","11":"01","12":"less than ideal quality - some or all bands","13":"highest_quality","14":"highest_quality","15":"highest_quality","16":"correction out of bounds","17":"highest_quality","18":"highest_quality","19":"highest_quality","20":"yes","21":"no"},{"1":"1075838976","2":"0","3":"1","4":"0000","5":"0000","6":"1000","7":"0000","8":"0000","9":"0000","10":"0000","11":"00","12":"ideal quality - all bands","13":"highest_quality","14":"highest_quality","15":"highest_quality","16":"highest_quality","17":"dead detector, data interpolated in L1B","18":"highest_quality","19":"highest_quality","20":"yes","21":"no"},{"1":"1073968129","2":"0","3":"1","4":"0000","5":"0000","6":"0000","7":"1101","8":"1101","9":"0000","10":"0000","11":"01","12":"less than ideal quality - some or all bands","13":"highest_quality","14":"highest_quality","15":"correction out of bounds","16":"correction out of bounds","17":"highest_quality","18":"highest_quality","19":"highest_quality","20":"yes","21":"no"},{"1":"1073755137","2":"0","3":"1","4":"0000","5":"0000","6":"0000","7":"0000","8":"1101","9":"0000","10":"0000","11":"01","12":"less than ideal quality - some or all bands","13":"highest_quality","14":"highest_quality","15":"correction out of bounds","16":"highest_quality","17":"highest_quality","18":"highest_quality","19":"highest_quality","20":"yes","21":"no"},{"1":"1073755189","2":"0","3":"1","4":"0000","5":"0000","6":"0000","7":"0000","8":"1101","9":"0000","10":"1101","11":"01","12":"less than ideal quality - some or all bands","13":"correction out of bounds","14":"highest_quality","15":"correction out of bounds","16":"highest_quality","17":"highest_quality","18":"highest_quality","19":"highest_quality","20":"yes","21":"no"},{"1":"1075852341","2":"0","3":"1","4":"0000","5":"0000","6":"1000","7":"0000","8":"1101","9":"0000","10":"1101","11":"01","12":"less than ideal quality - some or all bands","13":"correction out of bounds","14":"highest_quality","15":"correction out of bounds","16":"highest_quality","17":"dead detector, data interpolated in L1B","18":"highest_quality","19":"highest_quality","20":"yes","21":"no"},{"1":"1076065281","2":"0","3":"1","4":"0000","5":"0000","6":"1000","7":"1101","8":"1101","9":"0000","10":"0000","11":"01","12":"less than ideal quality - some or all bands","13":"highest_quality","14":"highest_quality","15":"correction out of bounds","16":"correction out of bounds","17":"dead detector, data interpolated in L1B","18":"highest_quality","19":"highest_quality","20":"yes","21":"no"},{"1":"1946383413","2":"0","3":"1","4":"1101","5":"0000","6":"0000","7":"1101","8":"1101","9":"0000","10":"1101","11":"01","12":"less than ideal quality - some or all bands","13":"correction out of bounds","14":"highest_quality","15":"correction out of bounds","16":"correction out of bounds","17":"highest_quality","18":"highest_quality","19":"correction out of bounds","20":"yes","21":"no"},{"1":"1073969013","2":"0","3":"1","4":"0000","5":"0000","6":"0000","7":"1101","8":"1101","9":"1101","10":"1101","11":"01","12":"less than ideal quality - some or all bands","13":"correction out of bounds","14":"correction out of bounds","15":"correction out of bounds","16":"correction out of bounds","17":"highest_quality","18":"highest_quality","19":"highest_quality","20":"yes","21":"no"},{"1":"1073954869","2":"0","3":"1","4":"0000","5":"0000","6":"0000","7":"1101","8":"0000","9":"0000","10":"1101","11":"01","12":"less than ideal quality - some or all bands","13":"correction out of bounds","14":"highest_quality","15":"highest_quality","16":"correction out of bounds","17":"highest_quality","18":"highest_quality","19":"highest_quality","20":"yes","21":"no"},{"1":"1075852289","2":"0","3":"1","4":"0000","5":"0000","6":"1000","7":"0000","8":"1101","9":"0000","10":"0000","11":"01","12":"less than ideal quality - some or all bands","13":"highest_quality","14":"highest_quality","15":"correction out of bounds","16":"highest_quality","17":"dead detector, data interpolated in L1B","18":"highest_quality","19":"highest_quality","20":"yes","21":"no"},{"1":"1076065333","2":"0","3":"1","4":"0000","5":"0000","6":"1000","7":"1101","8":"1101","9":"0000","10":"1101","11":"01","12":"less than ideal quality - some or all bands","13":"correction out of bounds","14":"highest_quality","15":"correction out of bounds","16":"correction out of bounds","17":"dead detector, data interpolated in L1B","18":"highest_quality","19":"highest_quality","20":"yes","21":"no"},{"1":"1076051969","2":"0","3":"1","4":"0000","5":"0000","6":"1000","7":"1101","8":"0000","9":"0000","10":"0000","11":"01","12":"less than ideal quality - some or all bands","13":"highest_quality","14":"highest_quality","15":"highest_quality","16":"correction out of bounds","17":"dead detector, data interpolated in L1B","18":"highest_quality","19":"highest_quality","20":"yes","21":"no"},{"1":"1075576832","2":"0","3":"1","4":"0000","5":"0000","6":"0111","7":"0000","8":"0000","9":"0000","10":"0000","11":"00","12":"ideal quality - all bands","13":"highest_quality","14":"highest_quality","15":"highest_quality","16":"highest_quality","17":"noisy detector","18":"highest_quality","19":"highest_quality","20":"yes","21":"no"},{"1":"1075590145","2":"0","3":"1","4":"0000","5":"0000","6":"0111","7":"0000","8":"1101","9":"0000","10":"0000","11":"01","12":"less than ideal quality - some or all bands","13":"highest_quality","14":"highest_quality","15":"correction out of bounds","16":"highest_quality","17":"noisy detector","18":"highest_quality","19":"highest_quality","20":"yes","21":"no"},{"1":"1075803189","2":"0","3":"1","4":"0000","5":"0000","6":"0111","7":"1101","8":"1101","9":"0000","10":"1101","11":"01","12":"less than ideal quality - some or all bands","13":"correction out of bounds","14":"highest_quality","15":"correction out of bounds","16":"correction out of bounds","17":"noisy detector","18":"highest_quality","19":"highest_quality","20":"yes","21":"no"},{"1":"1131675649","2":"0","3":"1","4":"0000","5":"1101","6":"1101","7":"0000","8":"0000","9":"0000","10":"0000","11":"01","12":"less than ideal quality - some or all bands","13":"highest_quality","14":"highest_quality","15":"highest_quality","16":"highest_quality","17":"correction out of bounds","18":"correction out of bounds","19":"highest_quality","20":"yes","21":"no"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>That’s a big table, so to understand better, let’s check just the MODLAND QA bits categorization:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1">qc_500_description <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb23-2">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(modland, modland_qa, qc_ints) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb23-3">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paged_table</span>()</span></code></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["modland"],"name":[1],"type":["chr"],"align":["left"]},{"label":["modland_qa"],"name":[2],"type":["chr"],"align":["left"]},{"label":["qc_ints"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"00","2":"ideal quality - all bands","3":"1073741824"},{"1":"01","2":"less than ideal quality - some or all bands","3":"1073968181"},{"1":"01","2":"less than ideal quality - some or all bands","3":"1073954817"},{"1":"00","2":"ideal quality - all bands","3":"1075838976"},{"1":"01","2":"less than ideal quality - some or all bands","3":"1073968129"},{"1":"01","2":"less than ideal quality - some or all bands","3":"1073755137"},{"1":"01","2":"less than ideal quality - some or all bands","3":"1073755189"},{"1":"01","2":"less than ideal quality - some or all bands","3":"1075852341"},{"1":"01","2":"less than ideal quality - some or all bands","3":"1076065281"},{"1":"01","2":"less than ideal quality - some or all bands","3":"1946383413"},{"1":"01","2":"less than ideal quality - some or all bands","3":"1073969013"},{"1":"01","2":"less than ideal quality - some or all bands","3":"1073954869"},{"1":"01","2":"less than ideal quality - some or all bands","3":"1075852289"},{"1":"01","2":"less than ideal quality - some or all bands","3":"1076065333"},{"1":"01","2":"less than ideal quality - some or all bands","3":"1076051969"},{"1":"00","2":"ideal quality - all bands","3":"1075576832"},{"1":"01","2":"less than ideal quality - some or all bands","3":"1075590145"},{"1":"01","2":"less than ideal quality - some or all bands","3":"1075803189"},{"1":"01","2":"less than ideal quality - some or all bands","3":"1131675649"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p><img src="https://ronnyale.com/posts/2023-12-25-modis-bitstring/images/modland_qa.png" class="img-fluid"></p>
<p>From our dataset, I obtained two of the categories from the total 4. The <code>qc_ints</code> have 19 different observations in total, but those integers will give us information for the rest of the parameters.</p>
</section>
<section id="proof-of-concept-for-16-bits" class="level2">
<h2 class="anchored" data-anchor-id="proof-of-concept-for-16-bits">Proof of concept for 16 bits</h2>
<p>So far I have all the steps to perform the binary conversion for a variable that consist of 32 bits. However, other variables may use fewer bits, such as <code>state_1km</code> which uses <strong>16 bits</strong>. Here, I’m going to apply the same process described above to this variable, with some changes in the code indicating the quantity of bits to be used.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Check unique values and add one validation (from the video)</span></span>
<span id="cb24-2">qc_data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">qc_ints =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unique</span>(reflectance_500<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>state_1km),</span>
<span id="cb24-3">                                  <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1131675649</span>))</span>
<span id="cb24-4"></span>
<span id="cb24-5"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Create empty data frame. This case is 32 given that the variable</span></span>
<span id="cb24-6"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## `qc_500m` have 32 bits</span></span>
<span id="cb24-7"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)) {</span>
<span id="cb24-8">  qc_data[, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_"</span>, i)] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span></span>
<span id="cb24-9">}</span>
<span id="cb24-10"></span>
<span id="cb24-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Loop for obtaining bit string from unique values in the variable</span></span>
<span id="cb24-12">z <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb24-13"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> qc_data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>qc_ints) {</span>
<span id="cb24-14">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># print(i)</span></span>
<span id="cb24-15">  transformed <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.integer</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">intToBits</span>(i)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>])</span>
<span id="cb24-16">  qc_data[z, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">17</span>] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> transformed[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span>
<span id="cb24-17">  z <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> z <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb24-18">}</span>
<span id="cb24-19"></span>
<span id="cb24-20"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Create test according to value in video</span></span>
<span id="cb24-21">process_test <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> qc_data <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb24-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(qc_ints <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1131675649</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb24-23">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>qc_ints) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb24-24">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unite</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"new"</span>, bit_15<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>bit_0, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb24-25">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>() </span>
<span id="cb24-26"></span>
<span id="cb24-27"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stopifnot</span>(process_test <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0000000000000001"</span>)</span></code></pre></div>
</div>
<p>Looks like we were able to successfully pass our test. Let’s check how the dataset with the binary conversion looks like:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paged_table</span>(qc_data)</span></code></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["qc_ints"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["bit_15"],"name":[2],"type":["int"],"align":["right"]},{"label":["bit_14"],"name":[3],"type":["int"],"align":["right"]},{"label":["bit_13"],"name":[4],"type":["int"],"align":["right"]},{"label":["bit_12"],"name":[5],"type":["int"],"align":["right"]},{"label":["bit_11"],"name":[6],"type":["int"],"align":["right"]},{"label":["bit_10"],"name":[7],"type":["int"],"align":["right"]},{"label":["bit_9"],"name":[8],"type":["int"],"align":["right"]},{"label":["bit_8"],"name":[9],"type":["int"],"align":["right"]},{"label":["bit_7"],"name":[10],"type":["int"],"align":["right"]},{"label":["bit_6"],"name":[11],"type":["int"],"align":["right"]},{"label":["bit_5"],"name":[12],"type":["int"],"align":["right"]},{"label":["bit_4"],"name":[13],"type":["int"],"align":["right"]},{"label":["bit_3"],"name":[14],"type":["int"],"align":["right"]},{"label":["bit_2"],"name":[15],"type":["int"],"align":["right"]},{"label":["bit_1"],"name":[16],"type":["int"],"align":["right"]},{"label":["bit_0"],"name":[17],"type":["int"],"align":["right"]}],"data":[{"1":"1033","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"1"},{"1":"40969","2":"1","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"1"},{"1":"8392","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"1","11":"1","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0"},{"1":"1034","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"1","17":"0"},{"1":"40970","2":"1","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"1","17":"0"},{"1":"5384","2":"0","3":"0","4":"0","5":"1","6":"0","7":"1","8":"0","9":"1","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0"},{"1":"1289","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"0","9":"1","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"1"},{"1":"1801","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"1","9":"1","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"1"},{"1":"45068","2":"1","3":"0","4":"1","5":"1","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"1","16":"0","17":"0"},{"1":"1545","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"1","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"1"},{"1":"8397","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"1","11":"1","12":"0","13":"0","14":"1","15":"1","16":"0","17":"1"},{"1":"8398","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"1","11":"1","12":"0","13":"0","14":"1","15":"1","16":"1","17":"0"},{"1":"1032","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0"},{"1":"8396","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"1","11":"1","12":"0","13":"0","14":"1","15":"1","16":"0","17":"0"},{"1":"8393","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"1","11":"1","12":"0","13":"0","14":"1","15":"0","16":"0","17":"1"},{"1":"5128","2":"0","3":"0","4":"0","5":"1","6":"0","7":"1","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0"},{"1":"40973","2":"1","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"1","16":"0","17":"1"},{"1":"40974","2":"1","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"1","16":"1","17":"0"},{"1":"45064","2":"1","3":"0","4":"1","5":"1","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0"},{"1":"8394","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"1","11":"1","12":"0","13":"0","14":"1","15":"0","16":"1","17":"0"},{"1":"32781","2":"1","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"1","16":"0","17":"1"},{"1":"206","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"1","11":"1","12":"0","13":"0","14":"1","15":"1","16":"1","17":"0"},{"1":"36872","2":"1","3":"0","4":"0","5":"1","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0"},{"1":"32778","2":"1","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"1","17":"0"},{"1":"32777","2":"1","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"1"},{"1":"5640","2":"0","3":"0","4":"0","5":"1","6":"0","7":"1","8":"1","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0"},{"1":"36876","2":"1","3":"0","4":"0","5":"1","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"1","16":"0","17":"0"},{"1":"32776","2":"1","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0"},{"1":"45066","2":"1","3":"0","4":"1","5":"1","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"1","17":"0"},{"1":"8334","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"1","11":"0","12":"0","13":"0","14":"1","15":"1","16":"1","17":"0"},{"1":"200","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"1","11":"1","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0"},{"1":"138","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"1","11":"0","12":"0","13":"0","14":"1","15":"0","16":"1","17":"0"},{"1":"136","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"1","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0"},{"1":"8","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0"},{"1":"72","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"1","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0"},{"1":"8264","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"1","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0"},{"1":"1544","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"1","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0"},{"1":"8332","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"1","11":"0","12":"0","13":"0","14":"1","15":"1","16":"0","17":"0"},{"1":"1802","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"1","9":"1","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"1","17":"0"},{"1":"1288","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"0","9":"1","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0"},{"1":"8328","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"1","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0"},{"1":"1546","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"1","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"1","17":"0"},{"1":"8268","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"1","12":"0","13":"0","14":"1","15":"1","16":"0","17":"0"},{"1":"8330","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"1","11":"0","12":"0","13":"0","14":"1","15":"0","16":"1","17":"0"},{"1":"8205","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"1","16":"0","17":"1"},{"1":"76","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"1","12":"0","13":"0","14":"1","15":"1","16":"0","17":"0"},{"1":"204","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"1","11":"1","12":"0","13":"0","14":"1","15":"1","16":"0","17":"0"},{"1":"141","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"1","11":"0","12":"0","13":"0","14":"1","15":"1","16":"0","17":"1"},{"1":"140","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"1","11":"0","12":"0","13":"0","14":"1","15":"1","16":"0","17":"0"},{"1":"8204","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"1","16":"0","17":"0"},{"1":"40972","2":"1","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"1","16":"0","17":"0"},{"1":"8266","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"1","12":"0","13":"0","14":"1","15":"0","16":"1","17":"0"},{"1":"137","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"1","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"1"},{"1":"1290","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"0","9":"1","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"1","17":"0"},{"1":"74","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"1","12":"0","13":"0","14":"1","15":"0","16":"1","17":"0"},{"1":"1800","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"1","9":"1","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0"},{"1":"32780","2":"1","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"1","16":"0","17":"0"},{"1":"5896","2":"0","3":"0","4":"0","5":"1","6":"0","7":"1","8":"1","9":"1","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0"},{"1":"40968","2":"1","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0"},{"1":"205","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"1","11":"1","12":"0","13":"0","14":"1","15":"1","16":"0","17":"1"},{"1":"202","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"1","11":"1","12":"0","13":"0","14":"1","15":"0","16":"1","17":"0"},{"1":"201","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"1","11":"1","12":"0","13":"0","14":"1","15":"0","16":"0","17":"1"},{"1":"8329","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"1","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"1"},{"1":"8270","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"1","12":"0","13":"0","14":"1","15":"1","16":"1","17":"0"},{"1":"5385","2":"0","3":"0","4":"0","5":"1","6":"0","7":"1","8":"0","9":"1","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"1"},{"1":"5898","2":"0","3":"0","4":"0","5":"1","6":"0","7":"1","8":"1","9":"1","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"1","17":"0"},{"1":"5642","2":"0","3":"0","4":"0","5":"1","6":"0","7":"1","8":"1","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"1","17":"0"},{"1":"1131675649","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
</section>
<section id="creating-a-function-for-the-bit-string-conversion" class="level1">
<h1>Creating a Function for the Bit String Conversion</h1>
<p>At this point I have code that repeats the same steps for each variable. Instead of copying and pasting all the code repeatedly just to change the number of bits, we can refactor it into a function.</p>
<p>The function will take the variable name and the number of bits required for the binary conversion as arguments. Since we’ve already validated the steps using a known integer, we can incorporate this test within the function. The function will return a data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Transform this to a function</span></span>
<span id="cb26-2">obtain_bit_qc_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(variable, bits) {</span>
<span id="cb26-3">  </span>
<span id="cb26-4">  <span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Check unique values and add one validation (from the video)</span></span>
<span id="cb26-5">  qc_data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">qc_ints =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unique</span>(reflectance_500[[variable]]),</span>
<span id="cb26-6">                                    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1131675649</span>))</span>
<span id="cb26-7">  </span>
<span id="cb26-8">  <span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Create empty data frame. </span></span>
<span id="cb26-9">  <span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Take into account the number of bits needed.</span></span>
<span id="cb26-10">  total_bits <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> bits <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb26-11">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(total_bits<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)) {</span>
<span id="cb26-12">    qc_data[, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_"</span>, i)] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span></span>
<span id="cb26-13">  }</span>
<span id="cb26-14">  </span>
<span id="cb26-15">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Loop for obtaining bit string from unique values in the variable</span></span>
<span id="cb26-16">  bit_col <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> bits <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb26-17">  z <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb26-18">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> qc_data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>qc_ints) {</span>
<span id="cb26-19">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># print(i)</span></span>
<span id="cb26-20">    transformed <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.integer</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">intToBits</span>(i)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>bits])</span>
<span id="cb26-21">    qc_data[z, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>bit_col] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> transformed[bits<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span>
<span id="cb26-22">    z <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> z <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb26-23">  }</span>
<span id="cb26-24"> </span>
<span id="cb26-25">  <span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Create test according to value in video</span></span>
<span id="cb26-26">  final_bit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_"</span>, total_bits)</span>
<span id="cb26-27">  </span>
<span id="cb26-28">  process_test <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> qc_data <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb26-29">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(qc_ints <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1131675649</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb26-30">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>qc_ints) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb26-31">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unite</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"new"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">everything</span>(), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb26-32">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>() </span>
<span id="cb26-33">  </span>
<span id="cb26-34">  test_object <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> stringr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_sub</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"01000011011101000000000000000001"</span>,</span>
<span id="cb26-35">                                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">start =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>bits, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">end =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb26-36"></span>
<span id="cb26-37">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stopifnot</span>(process_test <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> test_object) </span>
<span id="cb26-38">  </span>
<span id="cb26-39">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(qc_data)</span>
<span id="cb26-40">}</span></code></pre></div>
</div>
<section id="testing-the-function-with-state_1km" class="level2">
<h2 class="anchored" data-anchor-id="testing-the-function-with-state_1km">Testing the function with state_1km</h2>
<p>Let’s use the function on the <code>state_1km</code> variable to check if it works. Then, let’s compare the result with the dataset we created step by step to validate if we can obtain the same result.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Obtain the bit string using the function</span></span>
<span id="cb27-2">qc_data_function <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">obtain_bit_qc_df</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variable =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"state_1km"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bits =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>)</span>
<span id="cb27-3"></span>
<span id="cb27-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Compare last qc_data from state_1km and new qc_data created with function</span></span>
<span id="cb27-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stopifnot</span>(qc_data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>bit_14 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> qc_data_function<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>bit_14)</span>
<span id="cb27-6"></span>
<span id="cb27-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Check dimensions</span></span>
<span id="cb27-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stopifnot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dim</span>(qc_data) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dim</span>(qc_data_function))</span></code></pre></div>
</div>
<p>Seems that it works! With the function we obtained the same dimensions of the dataset than before. Let’s now create the categories for each of the bit strings</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create the categories according to documentation</span></span>
<span id="cb28-2">state_1km__description <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> qc_data_function <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb28-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unite</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cloud_state"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_1"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_0"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb28-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unite</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"land_water_flag"</span>,</span>
<span id="cb28-5">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_5"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_4"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_3"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb28-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unite</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"aerosol_quantity"</span>,</span>
<span id="cb28-7">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_7"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_6"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb28-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unite</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cirrus_detected"</span>,</span>
<span id="cb28-9">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_9"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit_8"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb28-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cloud_state_qa =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb28-11">    cloud_state <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"00"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"clear"</span>,</span>
<span id="cb28-12">    cloud_state <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"01"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cloudy"</span>,</span>
<span id="cb28-13">    cloud_state <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"10"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mixed"</span>,</span>
<span id="cb28-14">    cloud_state <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"11"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"not set, assumed clear"</span>,</span>
<span id="cb28-15">    <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"No info, please validate bit conversion"</span></span>
<span id="cb28-16">  )) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb28-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cloud_shadow_qa =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(bit_2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yes"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"no"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb28-18">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">land_water_qa =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb28-19">    land_water_flag <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"000"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"shallow ocean"</span>,</span>
<span id="cb28-20">    land_water_flag <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"001"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"land"</span>,</span>
<span id="cb28-21">    land_water_flag <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"010"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ocean coastlines and lake shorelines"</span>,</span>
<span id="cb28-22">    land_water_flag <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"011"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"shallow inland water"</span>,</span>
<span id="cb28-23">    land_water_flag <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"100"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ephemeral water"</span>,</span>
<span id="cb28-24">    land_water_flag <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"101"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"deep inland water"</span>,</span>
<span id="cb28-25">    land_water_flag <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"110"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"continental/moderate ocean"</span>,</span>
<span id="cb28-26">    land_water_flag <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"111"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"deep ocean"</span>,</span>
<span id="cb28-27">    <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"No info, please validate bit conversion"</span></span>
<span id="cb28-28">  )) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb28-29">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">aerosol_quantity_qa =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb28-30">    aerosol_quantity <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"00"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"climatology"</span>,</span>
<span id="cb28-31">    aerosol_quantity <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"01"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"low"</span>,</span>
<span id="cb28-32">    aerosol_quantity <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"10"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"average"</span>,</span>
<span id="cb28-33">    aerosol_quantity <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"11"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"high"</span>,</span>
<span id="cb28-34">    <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"No info, please validate bit conversion"</span></span>
<span id="cb28-35">  )) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb28-36">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cirrus_detected_qa =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb28-37">    cirrus_detected <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"00"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>,</span>
<span id="cb28-38">    cirrus_detected <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"01"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"small"</span>,</span>
<span id="cb28-39">    cirrus_detected <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"10"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"average"</span>,</span>
<span id="cb28-40">    cirrus_detected <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"11"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"high"</span>,</span>
<span id="cb28-41">    <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"No info, please validate bit conversion"</span></span>
<span id="cb28-42">  )) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb28-43">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cloud_flag_qa =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(bit_10 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cloud"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"no cloud"</span>),</span>
<span id="cb28-44">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fire_flag_qa =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(bit_11 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"fire"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"no fire"</span>),</span>
<span id="cb28-45">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">snow_ice_flag_qa =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(bit_12 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yes"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"no"</span>),</span>
<span id="cb28-46">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pixel_adjacent_cloud_qa =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(bit_13 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yes"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"no"</span>),</span>
<span id="cb28-47">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">salt_pan_qa =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(bit_14 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yes"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"no"</span>),</span>
<span id="cb28-48">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">snow_mask_qa =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(bit_15 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yes"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"no"</span>))</span></code></pre></div>
</div>
<p>Now, let’s check the resulting dataset:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1">state_1km__description <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb29-2">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">starts_with</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb29-3">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paged_table</span>()</span></code></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["qc_ints"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["cirrus_detected"],"name":[2],"type":["chr"],"align":["left"]},{"label":["aerosol_quantity"],"name":[3],"type":["chr"],"align":["left"]},{"label":["land_water_flag"],"name":[4],"type":["chr"],"align":["left"]},{"label":["cloud_state"],"name":[5],"type":["chr"],"align":["left"]},{"label":["cloud_state_qa"],"name":[6],"type":["chr"],"align":["left"]},{"label":["cloud_shadow_qa"],"name":[7],"type":["chr"],"align":["left"]},{"label":["land_water_qa"],"name":[8],"type":["chr"],"align":["left"]},{"label":["aerosol_quantity_qa"],"name":[9],"type":["chr"],"align":["left"]},{"label":["cirrus_detected_qa"],"name":[10],"type":["chr"],"align":["left"]},{"label":["cloud_flag_qa"],"name":[11],"type":["chr"],"align":["left"]},{"label":["fire_flag_qa"],"name":[12],"type":["chr"],"align":["left"]},{"label":["snow_ice_flag_qa"],"name":[13],"type":["chr"],"align":["left"]},{"label":["pixel_adjacent_cloud_qa"],"name":[14],"type":["chr"],"align":["left"]},{"label":["salt_pan_qa"],"name":[15],"type":["chr"],"align":["left"]},{"label":["snow_mask_qa"],"name":[16],"type":["chr"],"align":["left"]}],"data":[{"1":"1033","2":"00","3":"00","4":"001","5":"01","6":"cloudy","7":"no","8":"land","9":"climatology","10":"none","11":"cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"40969","2":"00","3":"00","4":"001","5":"01","6":"cloudy","7":"no","8":"land","9":"climatology","10":"none","11":"no cloud","12":"no fire","13":"no","14":"yes","15":"no","16":"yes"},{"1":"8392","2":"00","3":"11","4":"001","5":"00","6":"clear","7":"no","8":"land","9":"high","10":"none","11":"no cloud","12":"no fire","13":"no","14":"yes","15":"no","16":"no"},{"1":"1034","2":"00","3":"00","4":"001","5":"10","6":"mixed","7":"no","8":"land","9":"climatology","10":"none","11":"cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"40970","2":"00","3":"00","4":"001","5":"10","6":"mixed","7":"no","8":"land","9":"climatology","10":"none","11":"no cloud","12":"no fire","13":"no","14":"yes","15":"no","16":"yes"},{"1":"5384","2":"01","3":"00","4":"001","5":"00","6":"clear","7":"no","8":"land","9":"climatology","10":"small","11":"cloud","12":"no fire","13":"yes","14":"no","15":"no","16":"no"},{"1":"1289","2":"01","3":"00","4":"001","5":"01","6":"cloudy","7":"no","8":"land","9":"climatology","10":"small","11":"cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"1801","2":"11","3":"00","4":"001","5":"01","6":"cloudy","7":"no","8":"land","9":"climatology","10":"high","11":"cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"45068","2":"00","3":"00","4":"001","5":"00","6":"clear","7":"yes","8":"land","9":"climatology","10":"none","11":"no cloud","12":"no fire","13":"yes","14":"yes","15":"no","16":"yes"},{"1":"1545","2":"10","3":"00","4":"001","5":"01","6":"cloudy","7":"no","8":"land","9":"climatology","10":"average","11":"cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"8397","2":"00","3":"11","4":"001","5":"01","6":"cloudy","7":"yes","8":"land","9":"high","10":"none","11":"no cloud","12":"no fire","13":"no","14":"yes","15":"no","16":"no"},{"1":"8398","2":"00","3":"11","4":"001","5":"10","6":"mixed","7":"yes","8":"land","9":"high","10":"none","11":"no cloud","12":"no fire","13":"no","14":"yes","15":"no","16":"no"},{"1":"1032","2":"00","3":"00","4":"001","5":"00","6":"clear","7":"no","8":"land","9":"climatology","10":"none","11":"cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"8396","2":"00","3":"11","4":"001","5":"00","6":"clear","7":"yes","8":"land","9":"high","10":"none","11":"no cloud","12":"no fire","13":"no","14":"yes","15":"no","16":"no"},{"1":"8393","2":"00","3":"11","4":"001","5":"01","6":"cloudy","7":"no","8":"land","9":"high","10":"none","11":"no cloud","12":"no fire","13":"no","14":"yes","15":"no","16":"no"},{"1":"5128","2":"00","3":"00","4":"001","5":"00","6":"clear","7":"no","8":"land","9":"climatology","10":"none","11":"cloud","12":"no fire","13":"yes","14":"no","15":"no","16":"no"},{"1":"40973","2":"00","3":"00","4":"001","5":"01","6":"cloudy","7":"yes","8":"land","9":"climatology","10":"none","11":"no cloud","12":"no fire","13":"no","14":"yes","15":"no","16":"yes"},{"1":"40974","2":"00","3":"00","4":"001","5":"10","6":"mixed","7":"yes","8":"land","9":"climatology","10":"none","11":"no cloud","12":"no fire","13":"no","14":"yes","15":"no","16":"yes"},{"1":"45064","2":"00","3":"00","4":"001","5":"00","6":"clear","7":"no","8":"land","9":"climatology","10":"none","11":"no cloud","12":"no fire","13":"yes","14":"yes","15":"no","16":"yes"},{"1":"8394","2":"00","3":"11","4":"001","5":"10","6":"mixed","7":"no","8":"land","9":"high","10":"none","11":"no cloud","12":"no fire","13":"no","14":"yes","15":"no","16":"no"},{"1":"32781","2":"00","3":"00","4":"001","5":"01","6":"cloudy","7":"yes","8":"land","9":"climatology","10":"none","11":"no cloud","12":"no fire","13":"no","14":"no","15":"no","16":"yes"},{"1":"206","2":"00","3":"11","4":"001","5":"10","6":"mixed","7":"yes","8":"land","9":"high","10":"none","11":"no cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"36872","2":"00","3":"00","4":"001","5":"00","6":"clear","7":"no","8":"land","9":"climatology","10":"none","11":"no cloud","12":"no fire","13":"yes","14":"no","15":"no","16":"yes"},{"1":"32778","2":"00","3":"00","4":"001","5":"10","6":"mixed","7":"no","8":"land","9":"climatology","10":"none","11":"no cloud","12":"no fire","13":"no","14":"no","15":"no","16":"yes"},{"1":"32777","2":"00","3":"00","4":"001","5":"01","6":"cloudy","7":"no","8":"land","9":"climatology","10":"none","11":"no cloud","12":"no fire","13":"no","14":"no","15":"no","16":"yes"},{"1":"5640","2":"10","3":"00","4":"001","5":"00","6":"clear","7":"no","8":"land","9":"climatology","10":"average","11":"cloud","12":"no fire","13":"yes","14":"no","15":"no","16":"no"},{"1":"36876","2":"00","3":"00","4":"001","5":"00","6":"clear","7":"yes","8":"land","9":"climatology","10":"none","11":"no cloud","12":"no fire","13":"yes","14":"no","15":"no","16":"yes"},{"1":"32776","2":"00","3":"00","4":"001","5":"00","6":"clear","7":"no","8":"land","9":"climatology","10":"none","11":"no cloud","12":"no fire","13":"no","14":"no","15":"no","16":"yes"},{"1":"45066","2":"00","3":"00","4":"001","5":"10","6":"mixed","7":"no","8":"land","9":"climatology","10":"none","11":"no cloud","12":"no fire","13":"yes","14":"yes","15":"no","16":"yes"},{"1":"8334","2":"00","3":"10","4":"001","5":"10","6":"mixed","7":"yes","8":"land","9":"average","10":"none","11":"no cloud","12":"no fire","13":"no","14":"yes","15":"no","16":"no"},{"1":"200","2":"00","3":"11","4":"001","5":"00","6":"clear","7":"no","8":"land","9":"high","10":"none","11":"no cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"138","2":"00","3":"10","4":"001","5":"10","6":"mixed","7":"no","8":"land","9":"average","10":"none","11":"no cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"136","2":"00","3":"10","4":"001","5":"00","6":"clear","7":"no","8":"land","9":"average","10":"none","11":"no cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"8","2":"00","3":"00","4":"001","5":"00","6":"clear","7":"no","8":"land","9":"climatology","10":"none","11":"no cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"72","2":"00","3":"01","4":"001","5":"00","6":"clear","7":"no","8":"land","9":"low","10":"none","11":"no cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"8264","2":"00","3":"01","4":"001","5":"00","6":"clear","7":"no","8":"land","9":"low","10":"none","11":"no cloud","12":"no fire","13":"no","14":"yes","15":"no","16":"no"},{"1":"1544","2":"10","3":"00","4":"001","5":"00","6":"clear","7":"no","8":"land","9":"climatology","10":"average","11":"cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"8332","2":"00","3":"10","4":"001","5":"00","6":"clear","7":"yes","8":"land","9":"average","10":"none","11":"no cloud","12":"no fire","13":"no","14":"yes","15":"no","16":"no"},{"1":"1802","2":"11","3":"00","4":"001","5":"10","6":"mixed","7":"no","8":"land","9":"climatology","10":"high","11":"cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"1288","2":"01","3":"00","4":"001","5":"00","6":"clear","7":"no","8":"land","9":"climatology","10":"small","11":"cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"8328","2":"00","3":"10","4":"001","5":"00","6":"clear","7":"no","8":"land","9":"average","10":"none","11":"no cloud","12":"no fire","13":"no","14":"yes","15":"no","16":"no"},{"1":"1546","2":"10","3":"00","4":"001","5":"10","6":"mixed","7":"no","8":"land","9":"climatology","10":"average","11":"cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"8268","2":"00","3":"01","4":"001","5":"00","6":"clear","7":"yes","8":"land","9":"low","10":"none","11":"no cloud","12":"no fire","13":"no","14":"yes","15":"no","16":"no"},{"1":"8330","2":"00","3":"10","4":"001","5":"10","6":"mixed","7":"no","8":"land","9":"average","10":"none","11":"no cloud","12":"no fire","13":"no","14":"yes","15":"no","16":"no"},{"1":"8205","2":"00","3":"00","4":"001","5":"01","6":"cloudy","7":"yes","8":"land","9":"climatology","10":"none","11":"no cloud","12":"no fire","13":"no","14":"yes","15":"no","16":"no"},{"1":"76","2":"00","3":"01","4":"001","5":"00","6":"clear","7":"yes","8":"land","9":"low","10":"none","11":"no cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"204","2":"00","3":"11","4":"001","5":"00","6":"clear","7":"yes","8":"land","9":"high","10":"none","11":"no cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"141","2":"00","3":"10","4":"001","5":"01","6":"cloudy","7":"yes","8":"land","9":"average","10":"none","11":"no cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"140","2":"00","3":"10","4":"001","5":"00","6":"clear","7":"yes","8":"land","9":"average","10":"none","11":"no cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"8204","2":"00","3":"00","4":"001","5":"00","6":"clear","7":"yes","8":"land","9":"climatology","10":"none","11":"no cloud","12":"no fire","13":"no","14":"yes","15":"no","16":"no"},{"1":"40972","2":"00","3":"00","4":"001","5":"00","6":"clear","7":"yes","8":"land","9":"climatology","10":"none","11":"no cloud","12":"no fire","13":"no","14":"yes","15":"no","16":"yes"},{"1":"8266","2":"00","3":"01","4":"001","5":"10","6":"mixed","7":"no","8":"land","9":"low","10":"none","11":"no cloud","12":"no fire","13":"no","14":"yes","15":"no","16":"no"},{"1":"137","2":"00","3":"10","4":"001","5":"01","6":"cloudy","7":"no","8":"land","9":"average","10":"none","11":"no cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"1290","2":"01","3":"00","4":"001","5":"10","6":"mixed","7":"no","8":"land","9":"climatology","10":"small","11":"cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"74","2":"00","3":"01","4":"001","5":"10","6":"mixed","7":"no","8":"land","9":"low","10":"none","11":"no cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"1800","2":"11","3":"00","4":"001","5":"00","6":"clear","7":"no","8":"land","9":"climatology","10":"high","11":"cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"32780","2":"00","3":"00","4":"001","5":"00","6":"clear","7":"yes","8":"land","9":"climatology","10":"none","11":"no cloud","12":"no fire","13":"no","14":"no","15":"no","16":"yes"},{"1":"5896","2":"11","3":"00","4":"001","5":"00","6":"clear","7":"no","8":"land","9":"climatology","10":"high","11":"cloud","12":"no fire","13":"yes","14":"no","15":"no","16":"no"},{"1":"40968","2":"00","3":"00","4":"001","5":"00","6":"clear","7":"no","8":"land","9":"climatology","10":"none","11":"no cloud","12":"no fire","13":"no","14":"yes","15":"no","16":"yes"},{"1":"205","2":"00","3":"11","4":"001","5":"01","6":"cloudy","7":"yes","8":"land","9":"high","10":"none","11":"no cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"202","2":"00","3":"11","4":"001","5":"10","6":"mixed","7":"no","8":"land","9":"high","10":"none","11":"no cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"201","2":"00","3":"11","4":"001","5":"01","6":"cloudy","7":"no","8":"land","9":"high","10":"none","11":"no cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"},{"1":"8329","2":"00","3":"10","4":"001","5":"01","6":"cloudy","7":"no","8":"land","9":"average","10":"none","11":"no cloud","12":"no fire","13":"no","14":"yes","15":"no","16":"no"},{"1":"8270","2":"00","3":"01","4":"001","5":"10","6":"mixed","7":"yes","8":"land","9":"low","10":"none","11":"no cloud","12":"no fire","13":"no","14":"yes","15":"no","16":"no"},{"1":"5385","2":"01","3":"00","4":"001","5":"01","6":"cloudy","7":"no","8":"land","9":"climatology","10":"small","11":"cloud","12":"no fire","13":"yes","14":"no","15":"no","16":"no"},{"1":"5898","2":"11","3":"00","4":"001","5":"10","6":"mixed","7":"no","8":"land","9":"climatology","10":"high","11":"cloud","12":"no fire","13":"yes","14":"no","15":"no","16":"no"},{"1":"5642","2":"10","3":"00","4":"001","5":"10","6":"mixed","7":"no","8":"land","9":"climatology","10":"average","11":"cloud","12":"no fire","13":"yes","14":"no","15":"no","16":"no"},{"1":"1131675649","2":"00","3":"00","4":"000","5":"01","6":"cloudy","7":"no","8":"shallow ocean","9":"climatology","10":"none","11":"no cloud","12":"no fire","13":"no","14":"no","15":"no","16":"no"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="testing-the-function-with-q_scan" class="level2">
<h2 class="anchored" data-anchor-id="testing-the-function-with-q_scan">Testing the function with <code>q_scan</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb30" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Obtain the bit string</span></span>
<span id="cb30-2">qc_data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">obtain_bit_qc_df</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variable =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"q_scan"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bits =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>)</span>
<span id="cb30-3"></span>
<span id="cb30-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create the categories according to documentation</span></span>
<span id="cb30-5">q_scan_description <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> qc_data <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb30-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">scan_quadrant_1 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(bit_0 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yes"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"no"</span>),</span>
<span id="cb30-7">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">scan_quadrant_2 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(bit_0 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yes"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"no"</span>),</span>
<span id="cb30-8">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">scan_quadrant_3 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(bit_0 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yes"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"no"</span>),</span>
<span id="cb30-9">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">scan_quadrant_4 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(bit_0 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yes"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"no"</span>),</span>
<span id="cb30-10">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">missing_obs_1 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(bit_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"same"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"different"</span>),</span>
<span id="cb30-11">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">missing_obs_2 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(bit_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"same"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"different"</span>),</span>
<span id="cb30-12">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">missing_obs_3 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(bit_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"same"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"different"</span>),</span>
<span id="cb30-13">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">missing_obs_4 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(bit_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"same"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"different"</span>))</span>
<span id="cb30-14"></span>
<span id="cb30-15">q_scan_description <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb30-16">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paged_table</span>()</span></code></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["qc_ints"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["bit_7"],"name":[2],"type":["int"],"align":["right"]},{"label":["bit_6"],"name":[3],"type":["int"],"align":["right"]},{"label":["bit_5"],"name":[4],"type":["int"],"align":["right"]},{"label":["bit_4"],"name":[5],"type":["int"],"align":["right"]},{"label":["bit_3"],"name":[6],"type":["int"],"align":["right"]},{"label":["bit_2"],"name":[7],"type":["int"],"align":["right"]},{"label":["bit_1"],"name":[8],"type":["int"],"align":["right"]},{"label":["bit_0"],"name":[9],"type":["int"],"align":["right"]},{"label":["scan_quadrant_1"],"name":[10],"type":["chr"],"align":["left"]},{"label":["scan_quadrant_2"],"name":[11],"type":["chr"],"align":["left"]},{"label":["scan_quadrant_3"],"name":[12],"type":["chr"],"align":["left"]},{"label":["scan_quadrant_4"],"name":[13],"type":["chr"],"align":["left"]},{"label":["missing_obs_1"],"name":[14],"type":["chr"],"align":["left"]},{"label":["missing_obs_2"],"name":[15],"type":["chr"],"align":["left"]},{"label":["missing_obs_3"],"name":[16],"type":["chr"],"align":["left"]},{"label":["missing_obs_4"],"name":[17],"type":["chr"],"align":["left"]}],"data":[{"1":"14","2":"0","3":"0","4":"0","5":"0","6":"1","7":"1","8":"1","9":"0","10":"no","11":"no","12":"no","13":"no","14":"same","15":"same","16":"same","17":"same"},{"1":"8","2":"0","3":"0","4":"0","5":"0","6":"1","7":"0","8":"0","9":"0","10":"no","11":"no","12":"no","13":"no","14":"different","15":"different","16":"different","17":"different"},{"1":"9","2":"0","3":"0","4":"0","5":"0","6":"1","7":"0","8":"0","9":"1","10":"yes","11":"yes","12":"yes","13":"yes","14":"different","15":"different","16":"different","17":"different"},{"1":"2","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"1","9":"0","10":"no","11":"no","12":"no","13":"no","14":"same","15":"same","16":"same","17":"same"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"no","11":"no","12":"no","13":"no","14":"different","15":"different","16":"different","17":"different"},{"1":"6","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"1","9":"0","10":"no","11":"no","12":"no","13":"no","14":"same","15":"same","16":"same","17":"same"},{"1":"15","2":"0","3":"0","4":"0","5":"0","6":"1","7":"1","8":"1","9":"1","10":"yes","11":"yes","12":"yes","13":"yes","14":"same","15":"same","16":"same","17":"same"},{"1":"3","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"1","9":"1","10":"yes","11":"yes","12":"yes","13":"yes","14":"same","15":"same","16":"same","17":"same"},{"1":"13","2":"0","3":"0","4":"0","5":"0","6":"1","7":"1","8":"0","9":"1","10":"yes","11":"yes","12":"yes","13":"yes","14":"different","15":"different","16":"different","17":"different"},{"1":"11","2":"0","3":"0","4":"0","5":"0","6":"1","7":"0","8":"1","9":"1","10":"yes","11":"yes","12":"yes","13":"yes","14":"same","15":"same","16":"same","17":"same"},{"1":"12","2":"0","3":"0","4":"0","5":"0","6":"1","7":"1","8":"0","9":"0","10":"no","11":"no","12":"no","13":"no","14":"different","15":"different","16":"different","17":"different"},{"1":"1","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"1","10":"yes","11":"yes","12":"yes","13":"yes","14":"different","15":"different","16":"different","17":"different"},{"1":"7","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"1","9":"1","10":"yes","11":"yes","12":"yes","13":"yes","14":"same","15":"same","16":"same","17":"same"},{"1":"10","2":"0","3":"0","4":"0","5":"0","6":"1","7":"0","8":"1","9":"0","10":"no","11":"no","12":"no","13":"no","14":"same","15":"same","16":"same","17":"same"},{"1":"5","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"0","9":"1","10":"yes","11":"yes","12":"yes","13":"yes","14":"different","15":"different","16":"different","17":"different"},{"1":"4","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"0","9":"0","10":"no","11":"no","12":"no","13":"no","14":"different","15":"different","16":"different","17":"different"},{"1":"1131675649","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"1","10":"yes","11":"yes","12":"yes","13":"yes","14":"different","15":"different","16":"different","17":"different"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
</section>
<section id="conclusions-on-the-bit-conversion" class="level1 page-columns page-full">
<h1>Conclusions on the bit conversion</h1>
<ul>
<li>The function I developed successfully performs the bit mask conversion.</li>
<li>This function can be exported to a new file and documented formally for use in the next steps of the data analysis*.</li>
<li>After applying the function, it is necessary to incorporate the corresponding categories based on the official MODIS documentation.</li>
<li>The new data frames, containing the bit strings and categories for each unique value, will be used to filter the original observations from the datasets according to their quality.</li>
</ul>

<div class="no-row-height column-margin column-container"><div class="">
<p>*The documented function is available in one of the <a href="https://github.com/ronnyhdez/thesis_msc/blob/main/R/create_bit_string.R">GitHub repository thesis files</a> where it was used to perform the analysis for my <a href="https://doi.org/10.7939/r3-f8dw-0t12">thesis</a>.</p>
</div></div></section>
<section id="quality-filtering" class="level1">
<h1>Quality filtering</h1>
<p>With the function validated and the categories for each bit-masked variable obtained from the MODIS documentation, I can now proceed to filter out pixels with low quality.</p>
<section id="filter-by-state_1km" class="level2">
<h2 class="anchored" data-anchor-id="filter-by-state_1km">Filter by <code>state_1km</code></h2>
<p>Let’s start with <code>state_1km</code>. Here I will get the categories we want that indicate the best possible observations in the dataset. One we have those observations, we will obtain the <code>qc_ints</code> values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># quality values from state_1km</span></span>
<span id="cb31-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># bit 6-7 and bit 13 can be anything as regarded by richard</span></span>
<span id="cb31-3">state_1km_highest_quality <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> state_1km__description <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb31-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(cloud_state_qa <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"clear"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb31-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(cloud_shadow_qa <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"no"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb31-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(land_water_qa <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"land"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb31-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(cirrus_detected_qa <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb31-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(bit_10 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb31-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(fire_flag_qa <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"no fire"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb31-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(snow_ice_flag_qa <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"no"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb31-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(bit_14 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb31-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(bit_15 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb31-13">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Select the qc_ints values as a vector</span></span>
<span id="cb31-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(qc_ints) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb31-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>()</span>
<span id="cb31-16"></span>
<span id="cb31-17">state_1km_highest_quality</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8392  200  136    8   72 8264 8328</code></pre>
</div>
</div>
</section>
<section id="filter-by-qc_500m" class="level2">
<h2 class="anchored" data-anchor-id="filter-by-qc_500m">Filter by <code>qc_500m</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># quality values from qc_500</span></span>
<span id="cb33-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># All should be 0 for all of the bits, except for </span></span>
<span id="cb33-3">qc_500_highest_quality <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> qc_500_description <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb33-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(modland_qa <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ideal quality - all bands"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb33-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(band1_qa <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"highest_quality"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb33-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(band2_qa <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"highest_quality"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb33-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(band3_qa <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"highest_quality"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb33-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(band4_qa <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"highest_quality"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb33-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(band5_qa <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"highest_quality"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb33-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(band6_qa <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"highest_quality"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb33-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(band7_qa <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"highest_quality"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb33-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(atmospheric_correction <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yes"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb33-13">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># filter(adjacency_correction == "yes") |&gt; </span></span>
<span id="cb33-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(qc_ints) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb33-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>()</span>
<span id="cb33-16"></span>
<span id="cb33-17">qc_500_highest_quality</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1073741824</code></pre>
</div>
</div>
</section>
<section id="filter-by-q_scan-and-gflags" class="level2">
<h2 class="anchored" data-anchor-id="filter-by-q_scan-and-gflags">Filter by <code>q_scan</code> and <code>gflags</code></h2>
<p>For our original dataset, the variable gflags has only one unique value, so it doesn’t provide much information. In the case of q_scan, we will exclude this variable from the analysis.</p>
</section>
<section id="filtering-the-complete-data-with-selected-bitmasks" class="level2">
<h2 class="anchored" data-anchor-id="filtering-the-complete-data-with-selected-bitmasks">Filtering the Complete Data with Selected Bitmasks</h2>
<p>So far, I have identified the bitmasks that indicate the highest quality, allowing me to filter out the remaining data from the reflectance_500 dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1">state_1km_filter <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> reflectance_500 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb35-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(state_1km <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> state_1km_highest_quality) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb35-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>()</span>
<span id="cb35-4"></span>
<span id="cb35-5">state_1km_filter</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4586</code></pre>
</div>
</div>
<p>These numbers of observations represent the filtering based solely on the <code>state_1km</code> variable. Now, I will continue with the <code>qc_500</code> variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1">state_1km_filter_qc_500 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> reflectance_500 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb37-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(state_1km <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> state_1km_highest_quality) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb37-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(qc_500m <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> qc_500_highest_quality) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb37-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>()</span>
<span id="cb37-5"></span>
<span id="cb37-6">state_1km_filter_qc_500</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4319</code></pre>
</div>
</div>
</section>
<section id="some-plots-with-clean-reflectance_500-data" class="level2">
<h2 class="anchored" data-anchor-id="some-plots-with-clean-reflectance_500-data">Some plots with clean reflectance_500 data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb39" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1">reflectance_500 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb39-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(state_1km <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> state_1km_highest_quality) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb39-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(date) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb39-4">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># pull() |&gt; </span></span>
<span id="cb39-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">year_month =</span> zoo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.yearmon</span>(date)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb39-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> date)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb39-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_histogram</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bins =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb39-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_date</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">date_labels =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%b%Y"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"months"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb39-9">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_light</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">base_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb39-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">angle =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">90</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">h =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb39-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Date"</span>,</span>
<span id="cb39-12">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Number of pixels"</span>,</span>
<span id="cb39-13">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Borden  MODIS pixels per month after quality filtering"</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://ronnyale.com/posts/2023-12-25-modis-bitstring/index_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="1056"></p>
</div>
</div>
</section>
</section>
<section id="final-notes" class="level1">
<h1>Final notes</h1>
<ul>
<li>A function such as <code>obtain_bit_qc_df()</code> can be used to do the bit string conversion repeatedly in the dataset.</li>
<li>A second function that contains all the data quality categories can be useful to perform the operation on the objects resulting of applying the <code>obtain_bit_qc_df()</code>. On this blog post we didn’t create that function but you can check an example of it <a href="https://github.com/ronnyhdez/thesis_msc/blob/211f46784871c670ebc488b79549d03ec1a63b84/R/create_bit_string.R#L212">here</a></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This blog post is derived from my early development notes on my thesis work <span class="citation" data-cites="hernandez_mora_2024_10882134">(Hernández Mora 2024)</span>. If you’d like to explore the code further, you can visit my <a href="https://github.com/ronnyhdez/thesis_msc">thesis repository</a>, where I have documented everything and made it publicly accessible in an effort of open science.</p>
</div>
</div>
</section>
<section id="references" class="level1">
<h1>References</h1>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-hernandez_mora_2024_10882134" class="csl-entry">
Hernández Mora, Ronny A. 2024. <span>“<span class="nocase">Assessing uncertainties related to the use of satellite remote sensing indices to estimate Gross Primary Production: Code and source files.</span>”</span> Zenodo. <a href="https://doi.org/10.5281/zenodo.10882134">https://doi.org/10.5281/zenodo.10882134</a>.
</div>
<div id="ref-vermote2021modis" class="csl-entry">
Vermote, Wolfe, E. 2021. <span>“MODIS/Terra Surface Reflectance Daily L2G Global 1km and 500m SIN Grid V061.”</span> <em>NASA EOSDIS Land Processes Distributed Active Archive Center</em>. <a href="https://doi.org/10.5067/MODIS/MOD09GA.061">https://doi.org/10.5067/MODIS/MOD09GA.061</a>.
</div>
</div>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div id="quarto-reuse" class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{a. hernandez mora2024,
  author = {A. Hernandez Mora, Ronny},
  title = {MODIS Pixel Bit Strings Conversion with {R}},
  date = {2024-08-24},
  url = {https://ronnyale.com/posts/2023-12-25-modis-bitstring},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-a. hernandez mora2024" class="csl-entry quarto-appendix-citeas">
A. Hernandez Mora, Ronny. 2024. <span>“MODIS Pixel Bit Strings
Conversion with R.”</span> August 24, 2024. <a href="https://ronnyale.com/posts/2023-12-25-modis-bitstring">https://ronnyale.com/posts/2023-12-25-modis-bitstring</a>.
</div></div></section></div> ]]></description>
  <category>MODIS</category>
  <category>R</category>
  <category>bits</category>
  <guid>https://ronnyale.com/posts/2023-12-25-modis-bitstring/index.html</guid>
  <pubDate>Sat, 24 Aug 2024 06:00:00 GMT</pubDate>
  <media:content url="https://ronnyale.com/posts/2023-12-25-modis-bitstring/lakes.png" medium="image" type="image/png" height="67" width="144"/>
</item>
<item>
  <title>Configuring nvim with Lua and packer for R</title>
  <dc:creator>Ronny A. Hernandez Mora</dc:creator>
  <link>https://ronnyale.com/posts/2023-06-17-nvim_lua_packer/index.html</link>
  <description><![CDATA[ 




<section id="what-are-we-going-to-do" class="level1">
<h1>What are we going to do?</h1>
<p>In this blogpost, I will guide you through the process of installing Neovim on Ubuntu 22.04, configuring it with Lua, and using Packer as a plugin manager. Our goal is to create an optimized setup that allows for smooth R programming from the terminal.</p>
<p>If you have previously read my <a href="https://ronnyhdez.github.io/blog/posts/2022-09-11-using-nvim-for-r-users/">blogposts</a>, you might be familiar with the configuration using <a href="https://github.com/junegunn/vim-plug">vim-plug</a> for managing plugins. However, in this blogpost, we will take a different approach by utilizing Lua for our Neovim configuration and Packer for plugin management. Lua provides a more organized and flexible way to configure Neovim, while Packer simplifies the installation and management of plugins.</p>
<p>Let’s get started with the installation and configuration process. If you are familiar with some of the steps, feel free to jump ahead to the specific sections you need.</p>
<p>By the end of this tutorial, you will have a customized Neovim setup that enhances your R programming experience and boosts your productivity.</p>
<p>Our results will be something similar to:</p>
<p><img src="https://ronnyale.com/posts/2023-06-17-nvim_lua_packer/images/final_result.png" class="img-fluid"></p>
<p>On next blogposts, I will describe how to take this further.</p>
</section>
<section id="installation-and-configuration" class="level1">
<h1>Installation and configuration</h1>
<p>So, we need some software for this. Make sure that you have <a href="https://git-scm.com/">git</a> installed on your workstation and of course, <a href="https://docs.rstudio.com/resources/install-r/">R</a>.</p>
<section id="files-structure" class="level2">
<h2 class="anchored" data-anchor-id="files-structure">Files structure</h2>
<p>We aim to have the following configuration files structure:</p>
<p>In the directory <code>~/.config/nvim</code>, we should have:</p>
<pre><code> | - init.lua (Entry point for nvim)
 |
 | - lua/
    | - plugins.lua (For our packer plugins installations)
    | - settings.lua (Our general nvim configuration)
 |
 | - plugin/
    | - plugin_a.lua (Configurations for a determined plugin)
    | - plugin_b.lua (Configurations for a determined plugin)
    | - packer_compiled.lua (File generated automatically by Packer)</code></pre>
<p>This is not mandatory, but is one of the configurations that I find really nice to organize everything being specific on the aim of the instructions.</p>
</section>
<section id="installing-neovim" class="level2">
<h2 class="anchored" data-anchor-id="installing-neovim">Installing Neovim</h2>
<ol type="1">
<li>Open your terminal</li>
<li>Run the following command:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> apt install neovim</span></code></pre></div>
</div>
</section>
<section id="configuring-our-nvim-with-lua" class="level2">
<h2 class="anchored" data-anchor-id="configuring-our-nvim-with-lua">Configuring our nvim with lua</h2>
<ol type="1">
<li>Create the config directory for nvim:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mkdir</span> /home/user_name/.config/nvim</span></code></pre></div>
</div>
<p>Remember to replace <code>user_name</code> with your actual workstation user name.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://ronnyale.com/posts/2023-06-17-nvim_lua_packer/images/mkdir_nvim.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Creating nvim directory in <code>.config</code></figcaption>
</figure>
</div>
<ol start="2" type="1">
<li>Create the <code>init.lua</code> file:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create file</span></span>
<span id="cb4-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">nvim</span> init.lua</span></code></pre></div>
</div>
<ol start="3" type="1">
<li>Add the following requirements:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Requirements</span></span>
<span id="cb5-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">require</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'plugins'</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb5-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">require</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'settings'</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</div>
<p><img src="https://ronnyale.com/posts/2023-06-17-nvim_lua_packer/images/requirements.png" class="img-fluid" alt="Include the requirements in the init.lua file"> These requirements reference the files that we are about to create: <code>plugins.lua</code> and <code>settings.lua</code>. Both files should be placed in the <code>lua/</code> directory.</p>
<p>The <code>init.lua</code> file acts as the entry point for loading the settings and plugins. If you make changes to the plugins, such as adding a new one, you can revisit the <code>init.lua</code> file and invoke <code>:PackerSync</code> to synchronize the plugins. However, for now, you don’t need to worry about this step.</p>
</section>
<section id="configuring-general-settings-for-lua" class="level2">
<h2 class="anchored" data-anchor-id="configuring-general-settings-for-lua">Configuring General Settings for Lua</h2>
<p>After creating our <code>init.lua</code> file, it’s time to configure the general settings to customize the behavior of the nvim editor according to our preferred style.</p>
<p>To organize these settings effectively, we will utilize the <code>lua/settings.lua</code> file. This file will serve as a central location for all our general settings.</p>
<p>To set up the <code>lua/settings.lua</code> file, follow these steps:</p>
<ol type="1">
<li>Create the <code>lua/</code> directory inside the <code>nvim/</code> directory if it doesn’t already exist:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mkdir</span> lua</span></code></pre></div>
</div>
<ol start="2" type="1">
<li>Create the settings.lua file within the lua/ directory.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">nvim</span> lua/settings.lua</span></code></pre></div>
</div>
<p>Make sure that the file name matches the one specified in your init.lua file’s requirements.</p>
<p>When doing the step above, probably you will find an error:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://ronnyale.com/posts/2023-06-17-nvim_lua_packer/images/error.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Error message when modifyng the <code>settings.lua</code> file</figcaption>
</figure>
</div>
<p>Since we are currently in the process of creating the required files, it’s normal to encounter an error when Neovim tries to locate the non-existent files. However, this is not a cause for concern for now.</p>
<p>Consider adding the following basic configuration options to the <code>settings.lua</code> file:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">vim.opt.number</span> = true</span>
<span id="cb8-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">vim.opt.relativenumber</span> = true</span>
<span id="cb8-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">vim.opt.ignorecase</span> = true</span>
<span id="cb8-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">vim.opt.smartcase</span> = true</span>
<span id="cb8-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">vim.opt.breakindent</span> = true</span>
<span id="cb8-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">vim.opt.tabstop</span> = 4</span>
<span id="cb8-7"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">vim.opt.shiftwidth</span> = 4</span>
<span id="cb8-8"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">vim.opt.colorcolumn</span> = <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"80"</span></span></code></pre></div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://ronnyale.com/posts/2023-06-17-nvim_lua_packer/images/nvim_settings.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Settings for nvim in the file <code>settings.lua</code></figcaption>
</figure>
</div>
<p>These configurations will enable line numbers, relative line numbers, case-insensitive searching, smart case sensitivity, indentation on line breaks, set the tab width to 4 spaces, set the indent width to 4 spaces, and display a color column at column 80.</p>
<p>Feel free to adjust these settings according to your preferences.</p>
</section>
<section id="installing-packer" class="level2">
<h2 class="anchored" data-anchor-id="installing-packer">Installing packer</h2>
<p>To install Packer, a plugin manager for Neovim, follow these steps:</p>
<ol type="1">
<li>Create the <code>plugins.lua</code> file inside the <code>lua</code> folder</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">nvim</span> lua/plugins.lua</span></code></pre></div>
</div>
<p>Again, you will find the same warning as above, but just hit enter.</p>
<ol start="2" type="1">
<li>Copy and paste the following code into the file. This code checks if Packer is already installed and, if not, it installs it automatically when you start Neovim.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb10-1"> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">local</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">ensure_packer</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">function()</span></span>
<span id="cb10-2">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">local</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">fn</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">vim</span>.fn</span>
<span id="cb10-3">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">local</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">install_path</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">fn</span>.stdpath<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'data'</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">..</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'/site/pack/packer/start/packer.nvim'</span></span>
<span id="cb10-4">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">fn.empty</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">fn.glob</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">install_path</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">))</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> 0 <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">then</span></span>
<span id="cb10-5">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">fn.system</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">{</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'git'</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'clone'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'--depth'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'1'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://github.com/wbthomason/packer.nvim'</span>, install_path}<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb10-6">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">vim.cmd</span> [[packadd packer.nvim]]</span>
<span id="cb10-7">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">true</span></span>
<span id="cb10-8">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">end</span></span>
<span id="cb10-9">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">false</span></span>
<span id="cb10-10"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">end</span></span>
<span id="cb10-11"></span>
<span id="cb10-12"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">local</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">packer_bootstrap</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">ensure_packer()</span></span></code></pre></div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://ronnyale.com/posts/2023-06-17-nvim_lua_packer/images/packer.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Packer code snippet for installation</figcaption>
</figure>
</div>
<p>With these code snippets in place, whenever you start Neovim, it will automatically check if Packer is installed. If it’s not found, it will be cloned from the official repository and set up for use.</p>
<p>Don’t close the file yet! We are going to add a couple of things more in the next section.</p>
</section>
<section id="installing-plugins" class="level2">
<h2 class="anchored" data-anchor-id="installing-plugins">Installing plugins</h2>
<p>Now you can proceed with adding the desired plugins to the <code>lua/plugins.lua</code> file. Here we are going to add a couple, with special attention to <code>Nvim-R</code>.</p>
<ol type="1">
<li><p>Open the lua/plugins.lua file in your preferred text editor.</p></li>
<li><p>Inside the require(‘packer’).startup(function() block, you can add the plugins you want to install. For example, let’s add two plugins: gruvbox for a colorscheme and Nvim-R for R integration. Modify your lua/plugins.lua file as follows:</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">require</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'packer'</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">.startup</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">function()</span></span>
<span id="cb11-2">        <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">--</span> packer can manage itself</span>
<span id="cb11-3">        <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">use</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'wbthomason/packer.nvim'</span></span>
<span id="cb11-4"></span>
<span id="cb11-5">        <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">--</span> colorscheme</span>
<span id="cb11-6">        <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">use</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gruvbox-community/gruvbox'</span></span>
<span id="cb11-7">        </span>
<span id="cb11-8">        <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">--</span> nvim-r</span>
<span id="cb11-9">        <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">use</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'jalvesaq/Nvim-R'</span></span>
<span id="cb11-10"></span>
<span id="cb11-11"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">end</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</div>
<ol start="3" type="1">
<li>Save the changes to your lua/plugins.lua file.</li>
</ol>
<p>After adding the plugins, you can go back to your <code>init.lua</code> file and check if everything is correct. To install and update all the plugins, run the following command inside Neovim:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">:PackerSync</span></span></code></pre></div>
</div>
<p>This will trigger the installation and updating of your plugins.</p>
<p>Once the process is complete, you can quit Neovim by running <code>:q</code> in the Packer window and <code>:q</code> in the <code>init.lua</code> file.</p>
<p>Now, your plugins should be successfully installed and ready to use in Neovim.</p>
</section>
<section id="configure-settings-for-nvim-r" class="level2">
<h2 class="anchored" data-anchor-id="configure-settings-for-nvim-r">Configure settings for Nvim-R</h2>
<p>At this point you should have the following structure:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://ronnyale.com/posts/2023-06-17-nvim_lua_packer/images/tree.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">File structure for our settings</figcaption>
</figure>
</div>
<p>For this, we need to create a file with the name of the plugin. We are going to configure a couple of settings for our nvim-r plugin.</p>
<ol type="1">
<li>Navigate to the <code>plugin/</code> folder in your Neovim configuration directory.</li>
<li>Create a new file called <code>nvimr.lua</code> inside the <code>plugin/</code> folder.</li>
<li>Open the <code>nvimr.lua</code> file and add the following configurations:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">--</span> To use spacebar for running code</span>
<span id="cb13-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">vim.cmd</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">[[</span></span>
<span id="cb13-3">  let g:markdown_fenced_languages = <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">['r',</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'python'</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb13-4">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">let</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">g</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">rmd_fenced_languages</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'r'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'python'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb13-5"></span>
<span id="cb13-6">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">has</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gui_running"</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb13-7">      <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">inoremap</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>C-Space<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>C-x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;&lt;</span>C-o<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb13-8">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span></span>
<span id="cb13-9">      <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">inoremap</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>Nul<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>C-x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;&lt;</span>C-o<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb13-10">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">endif</span></span>
<span id="cb13-11">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">vmap</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>Space<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>Plug<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span>RDSendSelection</span>
<span id="cb13-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nmap</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>Space<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>Plug<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span>RDSendLine</span>
<span id="cb13-13"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">]]</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb13-14"></span>
<span id="cb13-15"></span>
<span id="cb13-16"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">--</span> R filetypes</span>
<span id="cb13-17"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">vim.cmd</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">[[</span></span>
<span id="cb13-18">autocmd BufNewFile,BufRead <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">*</span>.Rmd <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">set</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">ft</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>rmd</span>
<span id="cb13-19"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">autocmd</span> BufNewFile,BufRead <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">*</span>.rmd set ft=rmd</span>
<span id="cb13-20"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">autocmd</span> BufNewFile,BufRead <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">*</span>.qmd set ft=rmd</span>
<span id="cb13-21"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">]]</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</div>
<p>The above configurations will:</p>
<ul>
<li>Set the fenced code block languages to ‘r’ and ‘python’ for R Markdown and quarto files.</li>
<li>Enable the space bar as a shortcut for running lines of code.</li>
<li>Set the key mapping <code>&lt;Space&gt;</code> for visual mode to send the selected lines to the R terminal.</li>
<li>Set the key mapping <code>&lt;Space&gt;</code> for normal mode to send the current line to the R terminal.</li>
<li>Set the filetypes to <code>rmd</code> for <code>.Rmd</code>, <code>.rmd</code>, and <code>.qmd</code> files.</li>
</ul>
<p>Save the changes to the <code>nvimr.lua</code> file.</p>
<p>With these settings in place, Nvim-R will be configured to enhance your workflow with .rmd and .qmd files, providing a convenient way to run R code within Neovim.</p>
</section>
</section>
<section id="testing" class="level1">
<h1>Testing</h1>
<p>Now that we have everything installed, let’s test if we can work with R from our terminal using Neovim.</p>
<ol type="1">
<li>Create a test .rmd file on your desktop. You can use the following command:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">nvim</span> test.rmd</span></code></pre></div>
</div>
<ol start="2" type="1">
<li>In the test.rmd file, let’s start with a simple function. Add a similar function:</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://ronnyale.com/posts/2023-06-17-nvim_lua_packer/images/create_test.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Creating a <code>test.rmd</code> file</figcaption>
</figure>
</div>
<ol start="3" type="1">
<li>To open the R console, press <code>\rf</code>:</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://ronnyale.com/posts/2023-06-17-nvim_lua_packer/images/r_console.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Opening R console with nvim-r</figcaption>
</figure>
</div>
<ol start="4" type="1">
<li>Place your cursor in any line inside the chunk of the code and press the <code>spacebar</code> to send the line to the R console:</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://ronnyale.com/posts/2023-06-17-nvim_lua_packer/images/run_code.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Running the R code!</figcaption>
</figure>
</div>
<p>With all these steps, you just tested the integration of R with nvim. You can now continue to explore and utilize the features provided by Nvim-R to enhance your R coding experience within Neovim.</p>
</section>
<section id="workflow" class="level1">
<h1>Workflow</h1>
<p>Now that we hace everything setup, is time to work with R from nvim. Check this other <a href="https://ronnyhdez.github.io/blog/posts/2023-02-27-nvim-and-r/">tutorial</a> with some of the most common and useful key bindings.</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div id="quarto-reuse" class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{a. hernandez mora2023,
  author = {A. Hernandez Mora, Ronny},
  title = {Configuring Nvim with {Lua} and Packer for {R}},
  date = {2023-06-18},
  url = {https://ronnyale.com/posts/2023-06-17-nvim_lua_packer},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-a. hernandez mora2023" class="csl-entry quarto-appendix-citeas">
A. Hernandez Mora, Ronny. 2023. <span>“Configuring Nvim with Lua and
Packer for R.”</span> June 18, 2023. <a href="https://ronnyale.com/posts/2023-06-17-nvim_lua_packer">https://ronnyale.com/posts/2023-06-17-nvim_lua_packer</a>.
</div></div></section></div> ]]></description>
  <category>Neovim</category>
  <category>Linux</category>
  <category>R</category>
  <category>Lua</category>
  <category>packer</category>
  <guid>https://ronnyale.com/posts/2023-06-17-nvim_lua_packer/index.html</guid>
  <pubDate>Sun, 18 Jun 2023 06:00:00 GMT</pubDate>
  <media:content url="https://ronnyale.com/posts/2023-06-17-nvim_lua_packer/images/keyboard.png" medium="image" type="image/png" height="72" width="144"/>
</item>
<item>
  <title>Workflow to use R with Neovim</title>
  <dc:creator>Ronny A. Hernandez Mora</dc:creator>
  <link>https://ronnyale.com/posts/2023-02-27-nvim-and-r/index.html</link>
  <description><![CDATA[ 




<section id="why" class="level1">
<h1>Why?</h1>
<p>There are several reasons why using Neovim with Lua and Packer for working with R can be beneficial:</p>
<ol type="1">
<li><p><em>Lightweight and Customizable</em>: Neovim is a lightweight text editor that runs in the terminal, providing a clean and minimalistic interface. By configuring it with Lua, you have the flexibility to customize and personalize your editor to match your preferences and workflow.</p></li>
<li><p><em>Efficient R Coding</em>: Neovim offers powerful features and key bindings specifically tailored for working with R, such as sending code to the R console, code navigation, code completion, and documentation lookup. These features help streamline your R coding workflow and enhance your productivity.</p></li>
<li><p><em>Package Management with Packer</em>: Packer is a plugin manager for Neovim that simplifies the installation and management of plugins. With Packer, you can easily add, update, and remove plugins, allowing you to extend the functionality of Neovim and enhance your R coding experience.</p></li>
<li><p><em>Terminal-based Environment</em>: Working in a terminal-based environment can be advantageous for R development. It allows you to focus on your code without distractions and provides a consistent experience across different platforms and systems.</p></li>
</ol>
<p>By following the <a href="https://ronnyhdez.github.io/blog/posts/2023-06-17-nvim_lua_packer/">tutorial here</a>, you can learn how to install and configure Neovim with Lua and Packer to set up an efficient and streamlined environment for working with R.</p>
<p>Give it a try and see how this setup can enhance your R coding experience!</p>
</section>
<section id="workflow" class="level1">
<h1>Workflow</h1>
<ol type="1">
<li>Open any R file with nvim</li>
<li>Use the <code>\rf</code> command to open the R console</li>
<li>Start modifying and running code with the <code>spacebar</code></li>
</ol>
<section id="movements" class="level2">
<h2 class="anchored" data-anchor-id="movements">Movements</h2>
<p><code>ctrl + w + l</code> Jump to left panel</p>
<p><code>ctrl + w + h</code> Jump to right panel</p>
<p><code>gg</code> Move to of file</p>
<p><code>G</code> Move bottom of file</p>
<p><code>function + Shift + up or down</code> Take to the upper or lower page section</p>
<p><code>{</code> Go one paragraph up</p>
<p><code>}</code> Go one paragraph down</p>
</section>
<section id="r-specific-commands" class="level2">
<h2 class="anchored" data-anchor-id="r-specific-commands">R specific commands</h2>
<p><code>\rf</code> Connect to R Console</p>
<p><code>\rq</code> Quit R Console</p>
<p><code>\d</code> Run current line and move to the next line</p>
<p><code>\l</code> Run current line, but cursor will stay on the same line.</p>
<p><code>\pp</code> Run paragraph. But cursor will stay on the same block.</p>
<p><code>\pd</code> Runs block and move to the next one</p>
<p><code>\ss</code> Execute a block of <strong>selected code</strong>. This has to be done with visual mode</p>
<p><code>\aa</code> Run entire script</p>
<p><code>\ro</code> Open the “Global Environment”</p>
<p><code>\r=</code> Expand all</p>
<p><code>\r-</code> Collapse all</p>
<p><code>\qp</code> Render preview .qmd (If I save the doc, it will re-render the site)</p>
<p><code>\gn</code> Next chunk</p>
<p><code>\gN</code> Previous chunk</p>
<p><code>\ch</code> Run all previous chunks to here</p>
<p><code>\cc</code> Run current chunk</p>
<p><code>space bar</code> Run one line of code (You need to create this key binding)</p>
</section>
<section id="edit-files" class="level2">
<h2 class="anchored" data-anchor-id="edit-files">Edit files</h2>
<p><code>:%s/word_in_file/word_to_insert</code> Substitute all matches</p>
<p><code>:set spell</code> will set the grammar check in the document</p>
<p><code>z=</code> will open the options to correct a word.</p>


</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div id="quarto-reuse" class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{a. hernandez mora2023,
  author = {A. Hernandez Mora, Ronny},
  title = {Workflow to Use {R} with {Neovim}},
  date = {2023-02-27},
  url = {https://ronnyale.com/posts/2023-02-27-nvim-and-r},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-a. hernandez mora2023" class="csl-entry quarto-appendix-citeas">
A. Hernandez Mora, Ronny. 2023. <span>“Workflow to Use R with
Neovim.”</span> February 27, 2023. <a href="https://ronnyale.com/posts/2023-02-27-nvim-and-r">https://ronnyale.com/posts/2023-02-27-nvim-and-r</a>.
</div></div></section></div> ]]></description>
  <category>Neovim</category>
  <category>Linux</category>
  <category>R</category>
  <guid>https://ronnyale.com/posts/2023-02-27-nvim-and-r/index.html</guid>
  <pubDate>Mon, 27 Feb 2023 07:00:00 GMT</pubDate>
  <media:content url="https://ronnyale.com/posts/2023-02-27-nvim-and-r/images/computer.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Packages citation and zotero</title>
  <dc:creator>Ronny A. Hernandez Mora</dc:creator>
  <dc:creator>Erick Calderon Morales</dc:creator>
  <link>https://ronnyale.com/posts/2022-09-14-package-citation-zotero/packages_citation_zotero.html</link>
  <description><![CDATA[ 




<section id="why" class="level1">
<h1>Why?</h1>
<p>When working on your research project, probably you will need to cite the R packages used in your data analysis. Also, probably you use Zotero as your reference manager, so, how can you manage the R packages references in Zotero?</p>
<p>Well, here I will show you one <strong>manual</strong> way to do it.</p>
</section>
<section id="obtain-the-package-citation" class="level1">
<h1>Obtain the package citation</h1>
<p>This one is easy. You just use the function `citation(“dplyr”) and in your console will appear all the bibliographic info from that package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">citation</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dplyr"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
To cite package 'dplyr' in publications use:

  Wickham H, François R, Henry L, Müller K (2022). _dplyr: A Grammar of
  Data Manipulation_. R package version 1.0.9,
  &lt;https://CRAN.R-project.org/package=dplyr&gt;.

A BibTeX entry for LaTeX users is

  @Manual{,
    title = {dplyr: A Grammar of Data Manipulation},
    author = {Hadley Wickham and Romain François and Lionel Henry and Kirill Müller},
    year = {2022},
    note = {R package version 1.0.9},
    url = {https://CRAN.R-project.org/package=dplyr},
  }</code></pre>
</div>
</div>
<p>Now, you need to pay attention on the section that says: <code>A BibTeX entry for LaTeX users is</code></p>
</section>
<section id="creating-the-bibtex-file" class="level1">
<h1>Creating the BibTex file</h1>
<p>From where the <code>@</code> starts, that’s what you need. So, copy (be aware of selecting the last <code>}</code> line) and paste it in a text file. This can be your <code>Text Editor</code> in ubuntu, Notepad, notes or even a Text File in your RStudio.</p>
<p>You can copy and paste as many references you need. It can look something like this:</p>
<pre><code>@Article{,
  title = {{weathercan}: {D}ownload and format weather data from Environment and Climate Change Canada},
  author = {Stefanie E LaZerte and Sam Albers},
  journal = {The Journal of Open Source Software},
  volume = {3},
  number = {22},
  pages = {571},
  year = {2018},
  url = {https://joss.theoj.org/papers/10.21105/joss.00571},
}

@Manual{,
 title = {R: A Language and Environment for Statistical Computing},
 author = {{R Core Team}},
 organization = {R Foundation for Statistical Computing},
 address = {Vienna, Austria},
 year = {2021},
 url = {https://www.R-project.org/},
}

@Manual{,
  title = {dplyr: A Grammar of Data Manipulation},
  author = {Hadley Wickham and Romain François and Lionel Henry and Kirill Müller},
  year = {2022},
  note = {R package version 1.0.9},
  url = {https://CRAN.R-project.org/package=dplyr},
}</code></pre>
<p>Save it with the extention <code>.bib</code>:</p>
<p><img src="https://ronnyale.com/posts/2022-09-14-package-citation-zotero/images/save_bib.png" class="img-fluid"></p>
</section>
<section id="importing-the-file-in-zotero" class="level1">
<h1>Importing the file in Zotero</h1>
<p>Open Zotero and look for the option <code>import</code>. It will open a window.</p>
<p><img src="https://ronnyale.com/posts/2022-09-14-package-citation-zotero/images/import_zotero.png" class="img-fluid"></p>
<p>Select the option <code>(BibTex, RIS, Zotero RDF, etc.)</code> and from there, look the file in the path you saved. Open the file and a new window will pop up. The options to select there are up to you:</p>
<p><img src="https://ronnyale.com/posts/2022-09-14-package-citation-zotero/images/import_zotero_2.png" class="img-fluid"></p>
<p>Finally, you will see that you have the references imported to Zotero!</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div id="quarto-reuse" class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{a. hernandez mora2022,
  author = {A. Hernandez Mora, Ronny and Calderon Morales, Erick},
  title = {Packages Citation and Zotero},
  date = {2022-09-14},
  url = {https://ronnyale.com/posts/2022-09-14-package-citation-zotero/packages_citation_zotero.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-a. hernandez mora2022" class="csl-entry quarto-appendix-citeas">
A. Hernandez Mora, Ronny, and Erick Calderon Morales. 2022.
<span>“Packages Citation and Zotero.”</span> September 14, 2022. <a href="https://ronnyale.com/posts/2022-09-14-package-citation-zotero/packages_citation_zotero.html">https://ronnyale.com/posts/2022-09-14-package-citation-zotero/packages_citation_zotero.html</a>.
</div></div></section></div> ]]></description>
  <category>R packages</category>
  <category>Zotero</category>
  <guid>https://ronnyale.com/posts/2022-09-14-package-citation-zotero/packages_citation_zotero.html</guid>
  <pubDate>Wed, 14 Sep 2022 06:00:00 GMT</pubDate>
  <media:content url="https://ronnyale.com/posts/2022-09-14-package-citation-zotero/images/study.png" medium="image" type="image/png" height="165" width="144"/>
</item>
<item>
  <title>Using Neovim for R Users</title>
  <dc:creator>Ronny A. Hernandez Mora</dc:creator>
  <link>https://ronnyale.com/posts/2022-09-11-using-nvim-for-r-users/index.html</link>
  <description><![CDATA[ 




<section id="how-to-install-and-config-nvim-in-ubuntu" class="level1">
<h1>How to install and config nvim in Ubuntu?</h1>
<p>There is a ton of tutorials in the internet about this, but after trying several times, the steps that worked for me are the following:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> apt install neovim <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-y</span></span></code></pre></div>
</div>
<p>Then you can validate the version with:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">nvim</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--version</span></span></code></pre></div>
</div>
<p>Now that we have nvim installed in our computer, it’s time to configure it. First you need to create the config file that would be in the path <code>~/.config/nvim/</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create directory</span></span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mkdir</span> ~/.config/nvim/</span>
<span id="cb3-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> ~/.config/nvim/</span>
<span id="cb3-4"></span>
<span id="cb3-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create nvim config file</span></span>
<span id="cb3-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">nvim</span> init.vim</span></code></pre></div>
</div>
<p>From there, you will see an empty file. We are going to add some configuration. There are many options to adapt nvim to your needs and lots of examples out there. Here I’m going to use a basic configuration so you can get an idea on what you can do.</p>
<p>To understand the file, take notes on this:</p>
<ul>
<li>Every <code>"</code> means that the line is a comment</li>
<li>All other lines without the <code>"</code> are instructions to set your configuration</li>
<li><code>Plug</code> means that you want to use a Plugin. You will need a plugin to manage these. (More on this later)</li>
</ul>
<p>This is what a basic config file would look like:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" Cursor as a block</span></span>
<span id="cb4-2"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">set guicursor=</span></span>
<span id="cb4-3"></span>
<span id="cb4-4"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> Use relative numbers in files</span>
<span id="cb4-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> relativenumber</span>
<span id="cb4-6"></span>
<span id="cb4-7"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" Line where I'm positioned is the real line number</span></span>
<span id="cb4-8"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">set nu</span></span>
<span id="cb4-9"></span>
<span id="cb4-10"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> No saving or keeping buffer in the background</span>
<span id="cb4-11"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> hidden</span>
<span id="cb4-12"></span>
<span id="cb4-13"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" Indentetation configuration</span></span>
<span id="cb4-14"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">set tabstop=4 softtabstop=4</span></span>
<span id="cb4-15"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">set shiftwidth=4</span></span>
<span id="cb4-16"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">set expandtab</span></span>
<span id="cb4-17"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">set smartindent</span></span>
<span id="cb4-18"></span>
<span id="cb4-19"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> Start scrolling until 8 spaces away</span>
<span id="cb4-20"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> scrolloff=8</span>
<span id="cb4-21"></span>
<span id="cb4-22"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" Create extra column</span></span>
<span id="cb4-23"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">set signcolumn=yes</span></span>
<span id="cb4-24"></span>
<span id="cb4-25"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> Mark 80 characters line</span>
<span id="cb4-26"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> colorcolumn=80</span>
<span id="cb4-27"></span>
<span id="cb4-28"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" Set encoding</span></span>
<span id="cb4-29"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">set encoding=utf-8</span></span>
<span id="cb4-30"></span>
<span id="cb4-31"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> Plugins</span>
<span id="cb4-32"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">call</span> plug#begin<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb4-33"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Plug</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'jalvesaq/Nvim-R'</span></span>
<span id="cb4-34"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Plug</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'preservim/nerdtree'</span></span>
<span id="cb4-35"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Plug</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'tpope/vim-fugitive'</span></span>
<span id="cb4-36"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Plug</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ncm2/ncm2'</span></span>
<span id="cb4-37"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Plug</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gaalcaras/ncm-R'</span></span>
<span id="cb4-38"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">call</span> plug#end<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</div>
<p>A good idea for me is that, when I add a new line of configuration, I will add a comment stating what that command is mean for. That way, it will be easy for me to remember what I was trying to achieve when I made the change.</p>
<section id="instaling-plug-ins" class="level2">
<h2 class="anchored" data-anchor-id="instaling-plug-ins">Instaling Plug-ins</h2>
<p>In the <code>init.vim</code> file above, I included already some of the plugins that I want to use when working with nvim. When using the plugins, these should be in the middle of this call:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">call</span> plug#begin<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'~/.vim/plugged'</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb5-2"></span>
<span id="cb5-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">call</span> plug#end<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</div>
<p>Now, you can see that they are included in the <code>init.vim</code> file, but still are not installed. For this, the first step is to find out a plugin manager.</p>
<p>The one that I like is <a href="https://github.com/junegunn/vim-plug">vim-plug</a>. To install it, you will need to:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sh</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-c</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'curl -fLo "${XDG_DATA_HOME:-$HOME/.local/share}"/nvim/site/autoload/plug.vim --create-dirs \</span></span>
<span id="cb6-2"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">       https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim'</span></span></code></pre></div>
</div>
<p>After the <code>vim-plug</code> is installed, you will need to go back to your <code>init.vim</code> document. Then install the rest of plugins with:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">:PlugInstall</span></span></code></pre></div>
</div>
<p>When installing the rest of the plugins, you will see something similar to:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="https://ronnyale.com/posts/2022-09-11-using-nvim-for-r-users/images/plug_install.png" class="img-fluid" width="370"></p>
</div>
</div>
<p>If I want to know which pluggins are installed, with the following vim-plug command we can check them:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">:PlugStatus</span></span></code></pre></div>
</div>
</section>
</section>
<section id="nvim-workflow-for-r-projects" class="level1">
<h1>nvim workflow for R projects</h1>
<p>At this point, we have a functional and adapted nvim for our daily work. Let’s start on what would the workflow look like when dealing with R projects. At first if you already have an R project, you can move on your terminal to that path and open a file with:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">nvim</span> my_file.R</span></code></pre></div>
</div>
<p>This can be done for any R file (Rmd, R, qmd). The configuration will detect the file format and be aware of what it is. Once we have started our nvim session, we need to know a couple of commands to run R from a nvim session:</p>
<p><code>\rf</code> Connect to R Console</p>
<p><code>\rq</code> Quit R Console</p>
<p><code>\d</code> Run current line and move to the next line</p>
<p><code>\l</code> Run current line, but cursor will stay on the same line.</p>
<p><code>\pp</code> Run paragraph. But cursor will stay on the same block.</p>
<p><code>\pd</code> Runs block and move to the next one</p>
<p><code>\ss</code> Execute a block of <strong>selected code</strong>. This has to be done with visual mode</p>
<p><code>\aa</code> Run entire script</p>
<p><code>\ro</code> Open the “Global Environment”</p>
<p><code>ctrl + w + l</code> Jump to left panel</p>
<p><code>ctrl + w + h</code> Jump to right panel</p>
<p>If I made a change on the <code>~/.vimrc</code> file, I can source it with <code>:source ~/.vimcr</code></p>
<p>If I have installed the pluggin <code>NERDTree</code>, I need to remap some keys. At the moment I have in my <code>~/.vimrc</code> file the line: <code>nnoremap &lt;C-n&gt; :NERDTree&lt;CR&gt;</code>, so I don’t have to do <code>:NERDTree</code> to open the file browser. Now this can be done with:</p>
<p><code>ctrl + n</code> Open file browser on left side by default.</p>
<p>Inside the file tree browser, I can move with the arrows. To expand one folder and show contents, I can hit <code>ENTER</code>. Doing the same in an open folder, will close it.</p>
<p>To move out from the NERDTree browser I can <code>ctrl + w + w</code> so I will be jumping panels from left to right.</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div id="quarto-reuse" class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{a. hernandez mora2022,
  author = {A. Hernandez Mora, Ronny},
  title = {Using {Neovim} for {R} {Users}},
  date = {2022-09-13},
  url = {https://ronnyale.com/posts/2022-09-11-using-nvim-for-r-users},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-a. hernandez mora2022" class="csl-entry quarto-appendix-citeas">
A. Hernandez Mora, Ronny. 2022. <span>“Using Neovim for R Users.”</span>
September 13, 2022. <a href="https://ronnyale.com/posts/2022-09-11-using-nvim-for-r-users">https://ronnyale.com/posts/2022-09-11-using-nvim-for-r-users</a>.
</div></div></section></div> ]]></description>
  <category>Neovim</category>
  <category>Linux</category>
  <guid>https://ronnyale.com/posts/2022-09-11-using-nvim-for-r-users/index.html</guid>
  <pubDate>Tue, 13 Sep 2022 06:00:00 GMT</pubDate>
  <media:content url="https://ronnyale.com/posts/2022-09-11-using-nvim-for-r-users/images/nvim_r.png" medium="image" type="image/png" height="79" width="144"/>
</item>
<item>
  <title>Creating a website using mkdocs, Rmarkdown and GitHub pages</title>
  <dc:creator>Ronny A. Hernandez Mora</dc:creator>
  <link>https://ronnyale.com/posts/2021-12-11-usingmkdocsrmd/index.html</link>
  <description><![CDATA[ 




<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ---</span></span>
<span id="cb1-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># title: "Creating a website using mkdocs, Rmarkdown and GitHub pages"</span></span>
<span id="cb1-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># description: |</span></span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   A posible solution for note takers (and those who need to organize your documentation) with mkdocs and Rmarkdown.</span></span>
<span id="cb1-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># author:</span></span>
<span id="cb1-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   - name: Ronny A. Hernández Mora</span></span>
<span id="cb1-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#     url: http://ronnyhdez.rbind.io/ </span></span>
<span id="cb1-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># date: 2022-01-13</span></span>
<span id="cb1-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># creative_commons: CC BY-NC</span></span>
<span id="cb1-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># preview: images/site_alive.png</span></span>
<span id="cb1-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># twitter:</span></span>
<span id="cb1-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   creator: "@RonnyHdezM"</span></span>
<span id="cb1-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># output:</span></span>
<span id="cb1-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   distill::distill_article:</span></span>
<span id="cb1-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#     self_contained: true</span></span>
<span id="cb1-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ---</span></span></code></pre></div>
</div>
<section id="what-are-we-going-to-create" class="level2">
<h2 class="anchored" data-anchor-id="what-are-we-going-to-create">What are we going to create?</h2>
<p>A static web page like <a href="https://ronnyhdez.github.io/drawer/">this one</a> to manage your documentation created in <a href="https://rmarkdown.rstudio.com/">Rmarkdown</a></p>
</section>
<section id="the-problem" class="level2">
<h2 class="anchored" data-anchor-id="the-problem">The problem:</h2>
<p>Pretty often I found myself in situation where I say: “I did this sometime ago and now I don’t remember quite well which were the steps to do it again”.</p>
<p>From my job and also current projects I’m always taking raw notes in a text file file and despite the tons of apps out there, I like text files because they are pretty simple and this allows me to just focus in writing down the idea, concept or steps of what I’m doing and implement markdown.</p>
<p>But, the problem with this approach is that at the end of the day, I have my desktop or other folders with a lot of individual <code>.md</code> or <code>txt</code> files laying around without any intuitive context. This got me in troubles and in loosing time when I wanted to get back to something that I did and that I had somewhere in my computer.</p>
<p>If at this point your are asking yourself: why you didn’t use a wiki? or a vignette? or an Rmarkdwon file? or something more organized? The answer is simple: In the middle of a project execution, when I doubt about something, I would go to google or a reference book, grab what I needed and take a quick note about the steps that I followed to accomplish my task. If it didn’t work I would throw away the file, if it worked, I would keep the file.</p>
<p>Then, I found out about <a href="https://www.mkdocs.org/">MkDocs</a> (actually <a href="https://twitter.com/fransvandunne">Frans</a> was who showed me this) and it was the perfect solution: a simple web page, an index and most important: a search toolbar that can search in all the web page content (I mean, all my notes in there)!</p>
<p><img src="https://ronnyale.com/posts/2021-12-11-usingmkdocsrmd/images/mkdocs_example.jpg" class="img-fluid"></p>
<p>As they state in their site:</p>
<blockquote class="blockquote">
<p>MkDocs is a fast, simple and downright gorgeous static site generator that’s geared towards building project documentation. Documentation source files are written in Markdown, and configured with a single YAML configuration file.</p>
</blockquote>
<p>Now, they state that <strong>source files are written in Markdown</strong>, but if I’m an R user, probably I’m used to Rmarkdown files. Plus it’s nice to create documents in Rmarkdown where I can mix markdown and R code (R + markdown).</p>
</section>
<section id="so-how-can-i-set-up-everything" class="level2">
<h2 class="anchored" data-anchor-id="so-how-can-i-set-up-everything">So, how can I set up everything?</h2>
<p>For this recipe, you will need:</p>
<ul>
<li>R and RStudio</li>
<li>Rmarkdown package</li>
<li>MkDocs</li>
<li>git</li>
<li>GitHub account</li>
</ul>
<p>I’m not going to describe how to install R RStudio, Rmarkdown or git. There are plenty good tutorials and documentation on how to do it out there. I’m going to describe the process from the installation of MkDocs.</p>
<section id="getting-mkdocs" class="level3">
<h3 class="anchored" data-anchor-id="getting-mkdocs">Getting MkDocs</h3>
<p>For this, I followed the instructions over <a href="https://www.mkdocs.org/user-guide/installation/">here</a>. I got already python on my machine and I’m a Linux user, so I’m using Ubuntu 20.04</p>
<p>Given that I had already python I just installed MkDocs:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install mkdocs</span></code></pre></div>
</div>
<p>Then I validated that the installation was succesful:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">$</span> mkdocs <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--version</span></span>
<span id="cb3-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">mkdocs,</span> version 1.2.2 from /home/your_username/.local/lib/python3.8/site-packages/mkdocs <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Python</span> 3.8<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</div>
<p>Done! I got MkDocs on my computer.</p>
</section>
<section id="getting-matherial-theme" class="level3">
<h3 class="anchored" data-anchor-id="getting-matherial-theme">Getting Matherial theme</h3>
<p>I don’t like the default theme that comes with MkDocs, so I changed to <a href="https://squidfunk.github.io/mkdocs-material/getting-started/">Matherial</a>.</p>
<p>To install this theme, you will need to run in the terminal:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">$</span> pip3 install mkdocs-material</span></code></pre></div>
</div>
</section>
<section id="configuring-your-github-repository" class="level3">
<h3 class="anchored" data-anchor-id="configuring-your-github-repository">Configuring your GitHub repository</h3>
<p>You will need to have an account already on GitHub. When you are done with this step, you can go and create a repository. Also you will need to go to settings, search for <strong>Pages</strong> on the left hand side menu and there select the <strong>main</strong> branch to enable GitHub Pages for your repository.</p>
<p>The steps are the following:</p>
<p><strong>Create a new repository</strong></p>
<p><img src="https://ronnyale.com/posts/2021-12-11-usingmkdocsrmd/images/01_new_repo.png" class="img-fluid"></p>
<p><strong>Options for the new repo</strong></p>
<p><img src="https://ronnyale.com/posts/2021-12-11-usingmkdocsrmd/images/02_create_new_repo.png" class="img-fluid"></p>
<p><strong>Settings to enable GitHub pages</strong></p>
<p><img src="https://ronnyale.com/posts/2021-12-11-usingmkdocsrmd/images/setting_gh_pages.png" class="img-fluid"></p>
</section>
</section>
<section id="cloning-your-project" class="level2">
<h2 class="anchored" data-anchor-id="cloning-your-project">Cloning your project</h2>
<p>If you are already familiar with this step, skip this section and go ahead to the next session. If you are starting with git and GitHub here is the set of steps to clone your repo and start working.</p>
<p>Up to this point we just have created the repository on GitHub and tweak some settings. It’s time to clone the repository created on GitHub to our computer. We will be working with the RStudio IDE.</p>
<p><strong>Create new project</strong></p>
<ul>
<li><p>Select the <code>Version Control</code> option <img src="https://ronnyale.com/posts/2021-12-11-usingmkdocsrmd/images/01-clone.png" class="img-fluid"></p></li>
<li><p>Then select the <code>Git</code> option <img src="https://ronnyale.com/posts/2021-12-11-usingmkdocsrmd/images/02-clone.png" class="img-fluid"></p></li>
<li><p>Now, go to your repository on GitHub and under the <code>Code</code> button copy the url. Make sure that the <code>HTTPS</code> option is highlighted. <img src="https://ronnyale.com/posts/2021-12-11-usingmkdocsrmd/images/03-clone.png" class="img-fluid"></p></li>
<li><p>Copy the URL in the <code>Repository URL</code> section. The <code>Project directory name</code> should auto-populate. Then select your path where you want to locate your repository folder. <img src="https://ronnyale.com/posts/2021-12-11-usingmkdocsrmd/images/04-clone.png" class="img-fluid"></p></li>
<li><p>Now, RStudio should open a new session for working on your repository!</p></li>
</ul>
</section>
<section id="working-on-your-notes" class="level2">
<h2 class="anchored" data-anchor-id="working-on-your-notes">Working on your notes</h2>
<p>Now we are all set. We can start creating our Rmarkdown documents:</p>
<p><img src="https://ronnyale.com/posts/2021-12-11-usingmkdocsrmd/images/01-notes.png" class="img-fluid"></p>
<p>Create as many <code>Rmd</code> documents as you need. Each document will be a “section” on your final website.</p>
<p>Each of the titles and subtitles in your document will be sections inside the specific page.</p>
<p>Also, use relative paths. This will make everything less error prone.</p>
<p>Now, because we are going to use the package <a href="https://github.com/ronnyhdez/docmaker">docmaker</a> we need to follow a structure:</p>
<ul>
<li>All your <code>Rmd</code> files should be in the root of your project.</li>
<li>Your data, images, pdfs files can be saved inside folders.</li>
<li><strong>Don’t use <code>docs</code> folder</strong>. This is a special folder designated to save the files needed to build the web page. <code>docmaker</code> package will be in charge of the use of this folder, so you don’t have to worry about it.</li>
</ul>
<p>Your files in your repository should look something like this:</p>
<p><img src="https://ronnyale.com/posts/2021-12-11-usingmkdocsrmd/images/03-notes.png" class="img-fluid"></p>
<section id="gitignore-advice" class="level3">
<h3 class="anchored" data-anchor-id="gitignore-advice"><code>.gitignore</code> advice</h3>
<p>In order to not make your control version slow or run out of space in your GitHub account, ignore some files writing them in your <code>.gitignore</code> file.</p>
<p>Just open that file in RStudio and add the following lines to not include images, data, credentials or other files that are not necessary for control versioning:</p>
<p><img src="https://ronnyale.com/posts/2021-12-11-usingmkdocsrmd/images/04-notes.png" class="img-fluid"></p>
<p>In there I added:</p>
<pre><code># Personal files
data/
images/
*.html
.Renviron</code></pre>
</section>
<section id="sending-your-changes-to-your-github-repository." class="level3">
<h3 class="anchored" data-anchor-id="sending-your-changes-to-your-github-repository.">Sending your changes to your github repository.</h3>
<p>For this example I’m not using branches to avoid focusing on the git details, so we are just going to send everything to the main branch. This step is</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> add .</span>
<span id="cb6-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> commit <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Add first notes"</span></span>
<span id="cb6-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> push</span></code></pre></div>
</div>
<p>Be aware that this is probably going to ask you for who you are (user name on GitHub and email) and your credentials. One tip to save your credentials for the specific repository that you are working on is the following command after you enter your credentials:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> config credential.helper store</span></code></pre></div>
</div>
</section>
</section>
<section id="deploy-and-publish-your-notes-with-docmaker" class="level2">
<h2 class="anchored" data-anchor-id="deploy-and-publish-your-notes-with-docmaker">Deploy and publish your notes with <code>docmaker</code></h2>
<p>So far, we have our notes. But we are still lacking the part of publishing in our web page the notes. There are several steps to do this manually but after many times repeating everything I decided to create a small R package to automatize this steps. This package is called <a href="https://github.com/ronnyhdez/docmaker">dockmaer</a></p>
<p>You can install the package with:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1">devtools<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install_github</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ronnyhdez/docmaker"</span>)</span></code></pre></div>
</div>
<p>Now, on your console you can load the package:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(docmaker)</span></code></pre></div>
</div>
<section id="configure-repo-with-docmaker" class="level3">
<h3 class="anchored" data-anchor-id="configure-repo-with-docmaker">Configure repo with <code>docmaker</code></h3>
<p>Before building and deploying our notes, we need to do some configuration steps in our repository. <code>docmaker</code> can take care of this with the function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">build_repo</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">github_page_url =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://ronnyhdez.github.io/test_docmaker/"</span>,</span>
<span id="cb10-2">           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">site_author =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ronny A. Hernández Mora"</span>)</span></code></pre></div>
</div>
<p>We can get the URL of our repository in the settings &gt; page on GitHub. After we enabled this in a step before, there should appear the URL designated by GitHub for our web site.</p>
<p><img src="https://ronnyale.com/posts/2021-12-11-usingmkdocsrmd/images/page_url.png" class="img-fluid"></p>
<p>The <code>site_author</code> should be our name.</p>
<p>This function will do the following:</p>
<ul>
<li>Create a <code>yml</code> file</li>
<li>Add to the <code>.gitignore</code> the <code>site</code> folder</li>
<li>Create a <code>docs</code> folder</li>
</ul>
</section>
<section id="build-and-deploy-notes" class="level3">
<h3 class="anchored" data-anchor-id="build-and-deploy-notes">Build and deploy notes</h3>
<p>Because this is our first time, all of our notes (three in the example) are not existing as <code>md</code> documents nor even built or deploy with mkdocs.</p>
<p><code>docmaker</code> have a function to take <strong>all the .Rmd files</strong> existing in our project root and do all the steps needed to deploy this ones:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_all_docs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">deploy =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span></code></pre></div>
</div>
<p>This function will do the following:</p>
<ul>
<li>Render all our <code>Rmd</code> files to <code>md</code></li>
<li>Move the outputs (including images) to the <code>docs</code> folder</li>
<li>If we are using a <code>README.Rmd</code> file <strong>this will be ignore</strong></li>
<li>Build the mkdocs</li>
<li>If <code>deploy</code> is set to <code>TRUE</code> it will deploy the notes.</li>
<li>Create an specifi branch for the pages deployment: <code>gh-deploy</code></li>
</ul>
<p>Now, given that we are using a new branch to be deployed, we need to go back to GitHub pages and make a small change: change the branch selected to be build from:</p>
<p><img src="https://ronnyale.com/posts/2021-12-11-usingmkdocsrmd/images/gh_deploy.png" class="img-fluid"></p>
<p>After some seconds (or a few minutes), we should be able to see our site alive!</p>
<p><img src="https://ronnyale.com/posts/2021-12-11-usingmkdocsrmd/images/site_alive.png" class="img-fluid"></p>
<p>As we can see, our 3 files are sections in the left side menu. The titles and subtitles of each document will be shown in the <strong>Table of contents</strong> in the right side menu.</p>
</section>
</section>
<section id="code-and-example-site" class="level2">
<h2 class="anchored" data-anchor-id="code-and-example-site">Code and example site</h2>
<p>All the code and configuration files of the example site are in this GitHub repository:</p>
<ul>
<li><a href="https://github.com/ronnyhdez/test_docmaker">Repository</a></li>
<li><a href="https://ronnyhdez.github.io/test_docmaker/03-nicoya/">Site</a></li>
</ul>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div id="quarto-reuse" class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{a. hernandez mora2022,
  author = {A. Hernandez Mora, Ronny},
  title = {Creating a Website Using Mkdocs, {Rmarkdown} and {GitHub}
    Pages},
  date = {2022-01-13},
  url = {https://ronnyale.com/posts/2021-12-11-usingmkdocsrmd},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-a. hernandez mora2022" class="csl-entry quarto-appendix-citeas">
A. Hernandez Mora, Ronny. 2022. <span>“Creating a Website Using Mkdocs,
Rmarkdown and GitHub Pages.”</span> January 13, 2022. <a href="https://ronnyale.com/posts/2021-12-11-usingmkdocsrmd">https://ronnyale.com/posts/2021-12-11-usingmkdocsrmd</a>.
</div></div></section></div> ]]></description>
  <category>MkDocs</category>
  <category>Linux</category>
  <guid>https://ronnyale.com/posts/2021-12-11-usingmkdocsrmd/index.html</guid>
  <pubDate>Thu, 13 Jan 2022 07:00:00 GMT</pubDate>
  <media:content url="https://ronnyale.com/posts/2021-12-11-usingmkdocsrmd/images/site_alive.png" medium="image" type="image/png" height="64" width="144"/>
</item>
<item>
  <title>Usando tmux: apuntes breves de mi jornada</title>
  <dc:creator>Ronny A. Hernandez Mora</dc:creator>
  <link>https://ronnyale.com/posts/2021-12-11-usando-tmux/index.html</link>
  <description><![CDATA[ 




<section id="qué-es-tmux" class="level1">
<h1>¿Qué es <a href="https://github.com/tmux/tmux/wiki">tmux</a>?</h1>
<p>Es un sistema de multiplexación para sistemas Unix. Lo que nos permite es realizar múltiples tareas en una terminal a través del uso de paneles, sesiones o ventanas.</p>
<p>En otras palabras, es abrir una terminal y poder abrir y usar otras terminales dentro de esta.</p>
<section id="instalando-tmux" class="level2">
<h2 class="anchored" data-anchor-id="instalando-tmux">Instalando tmux</h2>
<p>Para instalarlo en distribuciones basadas en debian, podemos hacerlo con el comando:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> apt install tmux</span></code></pre></div>
</div>
<p>Para validar que se instaló</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Si nos da un número de version, estamos listos.</span></span>
<span id="cb2-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">tmux</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-V</span></span></code></pre></div>
</div>
</section>
<section id="primeros-pasos-con-tmux" class="level2">
<h2 class="anchored" data-anchor-id="primeros-pasos-con-tmux">Primeros pasos con tmux</h2>
<p>Para iniciar la sesión con tmux, corremos en la terminal el comando con el mismo nombre:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">tmux</span></span></code></pre></div>
</div>
<p>Veremos en la parte inferior de la terminal que tenemos información como</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">[0]</span> 0:bash<span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">*</span>    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ronny"</span> 22:35 03-ene-21</span></code></pre></div>
</div>
<p>Con esto podemos asegurar que estamos usando tmux sin problema.</p>
<p>Para hacer uso de las funciones que trae tmux, necesitamos tener en cuenta que hay un <strong>prefijo</strong> configurado por defecto que hay que utilizar para la mayoría de las operaciones: <strong>ctrl + b</strong></p>
<p>Esto se puede configurar para no dejarlo en una combinación de teclas tan incómoda, pero lo haremos luego.</p>
</section>
<section id="paneles-en-tmux" class="level2">
<h2 class="anchored" data-anchor-id="paneles-en-tmux">Paneles en tmux</h2>
<ul>
<li>En la terminal podemos dividir la vista en varios paneles.</li>
<li>Se pueden dividir paneles en otros más.</li>
<li>Cada panel puede ejecutar distintas tareas.</li>
</ul>
<p><strong>Dividir paneles horizontal</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ctrl</span> + b + <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span></code></pre></div>
</div>
<p><strong>Dividir paneles vertical</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ctrl</span> + b + %</span></code></pre></div>
</div>
<p><strong>Cerrar un panel</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Primera opción</span></span>
<span id="cb7-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ctrl</span> + b + x</span>
<span id="cb7-3"></span>
<span id="cb7-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Segunda opción:</span></span>
<span id="cb7-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">exit</span></span></code></pre></div>
</div>
<p><strong>Moverse entre paneles</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ctrl</span> + b + ← ↑ → ↓ </span></code></pre></div>
</div>
<p><strong>Zoom en un panel</strong></p>
<ul>
<li>Sobre el panel que queremos enfocarnos usamos el comando.</li>
<li>Los demás paneles no desaparecen, quedan ocultos por el panel en zoom.</li>
<li>Con el mismo comando quitamos el enfoque en el panel</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Para hacer el enfoque en un panel</span></span>
<span id="cb9-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ctrl</span> + b + z</span>
<span id="cb9-3"></span>
<span id="cb9-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Para quitar el enfoque, en el panel escribimos el mismo comando</span></span>
<span id="cb9-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ctrl</span> + b + z</span></code></pre></div>
</div>
</section>
<section id="ventanas-en-tmux" class="level2">
<h2 class="anchored" data-anchor-id="ventanas-en-tmux">Ventanas en tmux</h2>
<ul>
<li>A diferencia de los paneles, las ventanas nos dan una pantalla completa.</li>
<li>Podemos generar varias ventanas y en cada ventana crear paneles.</li>
<li>En parte inferior de la terminal, tendremos info sobre la o las ventanas.</li>
</ul>
<p><strong>Crear ventana</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># c = create</span></span>
<span id="cb10-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ctrl</span> + b + c</span></code></pre></div>
</div>
<p><strong>Moverse a ventana anterior</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># p = previous</span></span>
<span id="cb11-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ctrl</span> + b + p</span></code></pre></div>
</div>
<p><strong>Moverse a ventana siguiente</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># n = next </span></span>
<span id="cb12-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ctrl</span> + b + n</span></code></pre></div>
</div>
<p><strong>Moverse a ventana por id numérico</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ctrl</span> + b + numero_ventana</span></code></pre></div>
</div>
<p><strong>Cerrar una ventana</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ctrl</span> + b + <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">&amp;</span></span></code></pre></div>
</div>
<p><strong>Renombrar ventana</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Para abrir opción de renombrar</span></span>
<span id="cb15-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ctrl</span> + b + ,</span></code></pre></div>
</div>
</section>
<section id="sesiones-en-tmux" class="level2">
<h2 class="anchored" data-anchor-id="sesiones-en-tmux">Sesiones en tmux</h2>
<ul>
<li>Cada vez que usamos el comando tmux abrimos una sesión.</li>
<li>Si se cierra la terminal, podemos regresar a la sesión.</li>
<li>Las sesiones pueden correr como proceso “oculto”</li>
</ul>
<p><strong>Desconectarse de una sesión</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ctrl</span> + b + d</span></code></pre></div>
</div>
<p><strong>Revisar sesiones de tmux abierta con bash</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ps</span> aux <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">grep</span> tmux</span></code></pre></div>
</div>
<p><strong>Revisar sesiones tmux con funcionalidad propia</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Comando completo</span></span>
<span id="cb18-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">tmux</span> list-sessions</span>
<span id="cb18-3"></span>
<span id="cb18-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Comando corto</span></span>
<span id="cb18-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">tmux</span> ls</span></code></pre></div>
</div>
<p><strong>Conectarnos a una sesión en específico</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Por ejemplo a sesión 1</span></span>
<span id="cb19-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">tmux</span> attach <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-t</span> 1</span></code></pre></div>
</div>
<p><strong>Cambiar nombres a sesiones</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Dentro de la sesión</span></span>
<span id="cb20-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ctrl</span> + b + $</span></code></pre></div>
</div>
<p><strong>Crear una nueva sesión con nombre</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">tmux</span> new <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-s</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mi_proyecto"</span></span></code></pre></div>
</div>
</section>
<section id="hojas-de-referencia" class="level2">
<h2 class="anchored" data-anchor-id="hojas-de-referencia">Hojas de referencia</h2>
<p>Existen hojas de referencias para tmux. Una es <a href="https://tmuxcheatsheet.com/">esta</a></p>


</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div id="quarto-reuse" class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{a. hernandez mora2021,
  author = {A. Hernandez Mora, Ronny},
  title = {Usando Tmux: Apuntes Breves de Mi Jornada},
  date = {2021-01-03},
  url = {https://ronnyale.com/posts/2021-12-11-usando-tmux},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-a. hernandez mora2021" class="csl-entry quarto-appendix-citeas">
A. Hernandez Mora, Ronny. 2021. <span>“Usando Tmux: Apuntes Breves de Mi
Jornada.”</span> January 3, 2021. <a href="https://ronnyale.com/posts/2021-12-11-usando-tmux">https://ronnyale.com/posts/2021-12-11-usando-tmux</a>.
</div></div></section></div> ]]></description>
  <category>tmux</category>
  <category>Linux</category>
  <guid>https://ronnyale.com/posts/2021-12-11-usando-tmux/index.html</guid>
  <pubDate>Sun, 03 Jan 2021 07:00:00 GMT</pubDate>
  <media:content url="https://ronnyale.com/posts/2021-12-11-usando-tmux/images/tmux.png" medium="image" type="image/png" height="81" width="144"/>
</item>
<item>
  <title>Desplegando mi app de shiny con shiny-server</title>
  <dc:creator>Ronny A. Hernandez Mora</dc:creator>
  <link>https://ronnyale.com/posts/2021-12-11-desplegando-shiny/index.html</link>
  <description><![CDATA[ 




<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ---</span></span>
<span id="cb1-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># title: "Desplegando mi app de shiny con shiny-server"</span></span>
<span id="cb1-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># description: |</span></span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#  Vamos a "llevar a internet" nuestra aplicación y hacerla accesible al mundo.</span></span>
<span id="cb1-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># author:</span></span>
<span id="cb1-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   - name: Ronny A. Hernández Mora</span></span>
<span id="cb1-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#     url: http://ronnyhdez.rbind.io/</span></span>
<span id="cb1-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># date: 2020-12-28</span></span>
<span id="cb1-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># creative_commons: CC BY-NC</span></span>
<span id="cb1-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># preview: images/app.png</span></span>
<span id="cb1-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># twitter:</span></span>
<span id="cb1-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   creator: "@RonnyHdezM"</span></span>
<span id="cb1-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># output:</span></span>
<span id="cb1-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   distill::distill_article:</span></span>
<span id="cb1-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#     self_contained: true</span></span>
<span id="cb1-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ---</span></span></code></pre></div>
</div>
<section id="porqué-necesito-saber-esto" class="level1">
<h1>¿Porqué necesito saber esto?</h1>
<p>Si hemos creado una aplicación de shiny, es muy probable que hayamos disfrutado el verla corriendo en nuestro computador y de pronto nos preguntemos:</p>
<p>¿Cómo puedo abrir mi aplicación al mundo? ¿Cómo otras personas pueden acceder y usar a mi aplicación? ¿Cómo compartir mi aplicación con usuarios sin que tengan que instalar R, RStudio y poner al correr mi código?</p>
<p>Bueno, pues esto es lo que conocemos como desplegar una aplicación. <strong>Vamos a</strong> <strong>“llevar a internet” nuestra aplicación y hacerla accesible al mundo.</strong></p>
<p>Cuando menciono “hacerla accesible al mundo”, hablo de que podamos compartir un enlace y cualquier persona que dé click en ese enlace llegará a ver la interfaz de nuestra aplicación.</p>
</section>
<section id="qué-esperar-de-esta-guía" class="level1">
<h1>¿Qué esperar de esta guía?</h1>
<p>Todos los pasos con instrucciones en <code>bash</code> para desplegar una aplicación de shiny con <a href="https://rstudio.com/products/shiny/download-server/">shiny server open source</a> en un <a href="https://ubuntu.com/download/server">servidor Linux con Ubuntu</a></p>
<p>El <strong>objetivo</strong> es mostrar los pasos para instalar los elementos necesarios en un servidor y que se pueda desplegar el app.</p>
<p><strong>No se muestran</strong> los pasos para levantar el servidor. Esto queda a preferencia de cada quién y con el proveedor de su elección.</p>
<p>Tampoco se muestra en la guía los pasos para definir el dominio que potencialmente puede dirigir a la aplicación.</p>
<section id="requisitos" class="level2">
<h2 class="anchored" data-anchor-id="requisitos">Requisitos:</h2>
<p>Para poder seguir la guía, es necesario que ya haya desarrollado una aplicación de shiny. Puede seguir los pasos acá indicados haciendo uso de la <a href="https://github.com/ronnyhdez/shiny_modular">aplicación modular</a> que presenté en los <a href="https://www.youtube.com/watch?v=Hq0bcy4DCDg">webinarios de DataLatam</a></p>
<p>Así mismo es necesario contar con un servidor en el que pueda desplegar la aplicación.</p>
<p>También necesitamos tener conocimiento de git. La guía muestra los pasos haciendo uso de esta herramienta.</p>
</section>
<section id="recomendaciones-del-servidor" class="level2">
<h2 class="anchored" data-anchor-id="recomendaciones-del-servidor">Recomendaciones del servidor:</h2>
<p>Si queremos probar, lo ideal es usar un servidor con el mínimo posible. Conforme nuestra aplicación crezca y querramos que sea usada por más usuarios podemos revisar:</p>
<ul>
<li>memoria</li>
<li>CPU</li>
<li>disco</li>
</ul>
<p>El sistema operativo puede ser cualquiera de su elección siempre y cuando sea Linux. Los pasos en esta guía están basados en la distribución Ubuntu mayor a 18.04.4. Validar que elegimos <strong>LTS</strong> (Long Term Support)</p>
</section>
</section>
<section id="pasos" class="level1">
<h1>Pasos</h1>
<p>Si ya tenemos un servidor, vamos a proceder con los siguientes instrucciones:</p>
<section id="instalando-r-en-el-servidor" class="level2">
<h2 class="anchored" data-anchor-id="instalando-r-en-el-servidor">1- Instalando R en el servidor:</h2>
<p>Para evitar inconvenientes de versiones desactualizadas de R, podemos seguir las siguientes instrucciones:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Agregamos llave</span></span>
<span id="cb2-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> apt-key adv <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--keyserver</span> keyserver.ubuntu.com <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--recv-keys</span> E298A3A825C0D65DFD57CBB651716619E084DAB9 </span>
<span id="cb2-3"></span>
<span id="cb2-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Agregamos repositorio</span></span>
<span id="cb2-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> add-apt-repository <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'deb https://cloud.r-project.org/bin/linux/ubuntu bionic-cran40/'</span></span>
<span id="cb2-6"> </span>
<span id="cb2-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Si estamos con ubuntu 20 el repositorio es:</span></span>
<span id="cb2-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> add-apt-repository <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'deb https://cloud.r-project.org/bin/linux/ubuntu focal-cran40/'</span></span>
<span id="cb2-9"></span>
<span id="cb2-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Si queremos remover el repo no hacerlo a mano y usar el siguiente:</span></span>
<span id="cb2-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> add-apt-repository <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--remove</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'deb https://cloud.r-project.org/bin/linux/ubuntu focal-cran40/'</span></span>
<span id="cb2-12"></span>
<span id="cb2-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Actualizamos paquetes Ubuntu</span></span>
<span id="cb2-14"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> apt update</span>
<span id="cb2-15"></span>
<span id="cb2-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Instalamos R</span></span>
<span id="cb2-17"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> apt install r-base</span>
<span id="cb2-18"></span>
<span id="cb2-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Verificamos que versión de R sea la 4.0.1 (o las más actualizado al momento</span></span>
<span id="cb2-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># de la instalación) </span></span>
<span id="cb2-21"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--version</span></span></code></pre></div>
</div>
</section>
<section id="instalando-librerías-linux-comunes-para-r-en-el-servidor" class="level2">
<h2 class="anchored" data-anchor-id="instalando-librerías-linux-comunes-para-r-en-el-servidor">2- Instalando librerías linux comunes para R en el servidor</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> apt install libxml2-dev</span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> apt install libssl-dev </span>
<span id="cb3-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> apt install libcurl4-gnutls-dev </span>
<span id="cb3-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> apt-get install unixodbc unixodbc-dev</span></code></pre></div>
</div>
<p>Luego tomamos un paso para asegurarnos que todos los paquetes de Ubuntu se encuentren actualizados en el servidor</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> apt update</span>
<span id="cb4-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> apt upgrade</span>
<span id="cb4-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> apt autoremove</span></code></pre></div>
</div>
</section>
<section id="instalando-shiny-server" class="level2">
<h2 class="anchored" data-anchor-id="instalando-shiny-server">3- Instalando shiny server</h2>
<p>Antes de iniciar con la instalación de shiny server, debemos de instalar el paquete de R shiny:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> su <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb5-2">-c <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R -e </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">install.packages('shiny', repos='https://cran.rstudio.com/')</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span></code></pre></div>
</div>
<p>Para seguir la instalación de shiny server primero hay que instalarle a la máquina <code>gdebi</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> apt-get install gdebi-core</span></code></pre></div>
</div>
<p>Luego en la pagina de shiny server copiamos la <a href="https://rstudio.com/products/shiny/download-server/ubuntu/">direccion</a> de donde tienen la última version.</p>
<p>Debemos de asegurarnos de obtener la versión más actualizada. La instrucción acá mostrada puede quedar desactualizada.</p>
<p>La versión la validamos con el número que aparece luego de la palabra <code>shiny-server</code> En este caso, la usada para la guía es (<code>shiny-server-1.5.13.944</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Damos dirección de donde traemos la descarga</span></span>
<span id="cb7-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">wget</span> https://download3.rstudio.org/ubuntu-14.04/x86_64/shiny-server-1.5.13.944-amd64.deb</span>
<span id="cb7-3"></span>
<span id="cb7-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Procedemos con la instalación</span></span>
<span id="cb7-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> gdebi shiny-server-1.5.13.944-amd64.deb</span></code></pre></div>
</div>
<p>Una vez instalado podemos revisar el estado de shiny-server:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> systemctl status shiny-server</span></code></pre></div>
</div>
<p>Pare reiniciar el servidor de shiny cuando tenemos problema:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> systemctl restart shiny-server </span></code></pre></div>
</div>
<p>Una vez que tenemos instalado shiny-server,vamos a revisar por la puerta que está sirviendo. Podemos tomar la dirección IP externa del servidor, copiarla en el navegador (yo tengo preferencia por <a href="https://www.mozilla.org/en-US/firefox/new/">firefox</a>) y de seguido escribimos <code>:</code> y la puerta <code>3838</code> (Por defecto, la que sirve shiny)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ip_externa_del_servidor:3838</span></span></code></pre></div>
</div>
<p>Si no tenemos un servicio disponible (no vemos una página funcionando) debemos de revisar las reglas firewall del servidor e indicarle la salida del app.</p>
</section>
<section id="llevando-la-aplicación-al-servidor" class="level2">
<h2 class="anchored" data-anchor-id="llevando-la-aplicación-al-servidor">4- Llevando la aplicación al servidor</h2>
<p>A este punto tenemos nuestro servidor con R instalado, con shiny-server funcionando y las principales librerías linux para usar con una aplicación de shiny. Ahora el paso que sigue es llevar nuestra aplicación de shiny al servidor.</p>
<p>Es aquí donde usaremos git. Lo haremos con mi aplicación de ejemplo que se encuentra en <a href="https://github.com/ronnyhdez/shiny_modular">github</a></p>
<p>Dentro del servidor, las aplicaciones deben de estar bajo el siguiente directorio:</p>
<p><code>/srv/shiny-server</code></p>
<p>Allí es donde debemos de llevar nuestra aplicación.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Nos cambiamos al directorio</span></span>
<span id="cb11-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> /srv/shiny-server</span>
<span id="cb11-3"></span>
<span id="cb11-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Clonamos el repositorio que contiene la aplicación</span></span>
<span id="cb11-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone https://github.com/ronnyhdez/shiny_modular.git</span></code></pre></div>
</div>
<p>Luego, necesitamos instalar en el servidor los paquetes que son necesarios para nuestra aplicación. Todos aquellos paquetes que hayamos usado necesitamos incluirlos. Si dejamos alguno por fuera es muy probable que nuestra aplicación no levante. (Es el error más común que cometo)</p>
<p>Hay dos maneras de realizar este paso. Uno es dando el comando desde bash y el otro es abrir una sesión de R como usuario <code>root</code> e instalarlo tal cual lo haríamos en una sesión de R en nuestro computador:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Con comando de bash</span></span>
<span id="cb12-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> su <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb12-3">-c <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R -e </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">install.packages(c('shiny', 'tm', 'SnowballC', 'wordcloud',</span></span>
<span id="cb12-4"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'shinydashboard', 'RColorBrewer', 'ggplot2', 'purrr', 'nycflights13', 'dplyr'), repos='https://cran.rstudio.com/')</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span></code></pre></div>
</div>
<p>Si hay algún paquete que no está en el CRAN porque es una versión en desarrollo, podemos echar mano del paquete <code>remotes</code> (el cual debimos de incluir en el paso anterior)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Ejemplo de instalación de paquete en desarrollo:</span></span>
<span id="cb13-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> su <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb13-3">-c <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R -e </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">remotes::install_github("</span>datastorm-open/shinymanager<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">", </span></span>
<span id="cb13-4"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">force = TRUE)</span></span></code></pre></div>
</div>
</section>
<section id="levantando-la-aplicación" class="level2">
<h2 class="anchored" data-anchor-id="levantando-la-aplicación">5- Levantando la aplicación</h2>
<p>Con todos los pasos anteriores listos, procedemos a detener y volver a iniciar el servicio de <code>shiny-server</code>, para luego probar si nos podemos conectar a ella:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Reiniciar el servicio de manera recomendada:</span></span>
<span id="cb14-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> systemctl stop shiny-server</span>
<span id="cb14-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> systemctl start shiny-server</span>
<span id="cb14-4"></span>
<span id="cb14-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Revisar status del servicio</span></span>
<span id="cb14-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> systemctl status shiny-server</span></code></pre></div>
</div>
<p>Si el servicio está activo, podemos probar con la IP externa, la puerta 3838 e indicamos el nombre de la aplicación. Debería de ser algo similar a: <code>ip:3838/shiny_modular/</code></p>
<p>¡Y listo! Con esto tenemos los pasos básicos para desplegar nuestra aplicación de shiny en nuestro servidor y hacerla disponible al mundo.</p>
<section id="referencias" class="level3">
<h3 class="anchored" data-anchor-id="referencias">Referencias</h3>
<p>El resumen de pasos mostrados en esta guía han sido tomados y adaptados de diversas fuentes como:</p>
<p><a href="https://www.digitalocean.com/community/tutorials/how-to-install-r-on-ubuntu-18-04">DigitalOcean</a> (Algún día lograré documentar como lo hacen ellos)</p>
<p><a href="https://docs.rstudio.com/shiny-server/">Shiny Server Professional v1.5.15 Administrator’s Guide</a> El sitio a visitar cuando hay problemas con shiny-server. Es documentación técnica</p>


</section>
</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div id="quarto-reuse" class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{a. hernandez mora2020,
  author = {A. Hernandez Mora, Ronny},
  title = {Desplegando Mi App de Shiny Con Shiny-Server},
  date = {2020-12-28},
  url = {https://ronnyale.com/posts/2021-12-11-desplegando-shiny},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-a. hernandez mora2020" class="csl-entry quarto-appendix-citeas">
A. Hernandez Mora, Ronny. 2020. <span>“Desplegando Mi App de Shiny Con
Shiny-Server.”</span> December 28, 2020. <a href="https://ronnyale.com/posts/2021-12-11-desplegando-shiny">https://ronnyale.com/posts/2021-12-11-desplegando-shiny</a>.
</div></div></section></div> ]]></description>
  <category>Shiny</category>
  <category>Linux</category>
  <guid>https://ronnyale.com/posts/2021-12-11-desplegando-shiny/index.html</guid>
  <pubDate>Mon, 28 Dec 2020 07:00:00 GMT</pubDate>
  <media:content url="https://ronnyale.com/posts/2021-12-11-desplegando-shiny/images/app.png" medium="image" type="image/png" height="101" width="144"/>
</item>
<item>
  <title>Tiempo en R</title>
  <dc:creator>Ronny A. Hernandez Mora</dc:creator>
  <link>https://ronnyale.com/posts/2021-12-11-tiempo-en-r/index.html</link>
  <description><![CDATA[ 




<section id="tiempo" class="level1">
<h1>Tiempo</h1>
<p>La medición del tiempo es algo que puede ser particular, ya que hay meses con diferente número de días, en distintos países la manera de colocar el dato del día o del mes se cambia, en años bisiestos febrero tiene un día extra entre otros factores, hay diferentes</p>
<p>Por ende, hacer cálculos con fechas puede resultar algo complicado, sin embargo R tiene un sistema robusto para poder lidiar con estas situaciones.</p>
</section>
<section id="fechas-y-horas-en-r" class="level1">
<h1>Fechas y Horas en R:</h1>
<p>R tiene diversas maneras de representar objetos en el sistema. Más allá de los dobles, enteros, carácteres, lógicos y complejos, R tiene una clase especial para representar las fechas y horas.</p>
<p>Si queremos revisar cuál es la fecha y hora que tenemos en nuestro sistema podemos hacerlo con la función <code>Sys.time()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Sys.time</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2022-09-13 13:49:26 MDT"</code></pre>
</div>
</div>
<p>Lo que nos muestra es una descripción de la fecha y hora de manera meramente jerárquica: la escala más grande (años) va primero, seguido por el mes y por último el día, separados entre sí por un guión; luego hay un espacio en blanco y bajo la misma lógica tenemos la hora, los minutos y los seugundos, separados cada uno por dos punto. Al final tenemos un dato que nos indica el sistema de tiempo utilizado, en este caso Central Standard Time.</p>
<p>Esta convención es buena para poder leer de manera fácil, sin embargo, para la realización de cálculos esto es un poco difícil por lo que el manejo de estas a lo “interno” de R se hace basado en segundos.</p>
<section id="tipo-y-clase-del-tiempo-en-r" class="level2">
<h2 class="anchored" data-anchor-id="tipo-y-clase-del-tiempo-en-r">Tipo y Clase del tiempo en R:</h2>
<p>Para revisar su <em>tipo de dato</em> y su <em>clase</em> vamos a guardar esta fecha y hora de nuestro ordenador en un objeto de la siguiente manera:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1">fecha_hora <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Sys.time</span>() <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Guardar en un objeto</span></span>
<span id="cb3-2"></span>
<span id="cb3-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">typeof</span>(fecha_hora) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Tipo de dato</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">class</span>(fecha_hora) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Clase del objeto</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "POSIXct" "POSIXt" </code></pre>
</div>
</div>
<p>Al momento de utilizar la función<code>Sys.time()</code>, nos devuelve una respuesta que a primera instancia nos parecería un objeto de tipo <em>character</em> por sus comillas alrededor de esto, sin embargo, al revisar podemos notar que es un objeto de tipo <em>double</em> y su clase es _ “POSIXct” “POSIXt” _ (tiene dos clases)</p>
</section>
<section id="qué-signifan-esas-dos-clases" class="level2">
<h2 class="anchored" data-anchor-id="qué-signifan-esas-dos-clases">¿Qué signifan esas dos clases?</h2>
<p>Como mencionamos anteriormente, por convención en R se utiliza una representación numérica, basada en segundos. Esto quiere decir que cada fecha se representa por el número de segundos que han transcurrido desde las <strong>12:00 A.M. del 1 Enero de 1970. </strong> (UTC: Coordinated Universal Time)</p>
<p>Esto es bastante útil si queremos generar gráficos de series de tiempo, pero qué sucede si queremos representar las medias por mes, o por día. En este caso es necesario contar con dos maneras de representar las fechas:</p>
<p><strong>POSIXct</strong> el sufijo <strong>ct</strong> se refiere a <em>continuos time</em> y este formato es representado de manera númerica por segundos. Este es un <strong>vector</strong> que se puede usar como una variable continua en modelos de regresión.</p>
<p><strong>POSIXlt</strong> el sufijo <strong>lt</strong> corresponde a <em>list time</em> y lo que hace es una lista de todas las descripciones categóricas del tiempo. Es muy útil como variable explicativa categórica.</p>
<section id="cómo-funcionan-el-sistema-posix" class="level3">
<h3 class="anchored" data-anchor-id="cómo-funcionan-el-sistema-posix">¿Cómo funcionan el sistema POSIX?</h3>
<p>Para revisar de qué manera R hace esto podemos hacer uso de la función <code>unclass()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unclass</span>(fecha_hora)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1663098567</code></pre>
</div>
</div>
<p>El resultado que obtenemos es un elemento que R utiliza para construir un vector doble. Lo que tenemos allí es que desde las 12:00 A.M. del 1 de Enero de 1970 han transcurrido <em>1 514 244 708</em> hasta el día en que este tutorial se ha creado y este es el formato <strong>POSIXct</strong></p>
<p>En el caso de caso de una lista como <strong>POSIXlt</strong> vamos a revisar los componentes del mismo objeto con el que hemos venido trabajando:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1">fecha_hora <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.POSIXlt</span>(fecha_hora) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Definimos formato</span></span>
<span id="cb9-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unlist</span>(fecha_hora) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Sacamos de la lista los objetos almacenados</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               sec                min               hour               mday 
"26.8818531036377"               "49"               "13"               "13" 
               mon               year               wday               yday 
               "8"              "122"                "2"              "255" 
             isdst               zone             gmtoff 
               "1"              "MDT"           "-21600" </code></pre>
</div>
</div>
<p>¿Qué es lo que tenemos? Se nos muestran los componentes de la lista, que está representada por el número de segundos, minutos, hora (en formato de 24 horas). Luego viene <strong>mday</strong> que es el día del mes (inicia en 1), <strong>mon</strong> es el mes del año (comienza en enero = 0), <strong>year</strong> que representa el año (inicia en 0 = 1900),<strong>wday</strong> el día de la semana (inicia domingo = 0), <strong>yday</strong> es el número de día del año (1 de enero = 0). Por último la variable <strong>isdst</strong> lo que hace es indicarnos si un horario de verano está siendo considerado (0 = FALSE, como en este caso)</p>
</section>
</section>
</section>
<section id="leer-fechas-desde-archivos" class="level1">
<h1>Leer fechas desde archivos</h1>
<p>Cuando traemos datos a R, en ocasiones hay que hacerle explícito a R el tipo de datos que tenemos. En el caso de las fechas es necesario, ya que de esta forma determinamos qué dato corresponde a cuál componente de lo que se considera una fecha u hora.</p>
<p>Vamos a utilizar el set de datos <em>Flights that Depart NYC in 2013</em> que tiene como nombre <strong>nycflights13</strong>. Este se encuentra en el paquete con el mismo nombre. (Si no lo tienen, pueden instalarlo con la función <code>install.packages("nycflights13")</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1">data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> nycflights13<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>flights <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Guardar en objeto datos seleccionados</span></span>
<span id="cb11-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(data)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 19
   year month   day dep_time sched_dep…¹ dep_d…² arr_t…³ sched…⁴ arr_d…⁵ carrier
  &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;       &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;   &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;  
1  2013     1     1      517         515       2     830     819      11 UA     
2  2013     1     1      533         529       4     850     830      20 UA     
3  2013     1     1      542         540       2     923     850      33 AA     
4  2013     1     1      544         545      -1    1004    1022     -18 B6     
5  2013     1     1      554         600      -6     812     837     -25 DL     
6  2013     1     1      554         558      -4     740     728      12 UA     
# … with 9 more variables: flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;,
#   dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;,
#   time_hour &lt;dttm&gt;, and abbreviated variable names ¹​sched_dep_time,
#   ²​dep_delay, ³​arr_time, ⁴​sched_arr_time, ⁵​arr_delay</code></pre>
</div>
</div>
<p>El conjunto de datos trae 3 columnas con el año, el mes y el día, los cuales vamos a unir y darle format de fecha:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyr) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Paquete del cual vamos a utilizar función</span></span>
<span id="cb13-2">data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unite</span>(data, Date, year, month,day, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/"</span>)</span>
<span id="cb13-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(data)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 17
  Date    dep_t…¹ sched…² dep_d…³ arr_t…⁴ sched…⁵ arr_d…⁶ carrier flight tailnum
  &lt;chr&gt;     &lt;int&gt;   &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;   &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;  
1 2013/1…     517     515       2     830     819      11 UA        1545 N14228 
2 2013/1…     533     529       4     850     830      20 UA        1714 N24211 
3 2013/1…     542     540       2     923     850      33 AA        1141 N619AA 
4 2013/1…     544     545      -1    1004    1022     -18 B6         725 N804JB 
5 2013/1…     554     600      -6     812     837     -25 DL         461 N668DN 
6 2013/1…     554     558      -4     740     728      12 UA        1696 N39463 
# … with 7 more variables: origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;,
#   distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, and abbreviated
#   variable names ¹​dep_time, ²​sched_dep_time, ³​dep_delay, ⁴​arr_time,
#   ⁵​sched_arr_time, ⁶​arr_delay</code></pre>
</div>
</div>
<section id="función-strptime" class="level3">
<h3 class="anchored" data-anchor-id="función-strptime">Función strptime</h3>
<p>Ya que tenemos dicha column creada, vamos a indicarle R qué de esos datos pertenece al año, al mes y al día:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1">Rdate <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">strptime</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.character</span>(data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Date), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%Y/%m/%d"</span>)</span>
<span id="cb15-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">class</span>(Rdate)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "POSIXlt" "POSIXt" </code></pre>
</div>
</div>
<p>Ya tenemos el objeto creado con las fechas por lo que ahora podemos unirlo al set de datos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1">data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(Rdate,data)</span>
<span id="cb17-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(data)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Rdate     Date dep_time sched_dep_time dep_delay arr_time sched_arr_time
1 2013-01-01 2013/1/1      517            515         2      830            819
2 2013-01-01 2013/1/1      533            529         4      850            830
3 2013-01-01 2013/1/1      542            540         2      923            850
4 2013-01-01 2013/1/1      544            545        -1     1004           1022
5 2013-01-01 2013/1/1      554            600        -6      812            837
6 2013-01-01 2013/1/1      554            558        -4      740            728
  arr_delay carrier flight tailnum origin dest air_time distance hour minute
1        11      UA   1545  N14228    EWR  IAH      227     1400    5     15
2        20      UA   1714  N24211    LGA  IAH      227     1416    5     29
3        33      AA   1141  N619AA    JFK  MIA      160     1089    5     40
4       -18      B6    725  N804JB    JFK  BQN      183     1576    5     45
5       -25      DL    461  N668DN    LGA  ATL      116      762    6      0
6        12      UA   1696  N39463    EWR  ORD      150      719    5     58
            time_hour
1 2013-01-01 05:00:00
2 2013-01-01 05:00:00
3 2013-01-01 05:00:00
4 2013-01-01 05:00:00
5 2013-01-01 06:00:00
6 2013-01-01 05:00:00</code></pre>
</div>
</div>
</section>
<section id="qué-fué-lo-que-hicimos" class="level3">
<h3 class="anchored" data-anchor-id="qué-fué-lo-que-hicimos">¿Qué fué lo que hicimos?</h3>
<p>La columna date contenía datos separados por un guión, en donde el primer dato pertenecía al año, el segundo al mes y el tercero al día, por ende le dijimos a R que leyera esos datos como año, mes y día separados por un <strong>/</strong>: (<code>"%Y/%m/%d"</code>)</p>
<p>Estas son abreviaciones que dan a entender diferentes formas de leer el dato en R. La siguiente es una lista de todas las abreviaciones:</p>
<table class="table">
<colgroup>
<col style="width: 38%">
<col style="width: 61%">
</colgroup>
<thead>
<tr class="header">
<th>Símbolo</th>
<th>Significado</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>%a</td>
<td>Nombre de la semana abreviado</td>
</tr>
<tr class="even">
<td>%A</td>
<td>Nombre de la semana completo</td>
</tr>
<tr class="odd">
<td>%b</td>
<td>Nombre del mes abreviado</td>
</tr>
<tr class="even">
<td>%B</td>
<td>Nombre del mes completo</td>
</tr>
<tr class="odd">
<td>%c</td>
<td>Hora y Fecha específica a la localidad</td>
</tr>
<tr class="even">
<td>%d</td>
<td>Día del mes como un número decimal (01-31)</td>
</tr>
<tr class="odd">
<td>%H</td>
<td>Horas como decimales en reloj de 24 horas</td>
</tr>
<tr class="even">
<td>%I</td>
<td>Horas como decimales en reloj de 12 horas</td>
</tr>
<tr class="odd">
<td>%j</td>
<td>Día del año como número decimal (0 - 366)</td>
</tr>
<tr class="even">
<td>%m</td>
<td>Mes como un número decimal (0-11)</td>
</tr>
<tr class="odd">
<td>%M</td>
<td>Minutos como un número decimal (00 - 59)</td>
</tr>
<tr class="even">
<td>%p</td>
<td>AM/PM indicador en la localidad</td>
</tr>
<tr class="odd">
<td>%S</td>
<td>Segundos como número decimal (00 - 61)</td>
</tr>
<tr class="even">
<td>%U</td>
<td>Semana del año (00 - 53) usando el primer domingo como el día 1 de la semana 1</td>
</tr>
<tr class="odd">
<td>%w</td>
<td>Día de la semana como un número decimal (0 - 6, Domingo es 0)</td>
</tr>
<tr class="even">
<td>%W</td>
<td>Semana del año (00 - 53) usando el primer lunes como día 1 de la semana 1</td>
</tr>
<tr class="odd">
<td>%x</td>
<td>Fecha, específica de la localidad</td>
</tr>
<tr class="even">
<td>%X</td>
<td>Hora, específica de la localidad</td>
</tr>
<tr class="odd">
<td>%Y</td>
<td>Año con centenario</td>
</tr>
<tr class="even">
<td>%y</td>
<td>Año sin centenario</td>
</tr>
<tr class="odd">
<td>%Z</td>
<td>Zona horaria como un vector de tipo caracter</td>
</tr>
</tbody>
</table>
</section>
<section id="nombre-completo-del-día" class="level3">
<h3 class="anchored" data-anchor-id="nombre-completo-del-día">Nombre completo del día:</h3>
<p>Ahora bien, hay ocasiones en que por ejemplo, tenemos el día como un número, pero nos serviría más tener el nombre del día. Para esto existe la función <code>weekdays()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1">ejemplo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> data[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span>
<span id="cb19-2">ejemplo</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2013-01-01 MST"</code></pre>
</div>
</div>
<p>Tenemos el 1ero de enero del 2013, ahora queremos ver qué día es este con su nombre:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">weekdays</span>(ejemplo)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "martes"</code></pre>
</div>
</div>
</section>
<section id="otros-formatos" class="level3">
<h3 class="anchored" data-anchor-id="otros-formatos">Otros formatos</h3>
<p>Fechas pueden venir en diversas formas, tenemos que aprender cómo lidiar con estas y cómo hacerle explícito a R qué es qué. Para esto tenemos como ayuda la tabla presentada anteriormente.</p>
<p>Un ejemplo podría ser el siguiente:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1">otras_fechas <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2feb2016"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"18jun1990"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"7nov1995"</span>)</span>
<span id="cb23-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">strptime</span>(otras_fechas,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%d%b%Y"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2016-02-02 MST" "1990-06-18 MDT" "1995-11-07 MST"</code></pre>
</div>
</div>
<p><strong>¿Qué hicimos?</strong></p>
<p>Leímos un conjunto de fechas que tenían un formato de día, seguido del nombre del mes y por último el año completo y se lo hicimos saber a R indicándole %día, luego %mes y por último %año.</p>
<p>Ahora cada vez que tengamos fechas, sabremos que debemos indicarle a R qué contienen esos datos y qué es qué guiándonos con la tabla provista.</p>
</section>
</section>
<section id="cálculos-con-el-tiempo" class="level1">
<h1>Cálculos con el tiempo:</h1>
<p>Para tener la diferencia entre dos fechas, podemos echar mano de la función <code>difftime()</code>. Hay que tomar en cuenta que esta función nos devuelve un objeto de clase <em>difftime</em></p>
<section id="diferencias-entre-fechas-en-un-vector" class="level2">
<h2 class="anchored" data-anchor-id="diferencias-entre-fechas-en-un-vector">Diferencias entre fechas en un vector</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Primero hacemos un objeto a clase difftime:</span></span>
<span id="cb25-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.difftime</span>(otras_fechas, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%d%b%Y"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time differences in days
[1]  -2415 -11775  -9807</code></pre>
</div>
</div>
</section>
<section id="cálculos-con-dos-objetos" class="level2">
<h2 class="anchored" data-anchor-id="cálculos-con-dos-objetos">Cálculos con dos objetos:</h2>
<p>Hay cálculos que se pueden generar con fechas y horas, ya sea sumando a una fecha o a una hora un número (que representará segundos), también entre fechas/horas e inclusive la utilización de operadores lógicos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># vamos a generar dos fechas:</span></span>
<span id="cb27-2"></span>
<span id="cb27-3">fecha_1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.POSIXlt</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2018-01-01"</span>)</span>
<span id="cb27-4">fecha_2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.POSIXlt</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2017-01-02"</span>)</span></code></pre></div>
</div>
<ul>
<li>Y podemos sumar una fecha con un número:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb28" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1">fecha_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100000</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2018-01-02 03:46:40 MST"</code></pre>
</div>
</div>
<p>Esto nos suma cien mil segundos, lo cual agrega 3 horas, 46 minutos y 40 segundos a la fecha que habíamos creado.</p>
<ul>
<li>Podemos resta esa misma cantidad de segundos:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb30" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1">fecha_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100000</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2017-12-30 20:13:20 MST"</code></pre>
</div>
</div>
<p>Vemos que nos devuelve al 30 de diciembre del 2017 a las 20 con 13 minutos y 20 segundos.</p>
<ul>
<li>Restarle a la fecha 1 la fecha 2:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb32" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1">fecha_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> fecha_2</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time difference of 364 days</code></pre>
</div>
</div>
<p>Nos dice que entre las fechas hay 364 días.</p>
<ul>
<li>Hacer una operación lógica:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb34" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1">fecha_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> fecha_2</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>Si decimos que <code>fecha_1</code> es <em>menor o igual</em> <code>que fecha_2</code> R nos dice que eso es falso.</p>
</section>
<section id="diferencia-de-días" class="level2">
<h2 class="anchored" data-anchor-id="diferencia-de-días">Diferencia de días:</h2>
<p>Si tenemos una pregunta como: ¿Cuántos días han transcurrido desde el 1 de diciembre del 2017 al 2 de enero del 2018?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">difftime</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2018-01-02"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2017-12-01"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time difference of 32 days</code></pre>
</div>
</div>
<p>La respuesta es que han transcurrido 32 días.</p>
</section>
<section id="diferencia-de-horas" class="level2">
<h2 class="anchored" data-anchor-id="diferencia-de-horas">Diferencia de horas:</h2>
<p>En este caso, si tenemos horas en lugar de fechas, podemos hacer uso de la función <code>as.difftime()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1">tiempo_1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.difftime</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"12:00:00"</span>)</span>
<span id="cb38-2">tiempo_2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.difftime</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"17:20:00"</span>)</span>
<span id="cb38-3">tiempo_2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> tiempo_1</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time difference of 5.333333 hours</code></pre>
</div>
</div>
<p>Nos dice cuál es la diferencia en horas. (Si te preguntas porqué 5.33 en lugar de 5 horas y 20 minutos, recuerde que la respuesta está dada en horas y 20 minutos corresponden a 0.333 horas)</p>
</section>
</section>
<section id="generación-de-secuencias-con-tiempo" class="level1">
<h1>Generación de secuencias con tiempo:</h1>
<p>Si queremos generar secuencias de fechas, años, meses, semanas etc, en R lo podemos realizar sin mucho problema:</p>
<section id="secuencia-en-aumento-por-día" class="level2">
<h2 class="anchored" data-anchor-id="secuencia-en-aumento-por-día">Secuencia en aumento por día:</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb40" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.POSIXlt</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2018-01-01"</span>), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.POSIXlt</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2018-01-10"</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1 day"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "2018-01-01 MST" "2018-01-02 MST" "2018-01-03 MST" "2018-01-04 MST"
 [5] "2018-01-05 MST" "2018-01-06 MST" "2018-01-07 MST" "2018-01-08 MST"
 [9] "2018-01-09 MST" "2018-01-10 MST"</code></pre>
</div>
</div>
<p><strong>¿Qué hicimos?</strong> La función <code>seq()</code> nos genera un vector con una serie de valores de una secuencia, en este caso le indicamos dos elementos de tipo <code>POSIXlt</code> que corresponden a fechas y un último argumento que indica 1 día. Es decir, que del 1ero de enero del 2018 al 10 de enero del 2018 queremos una secuencia entre esas fechas que aumente de 1 día en 1 día.</p>
</section>
<section id="secuencia-en-aumento-por-semanas" class="level2">
<h2 class="anchored" data-anchor-id="secuencia-en-aumento-por-semanas">Secuencia en aumento por semanas:</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb42" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.POSIXlt</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2018-01-01"</span>), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.POSIXlt</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2018-02-01"</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1 weeks"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2018-01-01 MST" "2018-01-08 MST" "2018-01-15 MST" "2018-01-22 MST"
[5] "2018-01-29 MST"</code></pre>
</div>
</div>
<p><strong>¿Qué hicimos?</strong> Nuevamente indicamos un par de fechas que delimitan el inicio y el final de la secuencia y por último le decimos que la secuencia aumente de semana en semana.</p>
<p>Esto lo podemos hacer de igual manera si queremos que la secuencia aumente por meses <code>months</code> o por años <code>year</code></p>
</section>
<section id="secuencia-en-aumento-por-tiempo-en-segundos" class="level2">
<h2 class="anchored" data-anchor-id="secuencia-en-aumento-por-tiempo-en-segundos">Secuencia en aumento por tiempo en segundos:</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb44" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.POSIXlt</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2018-01-01"</span>),<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.POSIXlt</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2018-01-02"</span>),<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8000</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "2018-01-01 00:00:00 MST" "2018-01-01 02:13:20 MST"
 [3] "2018-01-01 04:26:40 MST" "2018-01-01 06:40:00 MST"
 [5] "2018-01-01 08:53:20 MST" "2018-01-01 11:06:40 MST"
 [7] "2018-01-01 13:20:00 MST" "2018-01-01 15:33:20 MST"
 [9] "2018-01-01 17:46:40 MST" "2018-01-01 20:00:00 MST"
[11] "2018-01-01 22:13:20 MST"</code></pre>
</div>
</div>
<p>En este caso 8000 <strong>segundos</strong> nos genera un aumento de 2 horas, 13 minutos y 20 segundos en cada elemento de la secuencia.</p>
</section>
<section id="secuencia-sin-especificación-de-final" class="level2">
<h2 class="anchored" data-anchor-id="secuencia-sin-especificación-de-final">Secuencia sin especificación de final:</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb46" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.POSIXlt</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2018-01-01"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"weeks"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">length =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2018-01-01 MST" "2018-01-08 MST" "2018-01-15 MST" "2018-01-22 MST"
[5] "2018-01-29 MST" "2018-02-05 MST" "2018-02-12 MST"</code></pre>
</div>
</div>
<p><strong>¿Qué hicimos?</strong> Generamos nuevamente una secuencia en donde sólo le indicamos la fecha en la que debe de iniciar, seguido del argumento semanas y por último la cantidad de objetos que debería de crear. Es decir, el final está generado por la cantidad (<code>length</code>) de elementos que queremos en esa secuencia.</p>
</section>
</section>
<section id="recuento." class="level1">
<h1>Recuento.</h1>
<p>¡Listo! Si has llegado hasta este punto, felicidades. Espero que haya comprendido mejor cómo trabajar y manejar este tipo de dato para sus propios análisis.</p>
<p>Hasta acá hemos visto cuáles son los tipos y la clase de las fechas y horas en R, la diferencia entre las dos manera de <code>POSIX</code> de representar las fechas u horas. También revisamos la manera en que se pueden leer archivos o conjuntos de datos que contengan elementos que corresponden a fechas y cómo indicarle a R el formato de fecha y hora que se está trabajando. Así mismo vimos cómo hacer algunos cálculos con datos de tiempo y por último la generación de secuencias.</p>
<p>Pero esto no es todo. Hay una segunda parte, en donde veremos cómo hacer un análisis de datos utilizando fechas y horas, tal como una regresión o un ANOVA.</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div id="quarto-reuse" class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{a. hernandez mora2018,
  author = {A. Hernandez Mora, Ronny},
  title = {Tiempo En {R}},
  date = {2018-03-14},
  url = {https://ronnyale.com/posts/2021-12-11-tiempo-en-r},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-a. hernandez mora2018" class="csl-entry quarto-appendix-citeas">
A. Hernandez Mora, Ronny. 2018. <span>“Tiempo En R.”</span> March 14,
2018. <a href="https://ronnyale.com/posts/2021-12-11-tiempo-en-r">https://ronnyale.com/posts/2021-12-11-tiempo-en-r</a>.
</div></div></section></div> ]]></description>
  <category>Base R</category>
  <guid>https://ronnyale.com/posts/2021-12-11-tiempo-en-r/index.html</guid>
  <pubDate>Wed, 14 Mar 2018 06:00:00 GMT</pubDate>
  <media:content url="https://ronnyale.com/posts/2021-12-11-tiempo-en-r/images/time.png" medium="image" type="image/png" height="144" width="144"/>
</item>
<item>
  <title>Intro a datos y estructuras en R</title>
  <dc:creator>Ronny A. Hernandez Mora</dc:creator>
  <link>https://ronnyale.com/posts/2021-12-11-estructuras-r/index.html</link>
  <description><![CDATA[ 




<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ---</span></span>
<span id="cb1-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># title: "Intro a datos y estructuras en R"</span></span>
<span id="cb1-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># description: |</span></span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   Una breve intro a estructuras en R.</span></span>
<span id="cb1-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># author:</span></span>
<span id="cb1-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   - name: Ronny A. Hernández Mora</span></span>
<span id="cb1-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#     url: http://ronnyhdez.rbind.io/</span></span>
<span id="cb1-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># date: 2018-02-01</span></span>
<span id="cb1-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># creative_commons: CC BY-NC</span></span>
<span id="cb1-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># preview: images/structure.png</span></span>
<span id="cb1-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># twitter:</span></span>
<span id="cb1-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   creator: "@RonnyHdezM"</span></span>
<span id="cb1-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># output:</span></span>
<span id="cb1-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   distill::distill_article:</span></span>
<span id="cb1-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#     self_contained: true</span></span>
<span id="cb1-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ---</span></span></code></pre></div>
</div>
<section id="datos-y-estructuras" class="level1">
<h1>Datos y Estructuras</h1>
<p>Este pequeño e introductorio tutorial consiste en explicar cómo R en su entorno “entiende” los datos (objetos), es decir sus clases y además cómo los almacena en ese entorno. Entender este tipo de cosas básicas en R nos podrán ahorrar dolores de cabeza en futuros análisis de datos que hagamos.</p>
<section id="primer-paso" class="level2">
<h2 class="anchored" data-anchor-id="primer-paso">Primer paso:</h2>
<p>Primero tenemos que entender que R lee los datos que le damos de distintas maneras para poder manejarlos y hacer tareas que le pidamos. Entre estos tenemos:</p>
<ul>
<li><em>character</em>: corresponden a texto</li>
<li><em>numeric</em>: corresponden a números</li>
<li><em>integer</em>: son números enteros (sin decimales)</li>
<li><em>logical</em>: son condicionales y están en forma de verdadero o falso</li>
<li><em>complex</em>: corresponden a números complejos</li>
</ul>
<p>Para crear vectores c( )</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1">a <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"biologia"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"A"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"estadistica"</span>)</span>
<span id="cb2-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">class</span>(a)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1">b <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">18.6</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">90</span>)</span>
<span id="cb4-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">class</span>(b)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1">c <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(18L, 26L)</span>
<span id="cb6-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">class</span>(c)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1">d <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> 4i</span>
<span id="cb8-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">class</span>(d)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "complex"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1">e <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span>
<span id="cb10-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">class</span>(e)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "logical"</code></pre>
</div>
</div>
</section>
</section>
<section id="para-qué-sirven-los-tipos-de-datos" class="level1">
<h1>¿Para qué sirven los tipos de datos?</h1>
<p>Hay ciertas cosas que se deben de tomar en cuenta a la hora de trabajar con datos en R, y es que estos son guardados en estructuras. Es decir, R “acomoda” esos datos en formas que los puede manejar.</p>
<p>Estos son algunos ejemplos rápidos:</p>
<section id="vectores-elementos-son-del-mismo-tipo" class="level2">
<h2 class="anchored" data-anchor-id="vectores-elementos-son-del-mismo-tipo">Vectores elementos son del mismo tipo</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1">v_1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>)</span>
<span id="cb12-2">v_2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"a"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"b"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"c"</span>)</span>
<span id="cb12-3">v_3 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,<span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,<span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span></code></pre></div>
</div>
</section>
<section id="listas-elementos-son-de-diferente-tipo" class="level2">
<h2 class="anchored" data-anchor-id="listas-elementos-son-de-diferente-tipo">Listas elementos son de diferente tipo</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1">l_1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(v_1,v_2,v_3)</span>
<span id="cb13-2"></span>
<span id="cb13-3">l_1</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 10 20 30

[[2]]
[1] "a" "b" "c"

[[3]]
[1]  TRUE FALSE  TRUE</code></pre>
</div>
</div>
</section>
<section id="matrix-es-de-dos-dimensiones-con-elementos-del-mismo-tipo" class="level2">
<h2 class="anchored" data-anchor-id="matrix-es-de-dos-dimensiones-con-elementos-del-mismo-tipo">matrix es de dos dimensiones con elementos del mismo tipo:</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1">matrix_1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">matrix</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nrow =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ncol =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span>
<span id="cb15-2">matrix_1</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9</code></pre>
</div>
</div>
</section>
<section id="data-frame-es-de-dos-dimensiones-con-elementos-de-diferente-tipo" class="level2">
<h2 class="anchored" data-anchor-id="data-frame-es-de-dos-dimensiones-con-elementos-de-diferente-tipo">data frame es de dos dimensiones con elementos de diferente tipo:</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Primero creamos un par de vectores para unirlos en un dataframe</span></span>
<span id="cb17-2">numero <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb17-3">nombre <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Mercurio"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Venus"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tierra"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Marte"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Jupiter"</span>)</span>
<span id="cb17-4">planeta <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(numero,nombre)</span>
<span id="cb17-5">planeta</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  numero   nombre
1      1 Mercurio
2      2    Venus
3      3   Tierra
4      4    Marte
5      5  Jupiter</code></pre>
</div>
</div>
</section>
<section id="array-es-una-estructura-de-tres-o-más-dimensiones" class="level2">
<h2 class="anchored" data-anchor-id="array-es-una-estructura-de-tres-o-más-dimensiones">Array es una estructura de tres o más dimensiones:</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1">D <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span></span>
<span id="cb19-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dim</span>(D) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Dos filas, tres columnas y dos "caras"</span></span>
<span id="cb19-3">D</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>, , 1

     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6

, , 2

     [,1] [,2] [,3]
[1,]    7    9   11
[2,]    8   10   12</code></pre>
</div>
</div>
</section>
</section>
<section id="maneras-de-coercionar-las-clases" class="level1">
<h1>Maneras de coercionar las clases</h1>
<p>Hay ocasiones en las cuales R podría confundir lo que nosotros consideramos un dato de cierto tipo, por ejemplo un número lo podría leer como un carácter. A la hora de hacer algunos cálculos habrán problemas.</p>
<p>Pero existe una solución y esto es coercionar los tipos de los datos. Esto se puede hacer tal como se muestra en los siguientes ejemplos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1">biolo_vector <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">40</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"A"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">80</span>)</span>
<span id="cb21-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">class</span>(biolo_vector)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1">z <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.numeric</span>(biolo_vector)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: NAs introduced by coercion</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1">z</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 20 40 NA 80</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1">biolo_vector <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">40</span>, <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">80</span>)</span>
<span id="cb27-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">class</span>(biolo_vector)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1">biolo_vector</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 20 40  1 80</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1">biolo_vector <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span>)</span>
<span id="cb31-2">bv_1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.character</span>(biolo_vector)</span>
<span id="cb31-3">bv_2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.logical</span>(biolo_vector)</span>
<span id="cb31-4">bv_3 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.complex</span>(biolo_vector)</span>
<span id="cb31-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">class</span>(bv_1)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">class</span>(bv_2)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "logical"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">class</span>(bv_3)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "complex"</code></pre>
</div>
</div>
</section>
<section id="exploración-datos" class="level1">
<h1>Exploración datos:</h1>
<p>Cuando traemos datos a R hay una manera fácil de visualizar su estructura o forma sin tener que acudir al documento original. A continuación mostramos una serie de ejemplos en los cuales se m</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dir</span>()                              <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ver que tengo en el wd</span></span>
<span id="cb37-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(data)                         <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Ver primeros 6 observaciones</span></span>
<span id="cb37-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tail</span>(data)                         <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># últimas 6 observaciones</span></span>
<span id="cb37-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str</span>(data)                          <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># estructura del data.frame</span></span>
<span id="cb37-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dim</span>(data)                          <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># dimensiones (rows &amp; columns)</span></span>
<span id="cb37-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(data)                        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># nombres columnas</span></span>
<span id="cb37-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glimpse</span>(data)                      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># paquete diplyr</span></span>
<span id="cb37-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(data)                      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># resumen de cada variable</span></span></code></pre></div>
</div>
<section id="qué-siginifica-dir-y-ls" class="level2">
<h2 class="anchored" data-anchor-id="qué-siginifica-dir-y-ls">¿Qué siginifica dir() y ls()?</h2>
<p>dir () me refiere a los archivos que se encuentran en el directorio de trabajo. ls () me refiere a los objetos que se encuentran en el espacio de trabajo</p>
</section>
</section>
<section id="comprensión-de-un-data-frame-y-su-estructura" class="level1">
<h1>Comprensión de un data frame y su estructura</h1>
<p>Para comprender mejor vamos a construir un data.frame de manera rápida y simple:</p>
</section>
<section id="creamos-los-vectores-a-unir" class="level1">
<h1>Creamos los vectores a unir:</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb38" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1">primer_nombre <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Isaac"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Charles"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Rosalind"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Marie"</span>) </span>
<span id="cb38-2"></span>
<span id="cb38-3">segundo_nombre <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Newton"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Darwin"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Franklin"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Curie"</span>)</span>
<span id="cb38-4"></span>
<span id="cb38-5">edad_muerte <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">84</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">73</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">37</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">66</span>)</span>
<span id="cb38-6"></span>
<span id="cb38-7">campo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Física"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Biología"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Química"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Física"</span>)</span>
<span id="cb38-8"></span>
<span id="cb38-9">fecha_muerte <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.Date</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1643-1-4"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1882-4-19"</span>,</span>
<span id="cb38-10">                        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1958-4-16"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1934-7-4"</span>))</span></code></pre></div>
</div>
</section>
<section id="unimos-cada-uno-de-los-vectores-en-un-data.frame" class="level1">
<h1>Unimos cada uno de los vectores en un data.frame</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb39" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1">cientificos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(primer_nombre, segundo_nombre,</span>
<span id="cb39-2">                          edad_muerte, campo, fecha_muerte)</span></code></pre></div>
</div>
</section>
<section id="revisemos-estructura-igual-que-en-caso-anterior" class="level1">
<h1>Revisemos estructura igual que en caso anterior</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb40" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(cientificos)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  primer_nombre segundo_nombre edad_muerte    campo fecha_muerte
1         Isaac         Newton          84   Física   1643-01-04
2       Charles         Darwin          73 Biología   1882-04-19
3      Rosalind       Franklin          37  Química   1958-04-16
4         Marie          Curie          66   Física   1934-07-04</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str</span>(cientificos)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   4 obs. of  5 variables:
 $ primer_nombre : chr  "Isaac" "Charles" "Rosalind" "Marie"
 $ segundo_nombre: chr  "Newton" "Darwin" "Franklin" "Curie"
 $ edad_muerte   : num  84 73 37 66
 $ campo         : chr  "Física" "Biología" "Química" "Física"
 $ fecha_muerte  : Date, format: "1643-01-04" "1882-04-19" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#glimpse(cientificos) con librería dplyr</span></span></code></pre></div>
</div>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div id="quarto-reuse" class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{a. hernandez mora2018,
  author = {A. Hernandez Mora, Ronny},
  title = {Intro a Datos y Estructuras En {R}},
  date = {2018-02-01},
  url = {https://ronnyale.com/posts/2021-12-11-estructuras-r},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-a. hernandez mora2018" class="csl-entry quarto-appendix-citeas">
A. Hernandez Mora, Ronny. 2018. <span>“Intro a Datos y Estructuras En
R.”</span> February 1, 2018. <a href="https://ronnyale.com/posts/2021-12-11-estructuras-r">https://ronnyale.com/posts/2021-12-11-estructuras-r</a>.
</div></div></section></div> ]]></description>
  <category>Base R</category>
  <guid>https://ronnyale.com/posts/2021-12-11-estructuras-r/index.html</guid>
  <pubDate>Thu, 01 Feb 2018 07:00:00 GMT</pubDate>
  <media:content url="https://ronnyale.com/posts/2021-12-11-estructuras-r/images/structure.png" medium="image" type="image/png" height="81" width="144"/>
</item>
<item>
  <title>Datos abiertos municipalidad de San José, Costa Rica</title>
  <dc:creator>Ronny A. Hernandez Mora</dc:creator>
  <dc:creator>Erick Calderon Morales</dc:creator>
  <link>https://ronnyale.com/posts/2021-12-11-datos-abiertos-muni-sanjose/index.html</link>
  <description><![CDATA[ 




<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ---</span></span>
<span id="cb1-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># title: "Datos abiertos municipalidad de San José, Costa Rica"</span></span>
<span id="cb1-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># description: |</span></span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   Una introducción al uso del API de datos abiertos de la muni de San José</span></span>
<span id="cb1-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># author:</span></span>
<span id="cb1-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   - name: Ronny A. Hernández Mora</span></span>
<span id="cb1-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#     url: http://ronnyhdez.rbind.io/</span></span>
<span id="cb1-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   - name: Erick Calderón Morales</span></span>
<span id="cb1-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#     url: https://github.com/ecamo19</span></span>
<span id="cb1-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># date: 2018-01-13 </span></span>
<span id="cb1-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># creative_commons: CC BY-NC</span></span>
<span id="cb1-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># preview: images/city.png</span></span>
<span id="cb1-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># twitter:</span></span>
<span id="cb1-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   creator: "@RonnyHdezM"</span></span>
<span id="cb1-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># output:</span></span>
<span id="cb1-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   distill::distill_article:</span></span>
<span id="cb1-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#     self_contained: true</span></span>
<span id="cb1-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ---</span></span></code></pre></div>
</div>
<p>Gracias a la iniciativa de <a href="http://www.gobiernoabierto.go.cr/">Gobierno Abierto</a> de Costa Rica tenemos la posibilidad de obtener datos de diferentes entes a través de la conexión con API’s.</p>
<p>Esto nos da la posibilidad de no pasar por engorrosos procesos de limpiar datos a partir de formatos casi imposibles como pdf’s, .csv extravagantes u otros formatos difíciles de trabajar.</p>
<p>En este caso vamos a utilizar el lenguaje de programación R y el paquete <a href="https://cran.r-project.org/web/packages/junr/index.html">junr</a> de <a href="https://github.com/FvD">Frans van Dunné</a> para conectarnos al API de la municipalidad de San José y revisar qué datos se encuentran disponibles.</p>
<section id="obtener-el-api-key-de-la-municipalidad-de-san-josé" class="level3">
<h3 class="anchored" data-anchor-id="obtener-el-api-key-de-la-municipalidad-de-san-josé">Obtener el API key de la municipalidad de San José</h3>
<p>En la siguiente <a href="http://datosabiertos.msj.go.cr/developers/">dirección</a> podrá encontrar el API key necesario para hacer el llamado.</p>
<p>Vamos a crear como objetos nuestras credenciales para hacer la conexión al API de la municipalidad de San José. El url que aparece acá es el que se debe de usar para conectarnos al sistema de la muni de San José. Si están siguiendo ete ejemplo pueden escribir el mismo que aparece acá.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1">url_base <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"http://api.datosabiertos.msj.go.cr/api/v2/datastreams/"</span></span>
<span id="cb2-2">api_key <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> SU_API_KEY</span></code></pre></div>
</div>
</section>
<section id="obtener-el-indice-de-las-tablas" class="level3">
<h3 class="anchored" data-anchor-id="obtener-el-indice-de-las-tablas">Obtener el indice de las tablas</h3>
<p>Ya que tenemos las credenciales listas (api key &amp; url), vamos a revisar el índice de las tablas de datos que la municipalidad ha liberado:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Traemos el indice  de los datos que existen</span></span>
<span id="cb3-2">indice <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_index</span>(url_base, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">api_key =</span> api_key)</span>
<span id="cb3-3"></span>
<span id="cb3-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Revisamos estructura del objeto </span></span>
<span id="cb3-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glimpse</span>(indice)</span>
<span id="cb3-6"></span>
<span id="cb3-7"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Observations: 257</span></span>
<span id="cb3-8"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Variables: 18</span></span>
<span id="cb3-9"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ status          &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span id="cb3-10"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ description     &lt;chr&gt; "Valor absoluto y Tasa por 100.000 2006 - 2014",…</span></span>
<span id="cb3-11"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ parameters      &lt;list&gt; [[], [], [], [], [], [], [], [], [], [], [], []…</span></span>
<span id="cb3-12"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ tags            &lt;list&gt; [&lt;"san jose", "municipalidad", "muertes violent…</span></span>
<span id="cb3-13"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ timestamp       &lt;dbl&gt; 1.547586e+12, 1.539808e+12, 1.516222e+12, 1.5162…</span></span>
<span id="cb3-14"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ created_at      &lt;int&gt; 1547586293, 1539744226, 1516221668, 1516220839, …</span></span>
<span id="cb3-15"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ title           &lt;chr&gt; "Cantidad y Tasa de muertes violentas", "Densida…</span></span>
<span id="cb3-16"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ modified_at     &lt;int&gt; 1547586492, 1539808089, 1516221733, 1516221641, …</span></span>
<span id="cb3-17"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ category_id     &lt;chr&gt; "83642", "83639", "83481", "83481", "83482", "83…</span></span>
<span id="cb3-18"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ methods         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span id="cb3-19"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ sources         &lt;list&gt; [&lt;&gt;, &lt;"Municipalidad de San José", "Instituto N…</span></span>
<span id="cb3-20"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ total_revisions &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span id="cb3-21"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ frequency       &lt;chr&gt; "", "ondemand", "", "", "", "ondemand", "ondeman…</span></span>
<span id="cb3-22"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ link            &lt;chr&gt; "http://datosabiertos.msj.go.cr/dataviews/250481…</span></span>
<span id="cb3-23"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ user            &lt;chr&gt; "sanjose", "sanjose", "sanjose", "sanjose", "Msj…</span></span>
<span id="cb3-24"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ status_str      &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span id="cb3-25"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ guid            &lt;chr&gt; "CANTI-Y-TASA-DE-92062", "DENSI-DE-POBLA-POR-DIS…</span></span>
<span id="cb3-26"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ category_name   &lt;chr&gt; "Características Sociales", "Demografía", "Educa…</span></span></code></pre></div>
</div>
<p>Cada uno de los elementos que allí aparecen son distintas tablas que pueden tener diferentes dimensiones (filas y columnas). Es como una descripción de lo que trata cada tabla. Si queremos traer a nuestro entorno los datos de una tabla en específico tenemos que hacerlo con su <strong>GUID</strong>.</p>
<p>De toda la tabla que llamamos en el paso anterior, vamos a hacer una selección de dos columnas: título y el GUID</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1">guid <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> indice <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb4-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(title, guid)</span>
<span id="cb4-3"></span>
<span id="cb4-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glimpse</span>(guid)</span>
<span id="cb4-5"></span>
<span id="cb4-6"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Observations: 257</span></span>
<span id="cb4-7"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Variables: 2</span></span>
<span id="cb4-8"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ title &lt;chr&gt; "Cantidad y Tasa de muertes violentas", "Densidad de Pobla…</span></span>
<span id="cb4-9"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ guid  &lt;chr&gt; "CANTI-Y-TASA-DE-92062", "DENSI-DE-POBLA-POR-DISTR", "DIST…</span></span></code></pre></div>
</div>
</section>
<section id="obtener-las-dimensiones-de-las-tablas" class="level3">
<h3 class="anchored" data-anchor-id="obtener-las-dimensiones-de-las-tablas">Obtener las dimensiones de las tablas</h3>
<p>Ahora bien, ya sabemos el título y el identificador de la tabla, pero tenemos que tener cuidado. Son muchas tablas y algunas pueden estar vacías, ser datos resumidos o con muy pocos datos que no nos servirían de nada.</p>
<p>Por suerte el paquete <strong>junr</strong> tiene una función que nos muestra la dimensión de las tablas, lo cual nos da mayor información sobre las características que tiene.</p>
<p>Hay que aclarar que la municipalidad de San José tiene muchas tablas y si usamos la función para obtener las dimensiones se puede demorar sus minutos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Por la cantidad de tablas que hay, esta funcion se demora mucho</span></span>
<span id="cb5-2">dimensiones <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_dimensions</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">base_url =</span> url_base, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">api_key =</span> api_key)</span>
<span id="cb5-3"></span>
<span id="cb5-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Mostrar primeras seis observaciones</span></span>
<span id="cb5-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(dimensiones)</span>
<span id="cb5-6"></span>
<span id="cb5-7"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##                          GUID NROW NCOL DIM</span></span>
<span id="cb5-8"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 2       CANTI-Y-TASA-DE-92062    6   10  60</span></span>
<span id="cb5-9"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 21   DENSI-DE-POBLA-POR-DISTR   15   12 180</span></span>
<span id="cb5-10"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 3  DISTR-RELAT-DE-ESTUD-MATRI   12   10 120</span></span>
<span id="cb5-11"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 4  DISTR-DE-ESTUD-MATRI-77173   12   10 120</span></span>
<span id="cb5-12"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 5        POA-PRESU-ORDIN-2018  119    3 357</span></span>
<span id="cb5-13"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 6     INVER-EN-COLON-EN-43060    7    6  42</span></span></code></pre></div>
</div>
<section id="cuadro-con-características-de-las-tablas-de-la-muni-de-sj" class="level4">
<h4 class="anchored" data-anchor-id="cuadro-con-características-de-las-tablas-de-la-muni-de-sj">Cuadro con características de las tablas de la muni de SJ</h4>
<p>Ya que tenemos las dimensiones de las tablas, podemos acomodar la información que hemos extraido hasta el momento de tal manera que tengamos un cuadro final con la información importante resumida: el título de la tabla, el GUID y las dimensiones.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Unir el titulo a dimensiones</span></span>
<span id="cb6-2">dimensiones <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(dimensiones, guid, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"GUID"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"guid"</span>))</span>
<span id="cb6-3"></span>
<span id="cb6-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Ordenar tablas con mayores dimensiones</span></span>
<span id="cb6-5">dim_ordenado <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> dimensiones <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb6-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(DIM))</span>
<span id="cb6-7"></span>
<span id="cb6-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Revisar primeras entradas</span></span>
<span id="cb6-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(dim_ordenado)</span>
<span id="cb6-10"></span>
<span id="cb6-11"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##                         GUID NROW NCOL DIM</span></span>
<span id="cb6-12"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 1          ASIST-EDUCA-SUPER  108    9 972</span></span>
<span id="cb6-13"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 2                DEFUN-28990   64   13 832</span></span>
<span id="cb6-14"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 3                DEFUN-43464   64   13 832</span></span>
<span id="cb6-15"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 4                NACIM-43692   64   13 832</span></span>
<span id="cb6-16"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 5 DISTR-DE-POBLA-OCUPA-56023   52   11 572</span></span>
<span id="cb6-17"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 6 DISTR-DE-POBLA-OCUPA-36314   52   11 572</span></span>
<span id="cb6-18"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##                                                                title</span></span>
<span id="cb6-19"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 1                                      Asistencia Educación Superior</span></span>
<span id="cb6-20"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 2                                                        Defunciones</span></span>
<span id="cb6-21"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 3                                                        Defunciones</span></span>
<span id="cb6-22"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 4                                                        Nacimientos</span></span>
<span id="cb6-23"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 5 Distribución de población ocupada por Grupo Ocupacional (Relativo)</span></span>
<span id="cb6-24"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 6            Distribución de población ocupada por Grupo Ocupacional</span></span></code></pre></div>
</div>
</section>
</section>
<section id="llamar-datos-de-una-tabla-específica" class="level3">
<h3 class="anchored" data-anchor-id="llamar-datos-de-una-tabla-específica">Llamar datos de una tabla específica:</h3>
<p>Ya con esto podemos hacer una mejor selección de las tablas que nos serían útiles. Cuando ya tengamos identificada una tabla tenemos que anotar su GUID que utilizaremos en la función:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Anotar en un objeto el GUID de la tabla que nos interesa</span></span>
<span id="cb7-2">guid_tabla <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ASIST-EDUCA-SUPER"</span></span>
<span id="cb7-3"></span>
<span id="cb7-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Llamar la tabla. Usamos las mismas credenciales que habíamos usado</span></span>
<span id="cb7-5">asist_educacion <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_data</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">base_url =</span> url_base, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">api_key =</span> SU_API_KEY, </span>
<span id="cb7-6">                            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">guid =</span> guid_tabla)</span></code></pre></div>
</div>
<p>¡Listo! Ya tenemos nuestra tabla de interés con los datos. Vamos a revisarla</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(asist_educacion)</span>
<span id="cb8-2"></span>
<span id="cb8-3"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##   Distrito   Sexo Tenencia de título Parauniversitaria Universitaria Total</span></span>
<span id="cb8-4"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 2 San José Hombre                 Sí              1951         24058 26009</span></span>
<span id="cb8-5"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 3 San José Hombre                 No               653          3498  4151</span></span>
<span id="cb8-6"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 4 San José Hombre              Total              2604         27556 30160</span></span>
<span id="cb8-7"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 5 San José  Mujer                 Sí              2599         26085 28684</span></span>
<span id="cb8-8"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 6 San José  Mujer                 No               924          4092  5016</span></span>
<span id="cb8-9"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 7 San José  Mujer              Total              3523         30177 33700</span></span>
<span id="cb8-10"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##   Población de 17 años y más</span></span>
<span id="cb8-11"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 2                           </span></span>
<span id="cb8-12"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 3                           </span></span>
<span id="cb8-13"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 4                     100238</span></span>
<span id="cb8-14"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 5                           </span></span>
<span id="cb8-15"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 6                           </span></span>
<span id="cb8-16"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 7                     116461</span></span>
<span id="cb8-17"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##   Porcentaje de población con educación superior</span></span>
<span id="cb8-18"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 2                                               </span></span>
<span id="cb8-19"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 3                                               </span></span>
<span id="cb8-20"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 4                                           30.1</span></span>
<span id="cb8-21"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 5                                               </span></span>
<span id="cb8-22"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 6                                               </span></span>
<span id="cb8-23"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 7                                           28.9</span></span>
<span id="cb8-24"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##   Porcentaje de población con educación superior y título</span></span>
<span id="cb8-25"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 2                                                        </span></span>
<span id="cb8-26"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 3                                                        </span></span>
<span id="cb8-27"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 4                                                    86.2</span></span>
<span id="cb8-28"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 5                                                        </span></span>
<span id="cb8-29"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 6                                                        </span></span>
<span id="cb8-30"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 7                                                    85.1</span></span>
<span id="cb8-31"></span>
<span id="cb8-32"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glimpse</span>(asist_educacion)</span>
<span id="cb8-33"></span>
<span id="cb8-34"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Observations: 108</span></span>
<span id="cb8-35"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Variables: 9</span></span>
<span id="cb8-36"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ Distrito                                                  &lt;fct&gt; San Jo…</span></span>
<span id="cb8-37"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ Sexo                                                      &lt;fct&gt; Hombre…</span></span>
<span id="cb8-38"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ `Tenencia de título`                                      &lt;fct&gt; Sí, No…</span></span>
<span id="cb8-39"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ Parauniversitaria                                         &lt;fct&gt; 1951, …</span></span>
<span id="cb8-40"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ Universitaria                                             &lt;fct&gt; 24058,…</span></span>
<span id="cb8-41"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ Total                                                     &lt;fct&gt; 26009,…</span></span>
<span id="cb8-42"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ `Población de 17 años y más`                              &lt;fct&gt; , , 10…</span></span>
<span id="cb8-43"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ `Porcentaje de población con educación superior`          &lt;fct&gt; , , 30…</span></span>
<span id="cb8-44"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## $ `Porcentaje de población con educación superior y título` &lt;fct&gt; , , 86…</span></span></code></pre></div>
</div>
</section>
<section id="referencias" class="level2">
<h2 class="anchored" data-anchor-id="referencias">Referencias</h2>
<ul>
<li><a href="https://cran.r-project.org/web/packages/junr/vignettes/acceder-junar-api.html">vignette del paquete junr</a></li>
<li><a href="http://datosabiertos.msj.go.cr/developers/">Página desarrolladores Municipalidad de San José</a></li>
<li><a href="http://www.gobiernoabierto.go.cr/">Gobierno abierto Costa Rica</a></li>
</ul>
</section>
<section id="querés-revisar-más-información" class="level2">
<h2 class="anchored" data-anchor-id="querés-revisar-más-información">¿Querés revisar más información?</h2>
<p>Mi compañero <a href="https://github.com/ecamo19">Erick Calderón</a> y yo estamos trabajando en un proyecto donde pretendemos crear más tutoriales sobre uso de datos abiertos del gobierno de Costa Rica a través de API’s y el lenguaje de programación R. Si querés contribuir, tenés preguntas o una idea podés revisar <a href="https://github.com/datos-abiertos-cr">nuestro proyecto en Github</a></p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div id="quarto-reuse" class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{a. hernandez mora2018,
  author = {A. Hernandez Mora, Ronny and Calderon Morales, Erick},
  title = {Datos Abiertos Municipalidad de {San} {José,} {Costa} {Rica}},
  date = {2018-01-13},
  url = {https://ronnyale.com/posts/2021-12-11-datos-abiertos-muni-sanjose},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-a. hernandez mora2018" class="csl-entry quarto-appendix-citeas">
A. Hernandez Mora, Ronny, and Erick Calderon Morales. 2018. <span>“Datos
Abiertos Municipalidad de San José, Costa Rica.”</span> January 13,
2018. <a href="https://ronnyale.com/posts/2021-12-11-datos-abiertos-muni-sanjose">https://ronnyale.com/posts/2021-12-11-datos-abiertos-muni-sanjose</a>.
</div></div></section></div> ]]></description>
  <guid>https://ronnyale.com/posts/2021-12-11-datos-abiertos-muni-sanjose/index.html</guid>
  <pubDate>Sat, 13 Jan 2018 07:00:00 GMT</pubDate>
  <media:content url="https://ronnyale.com/posts/2021-12-11-datos-abiertos-muni-sanjose/images/city.png" medium="image" type="image/png" height="94" width="144"/>
</item>
<item>
  <title>Otra introducción a git</title>
  <dc:creator>Ronny A. Hernandez Mora</dc:creator>
  <link>https://ronnyale.com/posts/2021-12-11-otra-intro-a-git/index.html</link>
  <description><![CDATA[ 




<section id="qué-resuelve-git-porqué-usar-git" class="level2">
<h2 class="anchored" data-anchor-id="qué-resuelve-git-porqué-usar-git">¿Qué resuelve git? ¿Porqué usar git?</h2>
<p>Si les ha sucecido que luego de trabajar en un documento, tienen una carpeta llena con nombres como: “version_final”, “version_final_final”, “version_final_corregida”, “version_final_revisada” pues git les será útil para tener un control sobre los cambios que se introducen en el documento.</p>
<p>En este tutorial haremos ejemplos con scripts de código en R y cómo los cambios que vayamos trabajando, los podemos registrar, usar, guardar y documentar con mayor eficiencia tanto para trabajar individualemente como grupalmente.</p>
</section>
<section id="esquema-de-git" class="level2">
<h2 class="anchored" data-anchor-id="esquema-de-git">Esquema de git</h2>
<p>Aqui pretendo aclarar rapidamente que vamos a hacer con git, tener el bosquejo antes de entrar en detalles. Vamos a tener un repositorio remoto o en inglés upstream que será nuestro repositorio en github/gitlab/bitbucket. De este repositorio tendremos uno local que crearemos al hacer el clon. Siempre vamos a trabajar en repositorio local (en nuestra computadora) y esos cambios los vamos a subir al remoto con un push. De igual manera cambios que existan en el repositorio remoto (porque alguien hizo una contribucion, trabajamos desde otra computadora ys ubimos los cambios) lo vamos a hacer con un pull.</p>
<p>Vamos a tener una <strong>rama</strong> principal llamada <strong>master</strong>. El consejo aca es tener código limpio y funcional. Todo lo que sea trabajo en desarrollo, experimentos, pruebas o tareas específicas, vamos a hacerlo en ramas. Las ramas van a tener el nombre que nosotros decidamos. Los cambios que se encuentran en estas ramas, una vez que se encuentran finalizados, revisados y funcionales los podremos integrar a nuestra rama master en un proceso conocido como <strong>merge</strong></p>
<p>Cada vez que hagamos cambios en el código, vamos a hacer un <strong>commit</strong>. Esto lo podemos interpretar como marcar un punto en la historia del proyecto. Git nos mostrará información sobre cada uno de nuestros commits tal como la fecha, hora, usuario, archivos cambiados y las líneas de los archivos que se cambiaron. La idea de los commits es que siempre podamos retornar a un punto específico en la historia del proyecto.</p>
<p>En el caso de trabajar con el repositorio de alguien más, lo podemos realizar a través de un proceso que se conoce como <strong>fork</strong>, que no es más que una bifurcación del repositorio de esa persona. Al realizar un “fork” del repositorio de otra persona estamos creando una copia de dicho repositorio bajo nuestro usuario. Ahora bien, la manera de ofrecer los cambios que hemos trabajado a la persona dueña del repositorio tiene un proceso algo diferente que veremos en otro tutorial.</p>
</section>
<section id="iniciar-con-git" class="level2">
<h2 class="anchored" data-anchor-id="iniciar-con-git">Iniciar con git</h2>
<p>En este segmento vamos a seguir los pasos para tener un repositorio que tenga su cuenta remota con github/gitlab/bitbucket y local a través de nuestra terminal.</p>
<section id="crear-repositorio-en-githubgitlabbitbucket" class="level4">
<h4 class="anchored" data-anchor-id="crear-repositorio-en-githubgitlabbitbucket">1. Crear repositorio en github/gitlab/bitbucket</h4>
<p>Si tenemos cuenta en github/gitlab/bitbucket podemos crear un repositorio. Le llamamos repositorio al sitio donde vamos a guardar nuestros archivos. Un repositorio lo podemos visualizar como una carpeta que contendrá nuestro trabajo.</p>
<p>Cuando se crea un nuevo repositorio lo recomendable es iniciarlo con un arhivo que se llama <strong>.gitignore</strong> y con un <strong>readme</strong>. Para hacerlo en github (y algo similar en otras plataformas) es que seleccionemos las opciones de iniciar repositorio con un archivo .gitignore y un readme. El archivo gitignore debe de ser específico para la herramienta que vayamos a usar, en este caso sería <em>R</em></p>
<p>La funcionalidad del .gitignore es que este archivo (es como un archvio de texto) contiene especificaciones sobre los formatos de los archivos que no queremos que se integren en nuestro sistema de control de versiones. Generalmente no deseamos que archivos como imagenes (.png .jpeg) o bien archivos de datos muy grandes (.txt .csv .feather) sean compartidos entre repositorios remotos, locales o personas con las que colaboremos. Un ejemplo de un archivo .gitignore es el siguiente:</p>
<p>Si no identifican algunos de los elementos de ahí no hay de qué preocuparse, mejor nos enfocámos en los tipos de archivos que nosotros necesitamos que <strong>NO sean tomados en cuenta por git</strong>, es decir, que no queremos que se suban a nuestro repositorio de github por ejemplo ni en la gestión de versiones. Si es el caso que tenemos que hacer el knit de un Rmarkdown y necesitamos un archivo .csv para renderizarlo, pero solamente queremos el archivo Rmakrdown en el sistema de git, pues en nuestro archivo .gitignore escribimos .csv, guardamos el archivo y listo.</p>
<p>En el caso del <strong>readme</strong> es un archivo que debe de dar una idea de qué tenemos en el repositorio. Es una guía para nosotros mismos u otros usuarios que vayan a hacer uso del repositorio y nuestro código. En github los readme se ven así:</p>
<p>Una vez que el repositorio haya sido creado, vamos a encontrarnos con una opción que dirá <strong>“clone or download”</strong>. Vamos a hacer click en clone y la dirección que allí sale la tenemos que copiar (ctrl + c). La imagen muestra lo que sucede al hacer clone en el botón verde que ofrece github:</p>
<p>Ya con la información de la dirección del repositorio copiada, vamos a llevarla a nuestra terminal:</p>
</section>
<section id="clonar-repositorio-en-nuestra-computadora" class="level4">
<h4 class="anchored" data-anchor-id="clonar-repositorio-en-nuestra-computadora">2. Clonar repositorio en nuestra computadora</h4>
<p>Una vez que tenemos creado el repositorio y la dirección copiada, vamos a abrir nuestra terminal. Si es usuario de windows puede usar el powershell. Lo primero que vamos a ver es una dirección y allí tendremos que <strong>dirigirnos a la carpeta donde deseamos colocar el repositorio</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> ~ <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Esto me va a llevar al home</span></span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> Desktop/ <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Me lleva al escritorio</span></span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ls</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Me da lista de los elementos que existen en la dirección que estoy</span></span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> primeras_letras_nombre <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>TAB<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> #Con TAB autocompleta el nombre</span></code></pre></div>
</div>
<ul>
<li>Este procedimiento lo vamos realizando hasta llegar a la carpeta en la cual queremos clonar el repositorio.</li>
</ul>
<p>El segundo paso es <strong>clonar el repositorio</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>dirección del repositorio que copiamos<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span></code></pre></div>
</div>
<p>Por último nos dirigimos a la carpeta del repositorio</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>nombre_repositorio<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span></code></pre></div>
</div>
<p>¡Listo! Ya tenemos el repositorio remoto tal cual en nuestra computadora local. A partir de aquí podemos trabajar en nuestros archivos.</p>
</section>
<section id="crear-una-rama-en-el-repositorio" class="level4">
<h4 class="anchored" data-anchor-id="crear-una-rama-en-el-repositorio">3. Crear una rama en el repositorio</h4>
<p>¿Qué pasa si queremos hacer una variación en el código sin miedo a dañar lo que ya tenemos? Pues bien, git nos permite hacer ramas que son una bifurcación del trabajo que llevamos realizado hasta ese momento y que si luego queremos, podemos volver a integrar a la rama principal.</p>
<p>Cuano tenemos un repositorio la rama principal está nombrada como <strong>master</strong>. A partir de esta rama master podemos hacer ramas con los nombres que nosotros queramos. La idea de las ramas es trabajar de manera ordenada, en donde en mi rama master siempre debemos de tener código limpio y funcional y lo que sean nuevas tareas, mejoras o experimentos lo hagamos en ramas que se bifurcan a partir de la rama master.</p>
<p>Cuando el trabajo realizado en la rama sea funcional y limpio, lo podemos integrar a la rama master. Caso contrario podemos olvidarnos de la rama y volver a nuestra rama master.</p>
<p><strong>Crear rama</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> checkout <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-b</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>NOMBRE_RAMA<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> #Nos crea y dirige a la nueva rama</span></code></pre></div>
</div>
<p><strong>Verificar rama en la que estamos</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> status</span></code></pre></div>
</div>
<p><strong>cambiar entre ramas</strong></p>
<p>Para cambiar entre ramas que ya existen NO hay que usar “-b”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> checkout <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>NOMBRE_RAMA<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span></code></pre></div>
</div>
</section>
<section id="subirbajar-cambios" class="level4">
<h4 class="anchored" data-anchor-id="subirbajar-cambios">4. Subir/bajar cambios</h4>
<p>Como estamos trabajando con un repositorio remoto y uno local, vamos a querer sincronizar los cambios. Estos cambios pasarán a estar en la historia del proyecto como <strong>commits</strong>. Un commit es un punto en la historia del proyecto que muestra el trabajo realizado en ese momento. En el flujo del trabajo que uno tenga es recomendable hacer commits regularmente y hacer el push de manera regular para asegurarnos de no perder el trabajo.</p>
<p><strong>4.1 Revisar estado de los cambios </strong> Cuando tengamos cambios en nuestros archivos, podemos revisar cuáles han cambiado y si los tenemos incluidos o no en nuestro registro de cambios</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> status</span></code></pre></div>
</div>
<p><strong>4.2 Agregar cambios</strong> Los archivos que queramos agregar a la historia del proyecto lo podemos hacer de dos maneras, una donde indicamos explícitamente el archivo específico:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> add <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>NOMBRE_ARCHIVO<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span></code></pre></div>
</div>
<p>O de tal manera en que agreguemos todos los archivos con cambios de una vez</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> add .</span></code></pre></div>
</div>
<p><strong>4.3 Someter cambios a la historia de git</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> commit <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MENSAJE_CORTO"</span></span></code></pre></div>
</div>
<p>El mensaje sirve para darnos a nosotros mismos o a colaboradores, una idea del cambio que se trabajó.</p>
<p><strong>4.4 Subir cambios al repositorio remoto</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> push</span></code></pre></div>
</div>
<p><strong>4.5 Bajar cambios del repositorio remoto</strong> Si estamos trabajando con colaboradores y han integrado cambios en el repositorio remoto que nosotros no tenemos en nuestro repositorio local, los podemos traer de la siguiente manera:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> pull</span></code></pre></div>
</div>
</section>
</section>
<section id="qué-tenemos-hasta-acá" class="level2">
<h2 class="anchored" data-anchor-id="qué-tenemos-hasta-acá">¿Qué tenemos hasta acá?</h2>
<p>Una idea básica sobre git, de sus componentes, del flujo de trabajo y de los principales comandos que se usan. Un tutorial con un ejemplo básico vendrá despueś.</p>
<section id="referencias" class="level3">
<h3 class="anchored" data-anchor-id="referencias">Referencias</h3>
<p>https://git-scm.com/book/en/v2 https://git-scm.com/book/es/v1/Ramificaciones-en-Git-Procedimientos-b%C3%A1sicos-para-ramificar-y-fusionar</p>


</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div id="quarto-reuse" class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{a. hernandez mora2016,
  author = {A. Hernandez Mora, Ronny},
  title = {Otra Introducción a Git},
  date = {2016-04-20},
  url = {https://ronnyale.com/posts/2021-12-11-otra-intro-a-git},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-a. hernandez mora2016" class="csl-entry quarto-appendix-citeas">
A. Hernandez Mora, Ronny. 2016. <span>“Otra Introducción a Git.”</span>
April 20, 2016. <a href="https://ronnyale.com/posts/2021-12-11-otra-intro-a-git">https://ronnyale.com/posts/2021-12-11-otra-intro-a-git</a>.
</div></div></section></div> ]]></description>
  <category>git</category>
  <guid>https://ronnyale.com/posts/2021-12-11-otra-intro-a-git/index.html</guid>
  <pubDate>Wed, 20 Apr 2016 06:00:00 GMT</pubDate>
  <media:content url="https://ronnyale.com/posts/2021-12-11-otra-intro-a-git/images/files.png" medium="image" type="image/png" height="202" width="144"/>
</item>
</channel>
</rss>
